var Module=void 0!==Module?Module:{};Module.expectedDataFileDownloads||(Module.expectedDataFileDownloads=0),Module.expectedDataFileDownloads++,function(metadata){"object"==typeof window?window.encodeURIComponent(window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/"):"undefined"==typeof process&&"undefined"!=typeof location&&encodeURIComponent(location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/");var REMOTE_PACKAGE_BASE="https://raw.githubusercontent.com/torbenraab/SpaceCadetPinball/refs/heads/gh-pages/SpaceCadetPinball.data";"function"!=typeof Module.locateFilePackage||Module.locateFile||(Module.locateFile=Module.locateFilePackage,err("warning: you defined Module.locateFilePackage, that has been renamed to Module.locateFile (using your locateFilePackage for now)"));var REMOTE_PACKAGE_NAME=Module.locateFile?Module.locateFile(REMOTE_PACKAGE_BASE,""):REMOTE_PACKAGE_BASE,REMOTE_PACKAGE_SIZE=metadata.remote_package_size;metadata.package_uuid;var packageName,packageSize,callback,xhr,fetchedCallback=null,fetched=Module.getPreloadedPackage?Module.getPreloadedPackage(REMOTE_PACKAGE_NAME,REMOTE_PACKAGE_SIZE):null;function runWithFS(){function assert(check,msg){if(!check)throw msg+(new Error).stack}function DataRequest(start,end,audio){this.start=start,this.end=end,this.audio=audio}Module.FS_createPath("/","game_resources",!0,!0),DataRequest.prototype={requests:{},open:function(mode,name){this.name=name,this.requests[name]=this,Module.addRunDependency("fp "+this.name)},send:function(){},onload:function(){var byteArray=this.byteArray.subarray(this.start,this.end);this.finish(byteArray)},finish:function(byteArray){Module.FS_createDataFile(this.name,null,byteArray,!0,!0,!0),Module.removeRunDependency("fp "+this.name),this.requests[this.name]=null}};for(var files=metadata.files,i=0;i<files.length;++i)new DataRequest(files[i].start,files[i].end,files[i].audio).open("GET",files[i].filename);function processPackageData(arrayBuffer){assert(arrayBuffer,"Loading data file failed."),assert(arrayBuffer instanceof ArrayBuffer,"bad input to processPackageData");var byteArray=new Uint8Array(arrayBuffer);DataRequest.prototype.byteArray=byteArray;for(var files=metadata.files,i=0;i<files.length;++i)DataRequest.prototype.requests[files[i].filename].onload();Module.removeRunDependency("datafile_../bin/SpaceCadetPinball.data")}Module.addRunDependency("datafile_../bin/SpaceCadetPinball.data"),Module.preloadResults||(Module.preloadResults={}),Module.preloadResults["../bin/SpaceCadetPinball.data"]={fromCache:!1},fetched?(processPackageData(fetched),fetched=null):fetchedCallback=processPackageData}fetched||(packageName=REMOTE_PACKAGE_NAME,packageSize=REMOTE_PACKAGE_SIZE,callback=function(data){fetchedCallback?(fetchedCallback(data),fetchedCallback=null):fetched=data},(xhr=new XMLHttpRequest).open("GET",packageName,!0),xhr.responseType="arraybuffer",xhr.onprogress=function(event){var url=packageName,size=packageSize;if(event.total&&(size=event.total),event.loaded){xhr.addedTotal?Module.dataFileDownloads[url].loaded=event.loaded:(xhr.addedTotal=!0,Module.dataFileDownloads||(Module.dataFileDownloads={}),Module.dataFileDownloads[url]={loaded:event.loaded,total:size});var total=0,loaded=0,num=0;for(var download in Module.dataFileDownloads){var data=Module.dataFileDownloads[download];total+=data.total,loaded+=data.loaded,num++}total=Math.ceil(total*Module.expectedDataFileDownloads/num),Module.setStatus&&Module.setStatus("Downloading data... ("+loaded+"/"+total+")")}else Module.dataFileDownloads||Module.setStatus&&Module.setStatus("Downloading data...")},xhr.onerror=function(event){throw new Error("NetworkError for: "+packageName)},xhr.onload=function(event){if(!(200==xhr.status||304==xhr.status||206==xhr.status||0==xhr.status&&xhr.response))throw new Error(xhr.statusText+" : "+xhr.responseURL);var packageData=xhr.response;callback(packageData)},xhr.send(null)),Module.calledRun?runWithFS():(Module.preRun||(Module.preRun=[]),Module.preRun.push(runWithFS))}({files:[{filename:"/game_resources/SOUND29.WAV",start:0,end:10364,audio:0},{filename:"/game_resources/SOUND560.WAV",start:10364,end:39368,audio:0},{filename:"/game_resources/SOUND30.WAV",start:39368,end:61938,audio:0},{filename:"/game_resources/table.bmp",start:61938,end:401116,audio:0},{filename:"/game_resources/SOUND54.WAV",start:401116,end:419366,audio:0},{filename:"/game_resources/SOUND12.WAV",start:419366,end:423662,audio:0},{filename:"/game_resources/SOUND17.WAV",start:423662,end:425752,audio:0},{filename:"/game_resources/SOUND27.WAV",start:425752,end:445994,audio:0},{filename:"/game_resources/SOUND22.WAV",start:445994,end:453370,audio:0},{filename:"/game_resources/SOUND104.WAV",start:453370,end:454596,audio:0},{filename:"/game_resources/SOUND42.WAV",start:454596,end:483736,audio:0},{filename:"/game_resources/SOUND112.WAV",start:483736,end:484560,audio:0},{filename:"/game_resources/SOUND24.WAV",start:484560,end:496666,audio:0},{filename:"/game_resources/SOUND49D.WAV",start:496666,end:499996,audio:0},{filename:"/game_resources/PINBALL.MID",start:499996,end:608603,audio:0},{filename:"/game_resources/SOUND3.WAV",start:608603,end:631461,audio:0},{filename:"/game_resources/SOUND16.WAV",start:631461,end:632507,audio:0},{filename:"/game_resources/SOUND43.WAV",start:632507,end:655303,audio:0},{filename:"/game_resources/SOUND26.WAV",start:655303,end:662609,audio:0},{filename:"/game_resources/README.txt",start:662609,end:662716,audio:0},{filename:"/game_resources/SOUND20.WAV",start:662716,end:671366,audio:0},{filename:"/game_resources/SOUND111.WAV",start:671366,end:672256,audio:0},{filename:"/game_resources/SOUND8.WAV",start:672256,end:674358,audio:0},{filename:"/game_resources/SOUND5.WAV",start:674358,end:677538,audio:0},{filename:"/game_resources/SOUND58.WAV",start:677538,end:680946,audio:0},{filename:"/game_resources/FONT.DAT",start:680946,end:684893,audio:0},{filename:"/game_resources/SOUND1.WAV",start:684893,end:740383,audio:0},{filename:"/game_resources/PINBALL2.MID",start:740383,end:769271,audio:0},{filename:"/game_resources/SOUND28.WAV",start:769271,end:777921,audio:0},{filename:"/game_resources/SOUND13.WAV",start:777921,end:785955,audio:0},{filename:"/game_resources/SOUND735.WAV",start:785955,end:813223,audio:0},{filename:"/game_resources/SOUND105.WAV",start:813223,end:815191,audio:0},{filename:"/game_resources/SOUND181.WAV",start:815191,end:842663,audio:0},{filename:"/game_resources/wavemix.inf",start:842663,end:845350,audio:0},{filename:"/game_resources/SOUND240.WAV",start:845350,end:859950,audio:0},{filename:"/game_resources/SOUND9.WAV",start:859950,end:880048,audio:0},{filename:"/game_resources/SOUND18.WAV",start:880048,end:884034,audio:0},{filename:"/game_resources/SOUND21.WAV",start:884034,end:893228,audio:0},{filename:"/game_resources/SOUND6.WAV",start:893228,end:897604,audio:0},{filename:"/game_resources/SOUND45.WAV",start:897604,end:907374,audio:0},{filename:"/game_resources/SOUND50.WAV",start:907374,end:919448,audio:0},{filename:"/game_resources/SOUND999.WAV",start:919448,end:926190,audio:0},{filename:"/game_resources/SOUND528.WAV",start:926190,end:935122,audio:0},{filename:"/game_resources/SOUND243.WAV",start:935122,end:955834,audio:0},{filename:"/game_resources/PINBALL.DAT",start:955834,end:1884534,audio:0},{filename:"/game_resources/SOUND53.WAV",start:1884534,end:1893556,audio:0},{filename:"/game_resources/SOUND131.WAV",start:1893556,end:1894846,audio:0},{filename:"/game_resources/SOUND19.WAV",start:1894846,end:1900076,audio:0},{filename:"/game_resources/SOUND39.WAV",start:1900076,end:1928358,audio:0},{filename:"/game_resources/SOUND35.WAV",start:1928358,end:1947856,audio:0},{filename:"/game_resources/SOUND713.WAV",start:1947856,end:1962448,audio:0},{filename:"/game_resources/SOUND38.WAV",start:1962448,end:1975472,audio:0},{filename:"/game_resources/SOUND108.WAV",start:1975472,end:1983226,audio:0},{filename:"/game_resources/SOUND55.WAV",start:1983226,end:2005116,audio:0},{filename:"/game_resources/SOUND57.WAV",start:2005116,end:2035618,audio:0},{filename:"/game_resources/SOUND7.WAV",start:2035618,end:2062060,audio:0},{filename:"/game_resources/SOUND68.WAV",start:2062060,end:2094462,audio:0},{filename:"/game_resources/SOUND136.WAV",start:2094462,end:2113744,audio:0},{filename:"/game_resources/SOUND34.WAV",start:2113744,end:2115264,audio:0},{filename:"/game_resources/SOUND827.WAV",start:2115264,end:2162494,audio:0},{filename:"/game_resources/SOUND36.WAV",start:2162494,end:2196342,audio:0},{filename:"/game_resources/SOUND25.WAV",start:2196342,end:2222046,audio:0},{filename:"/game_resources/SOUND65.WAV",start:2222046,end:2239722,audio:0},{filename:"/game_resources/SOUND563.WAV",start:2239722,end:2263914,audio:0},{filename:"/game_resources/SOUND4.WAV",start:2263914,end:2280540,audio:0},{filename:"/game_resources/SOUND14.WAV",start:2280540,end:2283542,audio:0},{filename:"/game_resources/SOUND49.WAV",start:2283542,end:2285418,audio:0}],remote_package_size:2285418,package_uuid:"ddf920d4-7275-4e96-b7b9-35a81f87a5f2"});var key,moduleOverrides={};for(key in Module)Module.hasOwnProperty(key)&&(moduleOverrides[key]=Module[key]);var arguments_=[],thisProgram="./this.program",quit_=function(status,toThrow){throw toThrow},ENVIRONMENT_IS_WEB=!1,ENVIRONMENT_IS_WORKER=!1;ENVIRONMENT_IS_WEB="object"==typeof window,ENVIRONMENT_IS_WORKER="function"==typeof importScripts;var read_,readAsync,readBinary,setWindowTitle,nodeFS,nodePath,scriptDirectory="";function locateFile(path){return Module.locateFile?Module.locateFile(path,scriptDirectory):scriptDirectory+path}(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:"undefined"!=typeof document&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=0!==scriptDirectory.indexOf("blob:")?scriptDirectory.substr(0,scriptDirectory.lastIndexOf("/")+1):"",read_=function(url){var xhr=new XMLHttpRequest;return xhr.open("GET",url,!1),xhr.send(null),xhr.responseText},ENVIRONMENT_IS_WORKER&&(readBinary=function(url){var xhr=new XMLHttpRequest;return xhr.open("GET",url,!1),xhr.responseType="arraybuffer",xhr.send(null),new Uint8Array(xhr.response)}),readAsync=function(url,onload,onerror){var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="arraybuffer",xhr.onload=function(){200==xhr.status||0==xhr.status&&xhr.response?onload(xhr.response):onerror()},xhr.onerror=onerror,xhr.send(null)},setWindowTitle=function(title){document.title=title});var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);for(key in moduleOverrides)moduleOverrides.hasOwnProperty(key)&&(Module[key]=moduleOverrides[key]);moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16;function alignMemory(size,factor){return factor||(factor=STACK_ALIGN),Math.ceil(size/factor)*factor}function warnOnce(text){warnOnce.shown||(warnOnce.shown={}),warnOnce.shown[text]||(warnOnce.shown[text]=1,err(text))}var wasmBinary,tempRet0=0,setTempRet0=function(value){tempRet0=value};Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var wasmMemory,noExitRuntime=Module.noExitRuntime||!0;function setValue(ptr,value,type,noSafe){switch("*"===(type=type||"i8").charAt(type.length-1)&&(type="i32"),type){case"i1":case"i8":HEAP8[ptr|0]=value;break;case"i16":HEAP16[ptr>>1]=value;break;case"i32":HEAP32[ptr>>2]=value;break;case"i64":tempI64=[value>>>0,(tempDouble=value,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[ptr>>2]=tempI64[0],HEAP32[ptr+4>>2]=tempI64[1];break;case"float":HEAPF32[ptr>>2]=value;break;case"double":HEAPF64[ptr>>3]=value;break;default:abort("invalid type for setValue: "+type)}}"object"!=typeof WebAssembly&&abort("no native wasm support detected");var EXITSTATUS,ABORT=!1;function assert(condition,text){condition||abort("Assertion failed: "+text)}var ALLOC_NORMAL=0,ALLOC_STACK=1;function allocate(slab,allocator){var ret;return ret=allocator==ALLOC_STACK?stackAlloc(slab.length):_malloc(slab.length),slab.subarray||slab.slice?HEAPU8.set(slab,ret):HEAPU8.set(new Uint8Array(slab),ret),ret}var UTF8Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function UTF8ArrayToString(heap,idx,maxBytesToRead){for(var endIdx=idx+maxBytesToRead,endPtr=idx;heap[endPtr]&&!(endPtr>=endIdx);)++endPtr;if(endPtr-idx>16&&heap.subarray&&UTF8Decoder)return UTF8Decoder.decode(heap.subarray(idx,endPtr));for(var str="";idx<endPtr;){var u0=heap[idx++];if(128&u0){var u1=63&heap[idx++];if(192!=(224&u0)){var u2=63&heap[idx++];if((u0=224==(240&u0)?(15&u0)<<12|u1<<6|u2:(7&u0)<<18|u1<<12|u2<<6|63&heap[idx++])<65536)str+=String.fromCharCode(u0);else{var ch=u0-65536;str+=String.fromCharCode(55296|ch>>10,56320|1023&ch)}}else str+=String.fromCharCode((31&u0)<<6|u1)}else str+=String.fromCharCode(u0)}return str}function UTF8ToString(ptr,maxBytesToRead){return ptr?UTF8ArrayToString(HEAPU8,ptr,maxBytesToRead):""}function stringToUTF8Array(str,heap,outIdx,maxBytesToWrite){if(!(maxBytesToWrite>0))return 0;for(var startIdx=outIdx,endIdx=outIdx+maxBytesToWrite-1,i=0;i<str.length;++i){var u=str.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((1023&u)<<10)|1023&str.charCodeAt(++i);if(u<=127){if(outIdx>=endIdx)break;heap[outIdx++]=u}else if(u<=2047){if(outIdx+1>=endIdx)break;heap[outIdx++]=192|u>>6,heap[outIdx++]=128|63&u}else if(u<=65535){if(outIdx+2>=endIdx)break;heap[outIdx++]=224|u>>12,heap[outIdx++]=128|u>>6&63,heap[outIdx++]=128|63&u}else{if(outIdx+3>=endIdx)break;heap[outIdx++]=240|u>>18,heap[outIdx++]=128|u>>12&63,heap[outIdx++]=128|u>>6&63,heap[outIdx++]=128|63&u}}return heap[outIdx]=0,outIdx-startIdx}function stringToUTF8(str,outPtr,maxBytesToWrite){return stringToUTF8Array(str,HEAPU8,outPtr,maxBytesToWrite)}function lengthBytesUTF8(str){for(var len=0,i=0;i<str.length;++i){var u=str.charCodeAt(i);u>=55296&&u<=57343&&(u=65536+((1023&u)<<10)|1023&str.charCodeAt(++i)),u<=127?++len:len+=u<=2047?2:u<=65535?3:4}return len}var buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64,UTF16Decoder="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function UTF16ToString(ptr,maxBytesToRead){for(var endPtr=ptr,idx=endPtr>>1,maxIdx=idx+maxBytesToRead/2;!(idx>=maxIdx)&&HEAPU16[idx];)++idx;if((endPtr=idx<<1)-ptr>32&&UTF16Decoder)return UTF16Decoder.decode(HEAPU8.subarray(ptr,endPtr));for(var str="",i=0;!(i>=maxBytesToRead/2);++i){var codeUnit=HEAP16[ptr+2*i>>1];if(0==codeUnit)break;str+=String.fromCharCode(codeUnit)}return str}function stringToUTF16(str,outPtr,maxBytesToWrite){if(void 0===maxBytesToWrite&&(maxBytesToWrite=2147483647),maxBytesToWrite<2)return 0;for(var startPtr=outPtr,numCharsToWrite=(maxBytesToWrite-=2)<2*str.length?maxBytesToWrite/2:str.length,i=0;i<numCharsToWrite;++i){var codeUnit=str.charCodeAt(i);HEAP16[outPtr>>1]=codeUnit,outPtr+=2}return HEAP16[outPtr>>1]=0,outPtr-startPtr}function lengthBytesUTF16(str){return 2*str.length}function UTF32ToString(ptr,maxBytesToRead){for(var i=0,str="";!(i>=maxBytesToRead/4);){var utf32=HEAP32[ptr+4*i>>2];if(0==utf32)break;if(++i,utf32>=65536){var ch=utf32-65536;str+=String.fromCharCode(55296|ch>>10,56320|1023&ch)}else str+=String.fromCharCode(utf32)}return str}function stringToUTF32(str,outPtr,maxBytesToWrite){if(void 0===maxBytesToWrite&&(maxBytesToWrite=2147483647),maxBytesToWrite<4)return 0;for(var startPtr=outPtr,endPtr=startPtr+maxBytesToWrite-4,i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);if(codeUnit>=55296&&codeUnit<=57343)codeUnit=65536+((1023&codeUnit)<<10)|1023&str.charCodeAt(++i);if(HEAP32[outPtr>>2]=codeUnit,(outPtr+=4)+4>endPtr)break}return HEAP32[outPtr>>2]=0,outPtr-startPtr}function lengthBytesUTF32(str){for(var len=0,i=0;i<str.length;++i){var codeUnit=str.charCodeAt(i);codeUnit>=55296&&codeUnit<=57343&&++i,len+=4}return len}function allocateUTF8(str){var size=lengthBytesUTF8(str)+1,ret=_malloc(size);return ret&&stringToUTF8Array(str,HEAP8,ret,size),ret}function allocateUTF8OnStack(str){var size=lengthBytesUTF8(str)+1,ret=stackAlloc(size);return stringToUTF8Array(str,HEAP8,ret,size),ret}function writeAsciiToMemory(str,buffer,dontAddNull){for(var i=0;i<str.length;++i)HEAP8[buffer++|0]=str.charCodeAt(i);dontAddNull||(HEAP8[buffer|0]=0)}function alignUp(x,multiple){return x%multiple>0&&(x+=multiple-x%multiple),x}function updateGlobalBufferAndViews(buf){buffer=buf,Module.HEAP8=HEAP8=new Int8Array(buf),Module.HEAP16=HEAP16=new Int16Array(buf),Module.HEAP32=HEAP32=new Int32Array(buf),Module.HEAPU8=HEAPU8=new Uint8Array(buf),Module.HEAPU16=HEAPU16=new Uint16Array(buf),Module.HEAPU32=HEAPU32=new Uint32Array(buf),Module.HEAPF32=HEAPF32=new Float32Array(buf),Module.HEAPF64=HEAPF64=new Float64Array(buf)}var wasmTable,INITIAL_MEMORY=Module.INITIAL_MEMORY||16777216,__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATEXIT__=[],__ATPOSTRUN__=[],runtimeInitialized=!1,runtimeExited=!1;function preRun(){if(Module.preRun)for("function"==typeof Module.preRun&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}function initRuntime(){runtimeInitialized=!0,Module.noFSInit||FS.init.initialized||FS.init(),FS.ignorePermissions=!1,TTY.init(),callRuntimeCallbacks(__ATINIT__)}function preMain(){callRuntimeCallbacks(__ATMAIN__)}function exitRuntime(){runtimeExited=!0}function postRun(){if(Module.postRun)for("function"==typeof Module.postRun&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}function addOnPreRun(cb){__ATPRERUN__.unshift(cb)}function addOnInit(cb){__ATINIT__.unshift(cb)}function addOnPostRun(cb){__ATPOSTRUN__.unshift(cb)}var wasmBinaryFile,tempDouble,tempI64,runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function getUniqueRunDependency(id){return id}function addRunDependency(id){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}function removeRunDependency(id){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),0==runDependencies&&(null!==runDependencyWatcher&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var callback=dependenciesFulfilled;dependenciesFulfilled=null,callback()}}function abort(what){throw Module.onAbort&&Module.onAbort(what),err(what+=""),ABORT=!0,EXITSTATUS=1,what="abort("+what+"). Build with -s ASSERTIONS=1 for more info.",new WebAssembly.RuntimeError(what)}function getBinary(file){try{if(file==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(file);throw"both async and sync fetching of the wasm failed"}catch(err){abort(err)}}function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if("function"==typeof fetch)return fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(response){if(!response.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return response.arrayBuffer()})).catch((function(){return getBinary(wasmBinaryFile)}));if(readAsync)return new Promise((function(resolve,reject){readAsync(wasmBinaryFile,(function(response){resolve(new Uint8Array(response))}),reject)}))}return Promise.resolve().then((function(){return getBinary(wasmBinaryFile)}))}function createWasm(){var info={a:asmLibraryArg};function receiveInstance(instance,module){var exports=instance.exports;Module.asm=exports,updateGlobalBufferAndViews((wasmMemory=Module.asm.Gd).buffer),wasmTable=Module.asm.Id,addOnInit(Module.asm.Hd),removeRunDependency("wasm-instantiate")}function receiveInstantiationResult(result){receiveInstance(result.instance)}function instantiateArrayBuffer(receiver){return getBinaryPromise().then((function(binary){return WebAssembly.instantiate(binary,info)})).then(receiver,(function(reason){err("failed to asynchronously prepare wasm: "+reason),abort(reason)}))}if(addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(info,receiveInstance)}catch(e){return err("Module.instantiateWasm callback failed with error: "+e),!1}return wasmBinary||"function"!=typeof WebAssembly.instantiateStreaming||"function"!=typeof fetch?instantiateArrayBuffer(receiveInstantiationResult):fetch(wasmBinaryFile,{credentials:"same-origin"}).then((function(response){return WebAssembly.instantiateStreaming(response,info).then(receiveInstantiationResult,(function(reason){return err("wasm streaming compile failed: "+reason),err("falling back to ArrayBuffer instantiation"),instantiateArrayBuffer(receiveInstantiationResult)}))})),{}}Module.preloadedImages={},Module.preloadedAudios={},wasmBinaryFile="https://raw.githubusercontent.com/torbenraab/SpaceCadetPinball/refs/heads/gh-pages/SpaceCadetPinball.wasm";var ASM_CONSTS={3402188:function($0){var str=UTF8ToString($0)+"\n\nAbort/Retry/Ignore/AlwaysIgnore? [ariA] :",reply=window.prompt(str,"i");return null===reply&&(reply="i"),allocate(intArrayFromString(reply),"i8",ALLOC_NORMAL)},3402413:function($0,$1){alert(UTF8ToString($0)+"\n\n"+UTF8ToString($1))},3402470:function($0,$1,$2){var w=$0,h=$1,pixels=$2;Module.SDL2||(Module.SDL2={});var SDL2=Module.SDL2;SDL2.ctxCanvas!==Module.canvas&&(SDL2.ctx=Module.createContext(Module.canvas,!1,!0),SDL2.ctxCanvas=Module.canvas),SDL2.w===w&&SDL2.h===h&&SDL2.imageCtx===SDL2.ctx||(SDL2.image=SDL2.ctx.createImageData(w,h),SDL2.w=w,SDL2.h=h,SDL2.imageCtx=SDL2.ctx);var num,data=SDL2.image.data,src=pixels>>2,dst=0;if("undefined"!=typeof CanvasPixelArray&&data instanceof CanvasPixelArray)for(num=data.length;dst<num;){var val=HEAP32[src];data[dst]=255&val,data[dst+1]=val>>8&255,data[dst+2]=val>>16&255,data[dst+3]=255,src++,dst+=4}else{SDL2.data32Data!==data&&(SDL2.data32=new Int32Array(data.buffer),SDL2.data8=new Uint8Array(data.buffer));var data32=SDL2.data32;num=data32.length,data32.set(HEAP32.subarray(src,src+num));var data8=SDL2.data8,i=3,j=i+4*num;if(num%8==0)for(;i<j;)data8[i]=255,data8[i=i+4|0]=255,data8[i=i+4|0]=255,data8[i=i+4|0]=255,data8[i=i+4|0]=255,data8[i=i+4|0]=255,data8[i=i+4|0]=255,data8[i=i+4|0]=255,i=i+4|0;else for(;i<j;)data8[i]=255,i=i+4|0}return SDL2.ctx.putImageData(SDL2.image,0,0),0},3403925:function($0,$1,$2,$3,$4){var w=$0,h=$1,hot_x=$2,hot_y=$3,pixels=$4,canvas=document.createElement("canvas");canvas.width=w,canvas.height=h;var num,ctx=canvas.getContext("2d"),image=ctx.createImageData(w,h),data=image.data,src=pixels>>2,dst=0;if("undefined"!=typeof CanvasPixelArray&&data instanceof CanvasPixelArray)for(num=data.length;dst<num;){var val=HEAP32[src];data[dst]=255&val,data[dst+1]=val>>8&255,data[dst+2]=val>>16&255,data[dst+3]=val>>24&255,src++,dst+=4}else{var data32=new Int32Array(data.buffer);num=data32.length,data32.set(HEAP32.subarray(src,src+num))}ctx.putImageData(image,0,0);var url=0===hot_x&&0===hot_y?"url("+canvas.toDataURL()+"), auto":"url("+canvas.toDataURL()+") "+hot_x+" "+hot_y+", auto",urlBuf=_malloc(url.length+1);return stringToUTF8(url,urlBuf,url.length+1),urlBuf},3404914:function($0){return Module.canvas&&(Module.canvas.style.cursor=UTF8ToString($0)),0},3405007:function(){Module.canvas&&(Module.canvas.style.cursor="none")},3405076:function(){return screen.width},3405101:function(){return screen.height},3405127:function(){return window.innerWidth},3405157:function(){return window.innerHeight},3405188:function($0){return void 0!==setWindowTitle&&setWindowTitle(UTF8ToString($0)),0},3405283:function(){return"undefined"!=typeof AudioContext||"undefined"!=typeof webkitAudioContext?1:0},3405420:function(){return void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia||void 0!==navigator.webkitGetUserMedia?1:0},3405644:function($0){void 0===Module.SDL2&&(Module.SDL2={});var SDL2=Module.SDL2;return $0?SDL2.capture={}:SDL2.audio={},SDL2.audioContext||("undefined"!=typeof AudioContext?SDL2.audioContext=new AudioContext:"undefined"!=typeof webkitAudioContext&&(SDL2.audioContext=new webkitAudioContext),SDL2.audioContext&&autoResumeAudioContext(SDL2.audioContext)),void 0===SDL2.audioContext?-1:0},3406137:function(){return Module.SDL2.audioContext.sampleRate},3406205:function($0,$1,$2,$3){var SDL2=Module.SDL2,have_microphone=function(stream){void 0!==SDL2.capture.silenceTimer&&(clearTimeout(SDL2.capture.silenceTimer),SDL2.capture.silenceTimer=void 0),SDL2.capture.mediaStreamNode=SDL2.audioContext.createMediaStreamSource(stream),SDL2.capture.scriptProcessorNode=SDL2.audioContext.createScriptProcessor($1,$0,1),SDL2.capture.scriptProcessorNode.onaudioprocess=function(audioProcessingEvent){void 0!==SDL2&&void 0!==SDL2.capture&&(audioProcessingEvent.outputBuffer.getChannelData(0).fill(0),SDL2.capture.currentCaptureBuffer=audioProcessingEvent.inputBuffer,dynCall("vi",$2,[$3]))},SDL2.capture.mediaStreamNode.connect(SDL2.capture.scriptProcessorNode),SDL2.capture.scriptProcessorNode.connect(SDL2.audioContext.destination),SDL2.capture.stream=stream},no_microphone=function(error){};SDL2.capture.silenceBuffer=SDL2.audioContext.createBuffer($0,$1,SDL2.audioContext.sampleRate),SDL2.capture.silenceBuffer.getChannelData(0).fill(0);SDL2.capture.silenceTimer=setTimeout((function(){SDL2.capture.currentCaptureBuffer=SDL2.capture.silenceBuffer,dynCall("vi",$2,[$3])}),$1/SDL2.audioContext.sampleRate*1e3),void 0!==navigator.mediaDevices&&void 0!==navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(have_microphone).catch(no_microphone):void 0!==navigator.webkitGetUserMedia&&navigator.webkitGetUserMedia({audio:!0,video:!1},have_microphone,no_microphone)},3407857:function($0,$1,$2,$3){var SDL2=Module.SDL2;SDL2.audio.scriptProcessorNode=SDL2.audioContext.createScriptProcessor($1,0,$0),SDL2.audio.scriptProcessorNode.onaudioprocess=function(e){void 0!==SDL2&&void 0!==SDL2.audio&&(SDL2.audio.currentOutputBuffer=e.outputBuffer,dynCall("vi",$2,[$3]))},SDL2.audio.scriptProcessorNode.connect(SDL2.audioContext.destination)},3408267:function($0,$1){for(var SDL2=Module.SDL2,numChannels=SDL2.capture.currentCaptureBuffer.numberOfChannels,c=0;c<numChannels;++c){var channelData=SDL2.capture.currentCaptureBuffer.getChannelData(c);if(channelData.length!=$1)throw"Web Audio capture buffer length mismatch! Destination size: "+channelData.length+" samples vs expected "+$1+" samples!";if(1==numChannels)for(var j=0;j<$1;++j)setValue($0+4*j,channelData[j],"float");else for(j=0;j<$1;++j)setValue($0+4*(j*numChannels+c),channelData[j],"float")}},3408872:function($0,$1){for(var SDL2=Module.SDL2,numChannels=SDL2.audio.currentOutputBuffer.numberOfChannels,c=0;c<numChannels;++c){var channelData=SDL2.audio.currentOutputBuffer.getChannelData(c);if(channelData.length!=$1)throw"Web Audio output buffer length mismatch! Destination size: "+channelData.length+" samples vs expected "+$1+" samples!";for(var j=0;j<$1;++j)channelData[j]=HEAPF32[$0+(j*numChannels+c<<2)>>2]}},3409352:function($0){var SDL2=Module.SDL2;if($0){if(void 0!==SDL2.capture.silenceTimer&&clearTimeout(SDL2.capture.silenceTimer),void 0!==SDL2.capture.stream){for(var tracks=SDL2.capture.stream.getAudioTracks(),i=0;i<tracks.length;i++)SDL2.capture.stream.removeTrack(tracks[i]);SDL2.capture.stream=void 0}void 0!==SDL2.capture.scriptProcessorNode&&(SDL2.capture.scriptProcessorNode.onaudioprocess=function(audioProcessingEvent){},SDL2.capture.scriptProcessorNode.disconnect(),SDL2.capture.scriptProcessorNode=void 0),void 0!==SDL2.capture.mediaStreamNode&&(SDL2.capture.mediaStreamNode.disconnect(),SDL2.capture.mediaStreamNode=void 0),void 0!==SDL2.capture.silenceBuffer&&(SDL2.capture.silenceBuffer=void 0),SDL2.capture=void 0}else null!=SDL2.audio.scriptProcessorNode&&(SDL2.audio.scriptProcessorNode.disconnect(),SDL2.audio.scriptProcessorNode=void 0),SDL2.audio=void 0;void 0!==SDL2.audioContext&&void 0===SDL2.audio&&void 0===SDL2.capture&&(SDL2.audioContext.close(),SDL2.audioContext=void 0)}};function listenOnce(object,event,func){object.addEventListener(event,func,{once:!0})}function autoResumeAudioContext(ctx,elements){elements||(elements=[document,document.getElementById("canvas")]),["keydown","mousedown","touchstart"].forEach((function(event){elements.forEach((function(element){element&&listenOnce(element,event,(function(){"suspended"===ctx.state&&ctx.resume()}))}))}))}function callRuntimeCallbacks(callbacks){for(;callbacks.length>0;){var callback=callbacks.shift();if("function"!=typeof callback){var func=callback.func;"number"==typeof func?void 0===callback.arg?wasmTable.get(func)():wasmTable.get(func)(callback.arg):func(void 0===callback.arg?null:callback.arg)}else callback(Module)}}function dynCallLegacy(sig,ptr,args){var f=Module["dynCall_"+sig];return args&&args.length?f.apply(null,[ptr].concat(args)):f.call(null,ptr)}function dynCall(sig,ptr,args){return sig.includes("j")?dynCallLegacy(sig,ptr,args):wasmTable.get(ptr).apply(null,args)}var runtimeKeepaliveCounter=0;function keepRuntimeAlive(){return noExitRuntime||runtimeKeepaliveCounter>0}var ExceptionInfoAttrs={DESTRUCTOR_OFFSET:0,REFCOUNT_OFFSET:4,TYPE_OFFSET:8,CAUGHT_OFFSET:12,RETHROWN_OFFSET:13,SIZE:16};function ___cxa_allocate_exception(size){return _malloc(size+ExceptionInfoAttrs.SIZE)+ExceptionInfoAttrs.SIZE}function ExceptionInfo(excPtr){this.excPtr=excPtr,this.ptr=excPtr-ExceptionInfoAttrs.SIZE,this.set_type=function(type){HEAP32[this.ptr+ExceptionInfoAttrs.TYPE_OFFSET>>2]=type},this.get_type=function(){return HEAP32[this.ptr+ExceptionInfoAttrs.TYPE_OFFSET>>2]},this.set_destructor=function(destructor){HEAP32[this.ptr+ExceptionInfoAttrs.DESTRUCTOR_OFFSET>>2]=destructor},this.get_destructor=function(){return HEAP32[this.ptr+ExceptionInfoAttrs.DESTRUCTOR_OFFSET>>2]},this.set_refcount=function(refcount){HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=refcount},this.set_caught=function(caught){caught=caught?1:0,HEAP8[this.ptr+ExceptionInfoAttrs.CAUGHT_OFFSET|0]=caught},this.get_caught=function(){return 0!=HEAP8[this.ptr+ExceptionInfoAttrs.CAUGHT_OFFSET|0]},this.set_rethrown=function(rethrown){rethrown=rethrown?1:0,HEAP8[this.ptr+ExceptionInfoAttrs.RETHROWN_OFFSET|0]=rethrown},this.get_rethrown=function(){return 0!=HEAP8[this.ptr+ExceptionInfoAttrs.RETHROWN_OFFSET|0]},this.init=function(type,destructor){this.set_type(type),this.set_destructor(destructor),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var value=HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2];HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=value+1},this.release_ref=function(){var prev=HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2];return HEAP32[this.ptr+ExceptionInfoAttrs.REFCOUNT_OFFSET>>2]=prev-1,1===prev}}var exceptionLast=0,uncaughtExceptionCount=0;function ___cxa_throw(ptr,type,destructor){throw new ExceptionInfo(ptr).init(type,destructor),exceptionLast=ptr,uncaughtExceptionCount++,ptr}var PATH={splitPath:function(filename){return/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(filename).slice(1)},normalizeArray:function(parts,allowAboveRoot){for(var up=0,i=parts.length-1;i>=0;i--){var last=parts[i];"."===last?parts.splice(i,1):".."===last?(parts.splice(i,1),up++):up&&(parts.splice(i,1),up--)}if(allowAboveRoot)for(;up;up--)parts.unshift("..");return parts},normalize:function(path){var isAbsolute="/"===path.charAt(0),trailingSlash="/"===path.substr(-1);return(path=PATH.normalizeArray(path.split("/").filter((function(p){return!!p})),!isAbsolute).join("/"))||isAbsolute||(path="."),path&&trailingSlash&&(path+="/"),(isAbsolute?"/":"")+path},dirname:function(path){var result=PATH.splitPath(path),root=result[0],dir=result[1];return root||dir?(dir&&(dir=dir.substr(0,dir.length-1)),root+dir):"."},basename:function(path){if("/"===path)return"/";var lastSlash=(path=(path=PATH.normalize(path)).replace(/\/$/,"")).lastIndexOf("/");return-1===lastSlash?path:path.substr(lastSlash+1)},extname:function(path){return PATH.splitPath(path)[3]},join:function(){var paths=Array.prototype.slice.call(arguments,0);return PATH.normalize(paths.join("/"))},join2:function(l,r){return PATH.normalize(l+"/"+r)}};function getRandomDevice(){if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues){var randomBuffer=new Uint8Array(1);return function(){return crypto.getRandomValues(randomBuffer),randomBuffer[0]}}return function(){abort("randomDevice")}}var PATH_FS={resolve:function(){for(var resolvedPath="",resolvedAbsolute=!1,i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:FS.cwd();if("string"!=typeof path)throw new TypeError("Arguments to path.resolve must be strings");if(!path)return"";resolvedPath=path+"/"+resolvedPath,resolvedAbsolute="/"===path.charAt(0)}return(resolvedAbsolute?"/":"")+(resolvedPath=PATH.normalizeArray(resolvedPath.split("/").filter((function(p){return!!p})),!resolvedAbsolute).join("/"))||"."},relative:function(from,to){function trim(arr){for(var start=0;start<arr.length&&""===arr[start];start++);for(var end=arr.length-1;end>=0&&""===arr[end];end--);return start>end?[]:arr.slice(start,end-start+1)}from=PATH_FS.resolve(from).substr(1),to=PATH_FS.resolve(to).substr(1);for(var fromParts=trim(from.split("/")),toParts=trim(to.split("/")),length=Math.min(fromParts.length,toParts.length),samePartsLength=length,i=0;i<length;i++)if(fromParts[i]!==toParts[i]){samePartsLength=i;break}var outputParts=[];for(i=samePartsLength;i<fromParts.length;i++)outputParts.push("..");return(outputParts=outputParts.concat(toParts.slice(samePartsLength))).join("/")}},TTY={ttys:[],init:function(){},shutdown:function(){},register:function(dev,ops){TTY.ttys[dev]={input:[],output:[],ops:ops},FS.registerDevice(dev,TTY.stream_ops)},stream_ops:{open:function(stream){var tty=TTY.ttys[stream.node.rdev];if(!tty)throw new FS.ErrnoError(43);stream.tty=tty,stream.seekable=!1},close:function(stream){stream.tty.ops.flush(stream.tty)},flush:function(stream){stream.tty.ops.flush(stream.tty)},read:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.get_char)throw new FS.ErrnoError(60);for(var bytesRead=0,i=0;i<length;i++){var result;try{result=stream.tty.ops.get_char(stream.tty)}catch(e){throw new FS.ErrnoError(29)}if(void 0===result&&0===bytesRead)throw new FS.ErrnoError(6);if(null==result)break;bytesRead++,buffer[offset+i]=result}return bytesRead&&(stream.node.timestamp=Date.now()),bytesRead},write:function(stream,buffer,offset,length,pos){if(!stream.tty||!stream.tty.ops.put_char)throw new FS.ErrnoError(60);try{for(var i=0;i<length;i++)stream.tty.ops.put_char(stream.tty,buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}return length&&(stream.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:function(tty){if(!tty.input.length){var result=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(result=window.prompt("Input: "))&&(result+="\n"):"function"==typeof readline&&null!==(result=readline())&&(result+="\n"),!result)return null;tty.input=intArrayFromString(result,!0)}return tty.input.shift()},put_char:function(tty,val){null===val||10===val?(out(UTF8ArrayToString(tty.output,0)),tty.output=[]):0!=val&&tty.output.push(val)},flush:function(tty){tty.output&&tty.output.length>0&&(out(UTF8ArrayToString(tty.output,0)),tty.output=[])}},default_tty1_ops:{put_char:function(tty,val){null===val||10===val?(err(UTF8ArrayToString(tty.output,0)),tty.output=[]):0!=val&&tty.output.push(val)},flush:function(tty){tty.output&&tty.output.length>0&&(err(UTF8ArrayToString(tty.output,0)),tty.output=[])}}};function mmapAlloc(size){for(var alignedSize=alignMemory(size,65536),ptr=_malloc(alignedSize);size<alignedSize;)HEAP8[ptr+size++]=0;return ptr}var MEMFS={ops_table:null,mount:function(mount){return MEMFS.createNode(null,"/",16895,0)},createNode:function(parent,name,mode,dev){if(FS.isBlkdev(mode)||FS.isFIFO(mode))throw new FS.ErrnoError(63);MEMFS.ops_table||(MEMFS.ops_table={dir:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,lookup:MEMFS.node_ops.lookup,mknod:MEMFS.node_ops.mknod,rename:MEMFS.node_ops.rename,unlink:MEMFS.node_ops.unlink,rmdir:MEMFS.node_ops.rmdir,readdir:MEMFS.node_ops.readdir,symlink:MEMFS.node_ops.symlink},stream:{llseek:MEMFS.stream_ops.llseek}},file:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:{llseek:MEMFS.stream_ops.llseek,read:MEMFS.stream_ops.read,write:MEMFS.stream_ops.write,allocate:MEMFS.stream_ops.allocate,mmap:MEMFS.stream_ops.mmap,msync:MEMFS.stream_ops.msync}},link:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr,readlink:MEMFS.node_ops.readlink},stream:{}},chrdev:{node:{getattr:MEMFS.node_ops.getattr,setattr:MEMFS.node_ops.setattr},stream:FS.chrdev_stream_ops}});var node=FS.createNode(parent,name,mode,dev);return FS.isDir(node.mode)?(node.node_ops=MEMFS.ops_table.dir.node,node.stream_ops=MEMFS.ops_table.dir.stream,node.contents={}):FS.isFile(node.mode)?(node.node_ops=MEMFS.ops_table.file.node,node.stream_ops=MEMFS.ops_table.file.stream,node.usedBytes=0,node.contents=null):FS.isLink(node.mode)?(node.node_ops=MEMFS.ops_table.link.node,node.stream_ops=MEMFS.ops_table.link.stream):FS.isChrdev(node.mode)&&(node.node_ops=MEMFS.ops_table.chrdev.node,node.stream_ops=MEMFS.ops_table.chrdev.stream),node.timestamp=Date.now(),parent&&(parent.contents[name]=node,parent.timestamp=node.timestamp),node},getFileDataAsTypedArray:function(node){return node.contents?node.contents.subarray?node.contents.subarray(0,node.usedBytes):new Uint8Array(node.contents):new Uint8Array(0)},expandFileStorage:function(node,newCapacity){var prevCapacity=node.contents?node.contents.length:0;if(!(prevCapacity>=newCapacity)){newCapacity=Math.max(newCapacity,prevCapacity*(prevCapacity<1048576?2:1.125)>>>0),0!=prevCapacity&&(newCapacity=Math.max(newCapacity,256));var oldContents=node.contents;node.contents=new Uint8Array(newCapacity),node.usedBytes>0&&node.contents.set(oldContents.subarray(0,node.usedBytes),0)}},resizeFileStorage:function(node,newSize){if(node.usedBytes!=newSize)if(0==newSize)node.contents=null,node.usedBytes=0;else{var oldContents=node.contents;node.contents=new Uint8Array(newSize),oldContents&&node.contents.set(oldContents.subarray(0,Math.min(newSize,node.usedBytes))),node.usedBytes=newSize}},node_ops:{getattr:function(node){var attr={};return attr.dev=FS.isChrdev(node.mode)?node.id:1,attr.ino=node.id,attr.mode=node.mode,attr.nlink=1,attr.uid=0,attr.gid=0,attr.rdev=node.rdev,FS.isDir(node.mode)?attr.size=4096:FS.isFile(node.mode)?attr.size=node.usedBytes:FS.isLink(node.mode)?attr.size=node.link.length:attr.size=0,attr.atime=new Date(node.timestamp),attr.mtime=new Date(node.timestamp),attr.ctime=new Date(node.timestamp),attr.blksize=4096,attr.blocks=Math.ceil(attr.size/attr.blksize),attr},setattr:function(node,attr){void 0!==attr.mode&&(node.mode=attr.mode),void 0!==attr.timestamp&&(node.timestamp=attr.timestamp),void 0!==attr.size&&MEMFS.resizeFileStorage(node,attr.size)},lookup:function(parent,name){throw FS.genericErrors[44]},mknod:function(parent,name,mode,dev){return MEMFS.createNode(parent,name,mode,dev)},rename:function(old_node,new_dir,new_name){if(FS.isDir(old_node.mode)){var new_node;try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(new_node)for(var i in new_node.contents)throw new FS.ErrnoError(55)}delete old_node.parent.contents[old_node.name],old_node.parent.timestamp=Date.now(),old_node.name=new_name,new_dir.contents[new_name]=old_node,new_dir.timestamp=old_node.parent.timestamp,old_node.parent=new_dir},unlink:function(parent,name){delete parent.contents[name],parent.timestamp=Date.now()},rmdir:function(parent,name){var node=FS.lookupNode(parent,name);for(var i in node.contents)throw new FS.ErrnoError(55);delete parent.contents[name],parent.timestamp=Date.now()},readdir:function(node){var entries=[".",".."];for(var key in node.contents)node.contents.hasOwnProperty(key)&&entries.push(key);return entries},symlink:function(parent,newname,oldpath){var node=MEMFS.createNode(parent,newname,41471,0);return node.link=oldpath,node},readlink:function(node){if(!FS.isLink(node.mode))throw new FS.ErrnoError(28);return node.link}},stream_ops:{read:function(stream,buffer,offset,length,position){var contents=stream.node.contents;if(position>=stream.node.usedBytes)return 0;var size=Math.min(stream.node.usedBytes-position,length);if(size>8&&contents.subarray)buffer.set(contents.subarray(position,position+size),offset);else for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i];return size},write:function(stream,buffer,offset,length,position,canOwn){if(buffer.buffer===HEAP8.buffer&&(canOwn=!1),!length)return 0;var node=stream.node;if(node.timestamp=Date.now(),buffer.subarray&&(!node.contents||node.contents.subarray)){if(canOwn)return node.contents=buffer.subarray(offset,offset+length),node.usedBytes=length,length;if(0===node.usedBytes&&0===position)return node.contents=buffer.slice(offset,offset+length),node.usedBytes=length,length;if(position+length<=node.usedBytes)return node.contents.set(buffer.subarray(offset,offset+length),position),length}if(MEMFS.expandFileStorage(node,position+length),node.contents.subarray&&buffer.subarray)node.contents.set(buffer.subarray(offset,offset+length),position);else for(var i=0;i<length;i++)node.contents[position+i]=buffer[offset+i];return node.usedBytes=Math.max(node.usedBytes,position+length),length},llseek:function(stream,offset,whence){var position=offset;if(1===whence?position+=stream.position:2===whence&&FS.isFile(stream.node.mode)&&(position+=stream.node.usedBytes),position<0)throw new FS.ErrnoError(28);return position},allocate:function(stream,offset,length){MEMFS.expandFileStorage(stream.node,offset+length),stream.node.usedBytes=Math.max(stream.node.usedBytes,offset+length)},mmap:function(stream,address,length,position,prot,flags){if(0!==address)throw new FS.ErrnoError(28);if(!FS.isFile(stream.node.mode))throw new FS.ErrnoError(43);var ptr,allocated,contents=stream.node.contents;if(2&flags||contents.buffer!==buffer){if((position>0||position+length<contents.length)&&(contents=contents.subarray?contents.subarray(position,position+length):Array.prototype.slice.call(contents,position,position+length)),allocated=!0,!(ptr=mmapAlloc(length)))throw new FS.ErrnoError(48);HEAP8.set(contents,ptr)}else allocated=!1,ptr=contents.byteOffset;return{ptr:ptr,allocated:allocated}},msync:function(stream,buffer,offset,length,mmapFlags){if(!FS.isFile(stream.node.mode))throw new FS.ErrnoError(43);if(2&mmapFlags)return 0;MEMFS.stream_ops.write(stream,buffer,0,length,offset,!1);return 0}}},IDBFS={dbs:{},indexedDB:function(){if("undefined"!=typeof indexedDB)return indexedDB;var ret=null;return"object"==typeof window&&(ret=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),assert(ret,"IDBFS used, but indexedDB not supported"),ret},DB_VERSION:21,DB_STORE_NAME:"FILE_DATA",mount:function(mount){return MEMFS.mount.apply(null,arguments)},syncfs:function(mount,populate,callback){IDBFS.getLocalSet(mount,(function(err,local){if(err)return callback(err);IDBFS.getRemoteSet(mount,(function(err,remote){if(err)return callback(err);var src=populate?remote:local,dst=populate?local:remote;IDBFS.reconcile(src,dst,callback)}))}))},getDB:function(name,callback){var req,db=IDBFS.dbs[name];if(db)return callback(null,db);try{req=IDBFS.indexedDB().open(name,IDBFS.DB_VERSION)}catch(e){return callback(e)}if(!req)return callback("Unable to connect to IndexedDB");req.onupgradeneeded=function(e){var fileStore,db=e.target.result,transaction=e.target.transaction;(fileStore=db.objectStoreNames.contains(IDBFS.DB_STORE_NAME)?transaction.objectStore(IDBFS.DB_STORE_NAME):db.createObjectStore(IDBFS.DB_STORE_NAME)).indexNames.contains("timestamp")||fileStore.createIndex("timestamp","timestamp",{unique:!1})},req.onsuccess=function(){db=req.result,IDBFS.dbs[name]=db,callback(null,db)},req.onerror=function(e){callback(this.error),e.preventDefault()}},getLocalSet:function(mount,callback){var entries={};function isRealDir(p){return"."!==p&&".."!==p}function toAbsolute(root){return function(p){return PATH.join2(root,p)}}for(var check=FS.readdir(mount.mountpoint).filter(isRealDir).map(toAbsolute(mount.mountpoint));check.length;){var stat,path=check.pop();try{stat=FS.stat(path)}catch(e){return callback(e)}FS.isDir(stat.mode)&&check.push.apply(check,FS.readdir(path).filter(isRealDir).map(toAbsolute(path))),entries[path]={timestamp:stat.mtime}}return callback(null,{type:"local",entries:entries})},getRemoteSet:function(mount,callback){var entries={};IDBFS.getDB(mount.mountpoint,(function(err,db){if(err)return callback(err);try{var transaction=db.transaction([IDBFS.DB_STORE_NAME],"readonly");transaction.onerror=function(e){callback(this.error),e.preventDefault()},transaction.objectStore(IDBFS.DB_STORE_NAME).index("timestamp").openKeyCursor().onsuccess=function(event){var cursor=event.target.result;if(!cursor)return callback(null,{type:"remote",db:db,entries:entries});entries[cursor.primaryKey]={timestamp:cursor.key},cursor.continue()}}catch(e){return callback(e)}}))},loadLocalEntry:function(path,callback){var stat,node;try{node=FS.lookupPath(path).node,stat=FS.stat(path)}catch(e){return callback(e)}return FS.isDir(stat.mode)?callback(null,{timestamp:stat.mtime,mode:stat.mode}):FS.isFile(stat.mode)?(node.contents=MEMFS.getFileDataAsTypedArray(node),callback(null,{timestamp:stat.mtime,mode:stat.mode,contents:node.contents})):callback(new Error("node type not supported"))},storeLocalEntry:function(path,entry,callback){try{if(FS.isDir(entry.mode))FS.mkdirTree(path,entry.mode);else{if(!FS.isFile(entry.mode))return callback(new Error("node type not supported"));FS.writeFile(path,entry.contents,{canOwn:!0})}FS.chmod(path,entry.mode),FS.utime(path,entry.timestamp,entry.timestamp)}catch(e){return callback(e)}callback(null)},removeLocalEntry:function(path,callback){try{FS.lookupPath(path);var stat=FS.stat(path);FS.isDir(stat.mode)?FS.rmdir(path):FS.isFile(stat.mode)&&FS.unlink(path)}catch(e){return callback(e)}callback(null)},loadRemoteEntry:function(store,path,callback){var req=store.get(path);req.onsuccess=function(event){callback(null,event.target.result)},req.onerror=function(e){callback(this.error),e.preventDefault()}},storeRemoteEntry:function(store,path,entry,callback){try{var req=store.put(entry,path)}catch(e){return void callback(e)}req.onsuccess=function(){callback(null)},req.onerror=function(e){callback(this.error),e.preventDefault()}},removeRemoteEntry:function(store,path,callback){var req=store.delete(path);req.onsuccess=function(){callback(null)},req.onerror=function(e){callback(this.error),e.preventDefault()}},reconcile:function(src,dst,callback){var total=0,create=[];Object.keys(src.entries).forEach((function(key){var e=src.entries[key],e2=dst.entries[key];e2&&e.timestamp.getTime()==e2.timestamp.getTime()||(create.push(key),total++)}));var remove=[];if(Object.keys(dst.entries).forEach((function(key){src.entries[key]||(remove.push(key),total++)})),!total)return callback(null);var errored=!1,transaction=("remote"===src.type?src.db:dst.db).transaction([IDBFS.DB_STORE_NAME],"readwrite"),store=transaction.objectStore(IDBFS.DB_STORE_NAME);function done(err){if(err&&!errored)return errored=!0,callback(err)}transaction.onerror=function(e){done(this.error),e.preventDefault()},transaction.oncomplete=function(e){errored||callback(null)},create.sort().forEach((function(path){"local"===dst.type?IDBFS.loadRemoteEntry(store,path,(function(err,entry){if(err)return done(err);IDBFS.storeLocalEntry(path,entry,done)})):IDBFS.loadLocalEntry(path,(function(err,entry){if(err)return done(err);IDBFS.storeRemoteEntry(store,path,entry,done)}))})),remove.sort().reverse().forEach((function(path){"local"===dst.type?IDBFS.removeLocalEntry(path,done):IDBFS.removeRemoteEntry(store,path,done)}))}},FS={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,trackingDelegate:{},tracking:{openFlags:{READ:1,WRITE:2}},ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(path,opts){if(opts=opts||{},!(path=PATH_FS.resolve(FS.cwd(),path)))return{path:"",node:null};var defaults={follow_mount:!0,recurse_count:0};for(var key in defaults)void 0===opts[key]&&(opts[key]=defaults[key]);if(opts.recurse_count>8)throw new FS.ErrnoError(32);for(var parts=PATH.normalizeArray(path.split("/").filter((function(p){return!!p})),!1),current=FS.root,current_path="/",i=0;i<parts.length;i++){var islast=i===parts.length-1;if(islast&&opts.parent)break;if(current=FS.lookupNode(current,parts[i]),current_path=PATH.join2(current_path,parts[i]),FS.isMountpoint(current)&&(!islast||islast&&opts.follow_mount)&&(current=current.mounted.root),!islast||opts.follow)for(var count=0;FS.isLink(current.mode);){var link=FS.readlink(current_path);if(current_path=PATH_FS.resolve(PATH.dirname(current_path),link),current=FS.lookupPath(current_path,{recurse_count:opts.recurse_count}).node,count++>40)throw new FS.ErrnoError(32)}}return{path:current_path,node:current}},getPath:function(node){for(var path;;){if(FS.isRoot(node)){var mount=node.mount.mountpoint;return path?"/"!==mount[mount.length-1]?mount+"/"+path:mount+path:mount}path=path?node.name+"/"+path:node.name,node=node.parent}},hashName:function(parentid,name){for(var hash=0,i=0;i<name.length;i++)hash=(hash<<5)-hash+name.charCodeAt(i)|0;return(parentid+hash>>>0)%FS.nameTable.length},hashAddNode:function(node){var hash=FS.hashName(node.parent.id,node.name);node.name_next=FS.nameTable[hash],FS.nameTable[hash]=node},hashRemoveNode:function(node){var hash=FS.hashName(node.parent.id,node.name);if(FS.nameTable[hash]===node)FS.nameTable[hash]=node.name_next;else for(var current=FS.nameTable[hash];current;){if(current.name_next===node){current.name_next=node.name_next;break}current=current.name_next}},lookupNode:function(parent,name){var errCode=FS.mayLookup(parent);if(errCode)throw new FS.ErrnoError(errCode,parent);for(var hash=FS.hashName(parent.id,name),node=FS.nameTable[hash];node;node=node.name_next){var nodeName=node.name;if(node.parent.id===parent.id&&nodeName===name)return node}return FS.lookup(parent,name)},createNode:function(parent,name,mode,rdev){var node=new FS.FSNode(parent,name,mode,rdev);return FS.hashAddNode(node),node},destroyNode:function(node){FS.hashRemoveNode(node)},isRoot:function(node){return node===node.parent},isMountpoint:function(node){return!!node.mounted},isFile:function(mode){return 32768==(61440&mode)},isDir:function(mode){return 16384==(61440&mode)},isLink:function(mode){return 40960==(61440&mode)},isChrdev:function(mode){return 8192==(61440&mode)},isBlkdev:function(mode){return 24576==(61440&mode)},isFIFO:function(mode){return 4096==(61440&mode)},isSocket:function(mode){return!(49152&~mode)},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(str){var flags=FS.flagModes[str];if(void 0===flags)throw new Error("Unknown file open mode: "+str);return flags},flagsToPermissionString:function(flag){var perms=["r","w","rw"][3&flag];return 512&flag&&(perms+="w"),perms},nodePermissions:function(node,perms){return FS.ignorePermissions||(!perms.includes("r")||292&node.mode)&&(!perms.includes("w")||146&node.mode)&&(!perms.includes("x")||73&node.mode)?0:2},mayLookup:function(dir){var errCode=FS.nodePermissions(dir,"x");return errCode||(dir.node_ops.lookup?0:2)},mayCreate:function(dir,name){try{FS.lookupNode(dir,name);return 20}catch(e){}return FS.nodePermissions(dir,"wx")},mayDelete:function(dir,name,isdir){var node;try{node=FS.lookupNode(dir,name)}catch(e){return e.errno}var errCode=FS.nodePermissions(dir,"wx");if(errCode)return errCode;if(isdir){if(!FS.isDir(node.mode))return 54;if(FS.isRoot(node)||FS.getPath(node)===FS.cwd())return 10}else if(FS.isDir(node.mode))return 31;return 0},mayOpen:function(node,flags){return node?FS.isLink(node.mode)?32:FS.isDir(node.mode)&&("r"!==FS.flagsToPermissionString(flags)||512&flags)?31:FS.nodePermissions(node,FS.flagsToPermissionString(flags)):44},MAX_OPEN_FDS:4096,nextfd:function(fd_start,fd_end){fd_start=fd_start||0,fd_end=fd_end||FS.MAX_OPEN_FDS;for(var fd=fd_start;fd<=fd_end;fd++)if(!FS.streams[fd])return fd;throw new FS.ErrnoError(33)},getStream:function(fd){return FS.streams[fd]},createStream:function(stream,fd_start,fd_end){FS.FSStream||(FS.FSStream=function(){},FS.FSStream.prototype={object:{get:function(){return this.node},set:function(val){this.node=val}},isRead:{get:function(){return 1!=(2097155&this.flags)}},isWrite:{get:function(){return!!(2097155&this.flags)}},isAppend:{get:function(){return 1024&this.flags}}});var newStream=new FS.FSStream;for(var p in stream)newStream[p]=stream[p];stream=newStream;var fd=FS.nextfd(fd_start,fd_end);return stream.fd=fd,FS.streams[fd]=stream,stream},closeStream:function(fd){FS.streams[fd]=null},chrdev_stream_ops:{open:function(stream){var device=FS.getDevice(stream.node.rdev);stream.stream_ops=device.stream_ops,stream.stream_ops.open&&stream.stream_ops.open(stream)},llseek:function(){throw new FS.ErrnoError(70)}},major:function(dev){return dev>>8},minor:function(dev){return 255&dev},makedev:function(ma,mi){return ma<<8|mi},registerDevice:function(dev,ops){FS.devices[dev]={stream_ops:ops}},getDevice:function(dev){return FS.devices[dev]},getMounts:function(mount){for(var mounts=[],check=[mount];check.length;){var m=check.pop();mounts.push(m),check.push.apply(check,m.mounts)}return mounts},syncfs:function(populate,callback){"function"==typeof populate&&(callback=populate,populate=!1),FS.syncFSRequests++,FS.syncFSRequests>1&&err("warning: "+FS.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var mounts=FS.getMounts(FS.root.mount),completed=0;function doCallback(errCode){return FS.syncFSRequests--,callback(errCode)}function done(errCode){if(errCode)return done.errored?void 0:(done.errored=!0,doCallback(errCode));++completed>=mounts.length&&doCallback(null)}mounts.forEach((function(mount){if(!mount.type.syncfs)return done(null);mount.type.syncfs(mount,populate,done)}))},mount:function(type,opts,mountpoint){var node,root="/"===mountpoint,pseudo=!mountpoint;if(root&&FS.root)throw new FS.ErrnoError(10);if(!root&&!pseudo){var lookup=FS.lookupPath(mountpoint,{follow_mount:!1});if(mountpoint=lookup.path,node=lookup.node,FS.isMountpoint(node))throw new FS.ErrnoError(10);if(!FS.isDir(node.mode))throw new FS.ErrnoError(54)}var mount={type:type,opts:opts,mountpoint:mountpoint,mounts:[]},mountRoot=type.mount(mount);return mountRoot.mount=mount,mount.root=mountRoot,root?FS.root=mountRoot:node&&(node.mounted=mount,node.mount&&node.mount.mounts.push(mount)),mountRoot},unmount:function(mountpoint){var lookup=FS.lookupPath(mountpoint,{follow_mount:!1});if(!FS.isMountpoint(lookup.node))throw new FS.ErrnoError(28);var node=lookup.node,mount=node.mounted,mounts=FS.getMounts(mount);Object.keys(FS.nameTable).forEach((function(hash){for(var current=FS.nameTable[hash];current;){var next=current.name_next;mounts.includes(current.mount)&&FS.destroyNode(current),current=next}})),node.mounted=null;var idx=node.mount.mounts.indexOf(mount);node.mount.mounts.splice(idx,1)},lookup:function(parent,name){return parent.node_ops.lookup(parent,name)},mknod:function(path,mode,dev){var parent=FS.lookupPath(path,{parent:!0}).node,name=PATH.basename(path);if(!name||"."===name||".."===name)throw new FS.ErrnoError(28);var errCode=FS.mayCreate(parent,name);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.mknod)throw new FS.ErrnoError(63);return parent.node_ops.mknod(parent,name,mode,dev)},create:function(path,mode){return mode=void 0!==mode?mode:438,mode&=4095,mode|=32768,FS.mknod(path,mode,0)},mkdir:function(path,mode){return mode=void 0!==mode?mode:511,mode&=1023,mode|=16384,FS.mknod(path,mode,0)},mkdirTree:function(path,mode){for(var dirs=path.split("/"),d="",i=0;i<dirs.length;++i)if(dirs[i]){d+="/"+dirs[i];try{FS.mkdir(d,mode)}catch(e){if(20!=e.errno)throw e}}},mkdev:function(path,mode,dev){return void 0===dev&&(dev=mode,mode=438),mode|=8192,FS.mknod(path,mode,dev)},symlink:function(oldpath,newpath){if(!PATH_FS.resolve(oldpath))throw new FS.ErrnoError(44);var parent=FS.lookupPath(newpath,{parent:!0}).node;if(!parent)throw new FS.ErrnoError(44);var newname=PATH.basename(newpath),errCode=FS.mayCreate(parent,newname);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.symlink)throw new FS.ErrnoError(63);return parent.node_ops.symlink(parent,newname,oldpath)},rename:function(old_path,new_path){var old_dir,new_dir,old_dirname=PATH.dirname(old_path),new_dirname=PATH.dirname(new_path),old_name=PATH.basename(old_path),new_name=PATH.basename(new_path);if(old_dir=FS.lookupPath(old_path,{parent:!0}).node,new_dir=FS.lookupPath(new_path,{parent:!0}).node,!old_dir||!new_dir)throw new FS.ErrnoError(44);if(old_dir.mount!==new_dir.mount)throw new FS.ErrnoError(75);var new_node,old_node=FS.lookupNode(old_dir,old_name),relative=PATH_FS.relative(old_path,new_dirname);if("."!==relative.charAt(0))throw new FS.ErrnoError(28);if("."!==(relative=PATH_FS.relative(new_path,old_dirname)).charAt(0))throw new FS.ErrnoError(55);try{new_node=FS.lookupNode(new_dir,new_name)}catch(e){}if(old_node!==new_node){var isdir=FS.isDir(old_node.mode),errCode=FS.mayDelete(old_dir,old_name,isdir);if(errCode)throw new FS.ErrnoError(errCode);if(errCode=new_node?FS.mayDelete(new_dir,new_name,isdir):FS.mayCreate(new_dir,new_name))throw new FS.ErrnoError(errCode);if(!old_dir.node_ops.rename)throw new FS.ErrnoError(63);if(FS.isMountpoint(old_node)||new_node&&FS.isMountpoint(new_node))throw new FS.ErrnoError(10);if(new_dir!==old_dir&&(errCode=FS.nodePermissions(old_dir,"w")))throw new FS.ErrnoError(errCode);try{FS.trackingDelegate.willMovePath&&FS.trackingDelegate.willMovePath(old_path,new_path)}catch(e){err("FS.trackingDelegate['willMovePath']('"+old_path+"', '"+new_path+"') threw an exception: "+e.message)}FS.hashRemoveNode(old_node);try{old_dir.node_ops.rename(old_node,new_dir,new_name)}catch(e){throw e}finally{FS.hashAddNode(old_node)}try{FS.trackingDelegate.onMovePath&&FS.trackingDelegate.onMovePath(old_path,new_path)}catch(e){err("FS.trackingDelegate['onMovePath']('"+old_path+"', '"+new_path+"') threw an exception: "+e.message)}}},rmdir:function(path){var parent=FS.lookupPath(path,{parent:!0}).node,name=PATH.basename(path),node=FS.lookupNode(parent,name),errCode=FS.mayDelete(parent,name,!0);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.rmdir)throw new FS.ErrnoError(63);if(FS.isMountpoint(node))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(path)}catch(e){err("FS.trackingDelegate['willDeletePath']('"+path+"') threw an exception: "+e.message)}parent.node_ops.rmdir(parent,name),FS.destroyNode(node);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(path)}catch(e){err("FS.trackingDelegate['onDeletePath']('"+path+"') threw an exception: "+e.message)}},readdir:function(path){var node=FS.lookupPath(path,{follow:!0}).node;if(!node.node_ops.readdir)throw new FS.ErrnoError(54);return node.node_ops.readdir(node)},unlink:function(path){var parent=FS.lookupPath(path,{parent:!0}).node,name=PATH.basename(path),node=FS.lookupNode(parent,name),errCode=FS.mayDelete(parent,name,!1);if(errCode)throw new FS.ErrnoError(errCode);if(!parent.node_ops.unlink)throw new FS.ErrnoError(63);if(FS.isMountpoint(node))throw new FS.ErrnoError(10);try{FS.trackingDelegate.willDeletePath&&FS.trackingDelegate.willDeletePath(path)}catch(e){err("FS.trackingDelegate['willDeletePath']('"+path+"') threw an exception: "+e.message)}parent.node_ops.unlink(parent,name),FS.destroyNode(node);try{FS.trackingDelegate.onDeletePath&&FS.trackingDelegate.onDeletePath(path)}catch(e){err("FS.trackingDelegate['onDeletePath']('"+path+"') threw an exception: "+e.message)}},readlink:function(path){var link=FS.lookupPath(path).node;if(!link)throw new FS.ErrnoError(44);if(!link.node_ops.readlink)throw new FS.ErrnoError(28);return PATH_FS.resolve(FS.getPath(link.parent),link.node_ops.readlink(link))},stat:function(path,dontFollow){var node=FS.lookupPath(path,{follow:!dontFollow}).node;if(!node)throw new FS.ErrnoError(44);if(!node.node_ops.getattr)throw new FS.ErrnoError(63);return node.node_ops.getattr(node)},lstat:function(path){return FS.stat(path,!0)},chmod:function(path,mode,dontFollow){var node;"string"==typeof path?node=FS.lookupPath(path,{follow:!dontFollow}).node:node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);node.node_ops.setattr(node,{mode:4095&mode|-4096&node.mode,timestamp:Date.now()})},lchmod:function(path,mode){FS.chmod(path,mode,!0)},fchmod:function(fd,mode){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);FS.chmod(stream.node,mode)},chown:function(path,uid,gid,dontFollow){var node;"string"==typeof path?node=FS.lookupPath(path,{follow:!dontFollow}).node:node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);node.node_ops.setattr(node,{timestamp:Date.now()})},lchown:function(path,uid,gid){FS.chown(path,uid,gid,!0)},fchown:function(fd,uid,gid){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);FS.chown(stream.node,uid,gid)},truncate:function(path,len){if(len<0)throw new FS.ErrnoError(28);var node;"string"==typeof path?node=FS.lookupPath(path,{follow:!0}).node:node=path;if(!node.node_ops.setattr)throw new FS.ErrnoError(63);if(FS.isDir(node.mode))throw new FS.ErrnoError(31);if(!FS.isFile(node.mode))throw new FS.ErrnoError(28);var errCode=FS.nodePermissions(node,"w");if(errCode)throw new FS.ErrnoError(errCode);node.node_ops.setattr(node,{size:len,timestamp:Date.now()})},ftruncate:function(fd,len){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);if(!(2097155&stream.flags))throw new FS.ErrnoError(28);FS.truncate(stream.node,len)},utime:function(path,atime,mtime){var node=FS.lookupPath(path,{follow:!0}).node;node.node_ops.setattr(node,{timestamp:Math.max(atime,mtime)})},open:function(path,flags,mode,fd_start,fd_end){if(""===path)throw new FS.ErrnoError(44);var node;if(mode=void 0===mode?438:mode,mode=64&(flags="string"==typeof flags?FS.modeStringToFlags(flags):flags)?4095&mode|32768:0,"object"==typeof path)node=path;else{path=PATH.normalize(path);try{node=FS.lookupPath(path,{follow:!(131072&flags)}).node}catch(e){}}var created=!1;if(64&flags)if(node){if(128&flags)throw new FS.ErrnoError(20)}else node=FS.mknod(path,mode,0),created=!0;if(!node)throw new FS.ErrnoError(44);if(FS.isChrdev(node.mode)&&(flags&=-513),65536&flags&&!FS.isDir(node.mode))throw new FS.ErrnoError(54);if(!created){var errCode=FS.mayOpen(node,flags);if(errCode)throw new FS.ErrnoError(errCode)}512&flags&&FS.truncate(node,0),flags&=-131713;var stream=FS.createStream({node:node,path:FS.getPath(node),flags:flags,seekable:!0,position:0,stream_ops:node.stream_ops,ungotten:[],error:!1},fd_start,fd_end);stream.stream_ops.open&&stream.stream_ops.open(stream),!Module.logReadFiles||1&flags||(FS.readFiles||(FS.readFiles={}),path in FS.readFiles||(FS.readFiles[path]=1,err("FS.trackingDelegate error on read file: "+path)));try{if(FS.trackingDelegate.onOpenFile){var trackingFlags=0;1!=(2097155&flags)&&(trackingFlags|=FS.tracking.openFlags.READ),2097155&flags&&(trackingFlags|=FS.tracking.openFlags.WRITE),FS.trackingDelegate.onOpenFile(path,trackingFlags)}}catch(e){err("FS.trackingDelegate['onOpenFile']('"+path+"', flags) threw an exception: "+e.message)}return stream},close:function(stream){if(FS.isClosed(stream))throw new FS.ErrnoError(8);stream.getdents&&(stream.getdents=null);try{stream.stream_ops.close&&stream.stream_ops.close(stream)}catch(e){throw e}finally{FS.closeStream(stream.fd)}stream.fd=null},isClosed:function(stream){return null===stream.fd},llseek:function(stream,offset,whence){if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(!stream.seekable||!stream.stream_ops.llseek)throw new FS.ErrnoError(70);if(0!=whence&&1!=whence&&2!=whence)throw new FS.ErrnoError(28);return stream.position=stream.stream_ops.llseek(stream,offset,whence),stream.ungotten=[],stream.position},read:function(stream,buffer,offset,length,position){if(length<0||position<0)throw new FS.ErrnoError(28);if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(1==(2097155&stream.flags))throw new FS.ErrnoError(8);if(FS.isDir(stream.node.mode))throw new FS.ErrnoError(31);if(!stream.stream_ops.read)throw new FS.ErrnoError(28);var seeking=void 0!==position;if(seeking){if(!stream.seekable)throw new FS.ErrnoError(70)}else position=stream.position;var bytesRead=stream.stream_ops.read(stream,buffer,offset,length,position);return seeking||(stream.position+=bytesRead),bytesRead},write:function(stream,buffer,offset,length,position,canOwn){if(length<0||position<0)throw new FS.ErrnoError(28);if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(!(2097155&stream.flags))throw new FS.ErrnoError(8);if(FS.isDir(stream.node.mode))throw new FS.ErrnoError(31);if(!stream.stream_ops.write)throw new FS.ErrnoError(28);stream.seekable&&1024&stream.flags&&FS.llseek(stream,0,2);var seeking=void 0!==position;if(seeking){if(!stream.seekable)throw new FS.ErrnoError(70)}else position=stream.position;var bytesWritten=stream.stream_ops.write(stream,buffer,offset,length,position,canOwn);seeking||(stream.position+=bytesWritten);try{stream.path&&FS.trackingDelegate.onWriteToFile&&FS.trackingDelegate.onWriteToFile(stream.path)}catch(e){err("FS.trackingDelegate['onWriteToFile']('"+stream.path+"') threw an exception: "+e.message)}return bytesWritten},allocate:function(stream,offset,length){if(FS.isClosed(stream))throw new FS.ErrnoError(8);if(offset<0||length<=0)throw new FS.ErrnoError(28);if(!(2097155&stream.flags))throw new FS.ErrnoError(8);if(!FS.isFile(stream.node.mode)&&!FS.isDir(stream.node.mode))throw new FS.ErrnoError(43);if(!stream.stream_ops.allocate)throw new FS.ErrnoError(138);stream.stream_ops.allocate(stream,offset,length)},mmap:function(stream,address,length,position,prot,flags){if(2&prot&&!(2&flags)&&2!=(2097155&stream.flags))throw new FS.ErrnoError(2);if(1==(2097155&stream.flags))throw new FS.ErrnoError(2);if(!stream.stream_ops.mmap)throw new FS.ErrnoError(43);return stream.stream_ops.mmap(stream,address,length,position,prot,flags)},msync:function(stream,buffer,offset,length,mmapFlags){return stream&&stream.stream_ops.msync?stream.stream_ops.msync(stream,buffer,offset,length,mmapFlags):0},munmap:function(stream){return 0},ioctl:function(stream,cmd,arg){if(!stream.stream_ops.ioctl)throw new FS.ErrnoError(59);return stream.stream_ops.ioctl(stream,cmd,arg)},readFile:function(path,opts){if((opts=opts||{}).flags=opts.flags||0,opts.encoding=opts.encoding||"binary","utf8"!==opts.encoding&&"binary"!==opts.encoding)throw new Error('Invalid encoding type "'+opts.encoding+'"');var ret,stream=FS.open(path,opts.flags),length=FS.stat(path).size,buf=new Uint8Array(length);return FS.read(stream,buf,0,length,0),"utf8"===opts.encoding?ret=UTF8ArrayToString(buf,0):"binary"===opts.encoding&&(ret=buf),FS.close(stream),ret},writeFile:function(path,data,opts){(opts=opts||{}).flags=opts.flags||577;var stream=FS.open(path,opts.flags,opts.mode);if("string"==typeof data){var buf=new Uint8Array(lengthBytesUTF8(data)+1),actualNumBytes=stringToUTF8Array(data,buf,0,buf.length);FS.write(stream,buf,0,actualNumBytes,void 0,opts.canOwn)}else{if(!ArrayBuffer.isView(data))throw new Error("Unsupported data type");FS.write(stream,data,0,data.byteLength,void 0,opts.canOwn)}FS.close(stream)},cwd:function(){return FS.currentPath},chdir:function(path){var lookup=FS.lookupPath(path,{follow:!0});if(null===lookup.node)throw new FS.ErrnoError(44);if(!FS.isDir(lookup.node.mode))throw new FS.ErrnoError(54);var errCode=FS.nodePermissions(lookup.node,"x");if(errCode)throw new FS.ErrnoError(errCode);FS.currentPath=lookup.path},createDefaultDirectories:function(){FS.mkdir("/tmp"),FS.mkdir("/home"),FS.mkdir("/home/web_user")},createDefaultDevices:function(){FS.mkdir("/dev"),FS.registerDevice(FS.makedev(1,3),{read:function(){return 0},write:function(stream,buffer,offset,length,pos){return length}}),FS.mkdev("/dev/null",FS.makedev(1,3)),TTY.register(FS.makedev(5,0),TTY.default_tty_ops),TTY.register(FS.makedev(6,0),TTY.default_tty1_ops),FS.mkdev("/dev/tty",FS.makedev(5,0)),FS.mkdev("/dev/tty1",FS.makedev(6,0));var random_device=getRandomDevice();FS.createDevice("/dev","random",random_device),FS.createDevice("/dev","urandom",random_device),FS.mkdir("/dev/shm"),FS.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){FS.mkdir("/proc");var proc_self=FS.mkdir("/proc/self");FS.mkdir("/proc/self/fd"),FS.mount({mount:function(){var node=FS.createNode(proc_self,"fd",16895,73);return node.node_ops={lookup:function(parent,name){var fd=+name,stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);var ret={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return stream.path}}};return ret.parent=ret,ret}},node}},{},"/proc/self/fd")},createStandardStreams:function(){Module.stdin?FS.createDevice("/dev","stdin",Module.stdin):FS.symlink("/dev/tty","/dev/stdin"),Module.stdout?FS.createDevice("/dev","stdout",null,Module.stdout):FS.symlink("/dev/tty","/dev/stdout"),Module.stderr?FS.createDevice("/dev","stderr",null,Module.stderr):FS.symlink("/dev/tty1","/dev/stderr");FS.open("/dev/stdin",0),FS.open("/dev/stdout",1),FS.open("/dev/stderr",1)},ensureErrnoError:function(){FS.ErrnoError||(FS.ErrnoError=function(errno,node){this.node=node,this.setErrno=function(errno){this.errno=errno},this.setErrno(errno),this.message="FS error"},FS.ErrnoError.prototype=new Error,FS.ErrnoError.prototype.constructor=FS.ErrnoError,[44].forEach((function(code){FS.genericErrors[code]=new FS.ErrnoError(code),FS.genericErrors[code].stack="<generic error, no stack>"})))},staticInit:function(){FS.ensureErrnoError(),FS.nameTable=new Array(4096),FS.mount(MEMFS,{},"/"),FS.createDefaultDirectories(),FS.createDefaultDevices(),FS.createSpecialDirectories(),FS.filesystems={MEMFS:MEMFS,IDBFS:IDBFS}},init:function(input,output,error){FS.init.initialized=!0,FS.ensureErrnoError(),Module.stdin=input||Module.stdin,Module.stdout=output||Module.stdout,Module.stderr=error||Module.stderr,FS.createStandardStreams()},quit:function(){FS.init.initialized=!1;var fflush=Module._fflush;fflush&&fflush(0);for(var i=0;i<FS.streams.length;i++){var stream=FS.streams[i];stream&&FS.close(stream)}},getMode:function(canRead,canWrite){var mode=0;return canRead&&(mode|=365),canWrite&&(mode|=146),mode},findObject:function(path,dontResolveLastLink){var ret=FS.analyzePath(path,dontResolveLastLink);return ret.exists?ret.object:null},analyzePath:function(path,dontResolveLastLink){try{path=(lookup=FS.lookupPath(path,{follow:!dontResolveLastLink})).path}catch(e){}var ret={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var lookup=FS.lookupPath(path,{parent:!0});ret.parentExists=!0,ret.parentPath=lookup.path,ret.parentObject=lookup.node,ret.name=PATH.basename(path),lookup=FS.lookupPath(path,{follow:!dontResolveLastLink}),ret.exists=!0,ret.path=lookup.path,ret.object=lookup.node,ret.name=lookup.node.name,ret.isRoot="/"===lookup.path}catch(e){ret.error=e.errno}return ret},createPath:function(parent,path,canRead,canWrite){parent="string"==typeof parent?parent:FS.getPath(parent);for(var parts=path.split("/").reverse();parts.length;){var part=parts.pop();if(part){var current=PATH.join2(parent,part);try{FS.mkdir(current)}catch(e){}parent=current}}return current},createFile:function(parent,name,properties,canRead,canWrite){var path=PATH.join2("string"==typeof parent?parent:FS.getPath(parent),name),mode=FS.getMode(canRead,canWrite);return FS.create(path,mode)},createDataFile:function(parent,name,data,canRead,canWrite,canOwn){var path=name?PATH.join2("string"==typeof parent?parent:FS.getPath(parent),name):parent,mode=FS.getMode(canRead,canWrite),node=FS.create(path,mode);if(data){if("string"==typeof data){for(var arr=new Array(data.length),i=0,len=data.length;i<len;++i)arr[i]=data.charCodeAt(i);data=arr}FS.chmod(node,146|mode);var stream=FS.open(node,577);FS.write(stream,data,0,data.length,0,canOwn),FS.close(stream),FS.chmod(node,mode)}return node},createDevice:function(parent,name,input,output){var path=PATH.join2("string"==typeof parent?parent:FS.getPath(parent),name),mode=FS.getMode(!!input,!!output);FS.createDevice.major||(FS.createDevice.major=64);var dev=FS.makedev(FS.createDevice.major++,0);return FS.registerDevice(dev,{open:function(stream){stream.seekable=!1},close:function(stream){output&&output.buffer&&output.buffer.length&&output(10)},read:function(stream,buffer,offset,length,pos){for(var bytesRead=0,i=0;i<length;i++){var result;try{result=input()}catch(e){throw new FS.ErrnoError(29)}if(void 0===result&&0===bytesRead)throw new FS.ErrnoError(6);if(null==result)break;bytesRead++,buffer[offset+i]=result}return bytesRead&&(stream.node.timestamp=Date.now()),bytesRead},write:function(stream,buffer,offset,length,pos){for(var i=0;i<length;i++)try{output(buffer[offset+i])}catch(e){throw new FS.ErrnoError(29)}return length&&(stream.node.timestamp=Date.now()),i}}),FS.mkdev(path,mode,dev)},forceLoadFile:function(obj){if(obj.isDevice||obj.isFolder||obj.link||obj.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(!read_)throw new Error("Cannot load without read() or XMLHttpRequest.");try{obj.contents=intArrayFromString(read_(obj.url),!0),obj.usedBytes=obj.contents.length}catch(e){throw new FS.ErrnoError(29)}},createLazyFile:function(parent,name,url,canRead,canWrite){function LazyUint8Array(){this.lengthKnown=!1,this.chunks=[]}if(LazyUint8Array.prototype.get=function(idx){if(!(idx>this.length-1||idx<0)){var chunkOffset=idx%this.chunkSize,chunkNum=idx/this.chunkSize|0;return this.getter(chunkNum)[chunkOffset]}},LazyUint8Array.prototype.setDataGetter=function(getter){this.getter=getter},LazyUint8Array.prototype.cacheLength=function(){var xhr=new XMLHttpRequest;if(xhr.open("HEAD",url,!1),xhr.send(null),!(xhr.status>=200&&xhr.status<300||304===xhr.status))throw new Error("Couldn't load "+url+". Status: "+xhr.status);var header,datalength=Number(xhr.getResponseHeader("Content-length")),hasByteServing=(header=xhr.getResponseHeader("Accept-Ranges"))&&"bytes"===header,usesGzip=(header=xhr.getResponseHeader("Content-Encoding"))&&"gzip"===header,chunkSize=1048576;hasByteServing||(chunkSize=datalength);var lazyArray=this;lazyArray.setDataGetter((function(chunkNum){var start=chunkNum*chunkSize,end=(chunkNum+1)*chunkSize-1;if(end=Math.min(end,datalength-1),void 0===lazyArray.chunks[chunkNum]&&(lazyArray.chunks[chunkNum]=function(from,to){if(from>to)throw new Error("invalid range ("+from+", "+to+") or no bytes requested!");if(to>datalength-1)throw new Error("only "+datalength+" bytes available! programmer error!");var xhr=new XMLHttpRequest;if(xhr.open("GET",url,!1),datalength!==chunkSize&&xhr.setRequestHeader("Range","bytes="+from+"-"+to),"undefined"!=typeof Uint8Array&&(xhr.responseType="arraybuffer"),xhr.overrideMimeType&&xhr.overrideMimeType("text/plain; charset=x-user-defined"),xhr.send(null),!(xhr.status>=200&&xhr.status<300||304===xhr.status))throw new Error("Couldn't load "+url+". Status: "+xhr.status);return void 0!==xhr.response?new Uint8Array(xhr.response||[]):intArrayFromString(xhr.responseText||"",!0)}(start,end)),void 0===lazyArray.chunks[chunkNum])throw new Error("doXHR failed!");return lazyArray.chunks[chunkNum]})),!usesGzip&&datalength||(chunkSize=datalength=1,datalength=this.getter(0).length,chunkSize=datalength,out("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=datalength,this._chunkSize=chunkSize,this.lengthKnown=!0},"undefined"!=typeof XMLHttpRequest){if(!ENVIRONMENT_IS_WORKER)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var lazyArray=new LazyUint8Array;Object.defineProperties(lazyArray,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var properties={isDevice:!1,contents:lazyArray}}else properties={isDevice:!1,url:url};var node=FS.createFile(parent,name,properties,canRead,canWrite);properties.contents?node.contents=properties.contents:properties.url&&(node.contents=null,node.url=properties.url),Object.defineProperties(node,{usedBytes:{get:function(){return this.contents.length}}});var stream_ops={};return Object.keys(node.stream_ops).forEach((function(key){var fn=node.stream_ops[key];stream_ops[key]=function(){return FS.forceLoadFile(node),fn.apply(null,arguments)}})),stream_ops.read=function(stream,buffer,offset,length,position){FS.forceLoadFile(node);var contents=stream.node.contents;if(position>=contents.length)return 0;var size=Math.min(contents.length-position,length);if(contents.slice)for(var i=0;i<size;i++)buffer[offset+i]=contents[position+i];else for(i=0;i<size;i++)buffer[offset+i]=contents.get(position+i);return size},node.stream_ops=stream_ops,node},createPreloadedFile:function(parent,name,url,canRead,canWrite,onload,onerror,dontCreateFile,canOwn,preFinish){Browser.init();var fullname=name?PATH_FS.resolve(PATH.join2(parent,name)):parent,dep=getUniqueRunDependency("cp "+fullname);function processData(byteArray){function finish(byteArray){preFinish&&preFinish(),dontCreateFile||FS.createDataFile(parent,name,byteArray,canRead,canWrite,canOwn),onload&&onload(),removeRunDependency(dep)}var handled=!1;Module.preloadPlugins.forEach((function(plugin){handled||plugin.canHandle(fullname)&&(plugin.handle(byteArray,fullname,finish,(function(){onerror&&onerror(),removeRunDependency(dep)})),handled=!0)})),handled||finish(byteArray)}addRunDependency(dep),"string"==typeof url?Browser.asyncLoad(url,(function(byteArray){processData(byteArray)}),onerror):processData(url)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(paths,onload,onerror){onload=onload||function(){},onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=function(){out("creating db"),openRequest.result.createObjectStore(FS.DB_STORE_NAME)},openRequest.onsuccess=function(){var transaction=openRequest.result.transaction([FS.DB_STORE_NAME],"readwrite"),files=transaction.objectStore(FS.DB_STORE_NAME),ok=0,fail=0,total=paths.length;function finish(){0==fail?onload():onerror()}paths.forEach((function(path){var putRequest=files.put(FS.analyzePath(path).object.contents,path);putRequest.onsuccess=function(){++ok+fail==total&&finish()},putRequest.onerror=function(){fail++,ok+fail==total&&finish()}})),transaction.onerror=onerror},openRequest.onerror=onerror},loadFilesFromDB:function(paths,onload,onerror){onload=onload||function(){},onerror=onerror||function(){};var indexedDB=FS.indexedDB();try{var openRequest=indexedDB.open(FS.DB_NAME(),FS.DB_VERSION)}catch(e){return onerror(e)}openRequest.onupgradeneeded=onerror,openRequest.onsuccess=function(){var db=openRequest.result;try{var transaction=db.transaction([FS.DB_STORE_NAME],"readonly")}catch(e){return void onerror(e)}var files=transaction.objectStore(FS.DB_STORE_NAME),ok=0,fail=0,total=paths.length;function finish(){0==fail?onload():onerror()}paths.forEach((function(path){var getRequest=files.get(path);getRequest.onsuccess=function(){FS.analyzePath(path).exists&&FS.unlink(path),FS.createDataFile(PATH.dirname(path),PATH.basename(path),getRequest.result,!0,!0,!0),++ok+fail==total&&finish()},getRequest.onerror=function(){fail++,ok+fail==total&&finish()}})),transaction.onerror=onerror},openRequest.onerror=onerror}},SYSCALLS={mappings:{},DEFAULT_POLLMASK:5,umask:511,calculateAt:function(dirfd,path,allowEmpty){if("/"===path[0])return path;var dir;if(-100===dirfd)dir=FS.cwd();else{var dirstream=FS.getStream(dirfd);if(!dirstream)throw new FS.ErrnoError(8);dir=dirstream.path}if(0==path.length){if(!allowEmpty)throw new FS.ErrnoError(44);return dir}return PATH.join2(dir,path)},doStat:function(func,path,buf){try{var stat=func(path)}catch(e){if(e&&e.node&&PATH.normalize(path)!==PATH.normalize(FS.getPath(e.node)))return-54;throw e}return HEAP32[buf>>2]=stat.dev,HEAP32[buf+4>>2]=0,HEAP32[buf+8>>2]=stat.ino,HEAP32[buf+12>>2]=stat.mode,HEAP32[buf+16>>2]=stat.nlink,HEAP32[buf+20>>2]=stat.uid,HEAP32[buf+24>>2]=stat.gid,HEAP32[buf+28>>2]=stat.rdev,HEAP32[buf+32>>2]=0,tempI64=[stat.size>>>0,(tempDouble=stat.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+40>>2]=tempI64[0],HEAP32[buf+44>>2]=tempI64[1],HEAP32[buf+48>>2]=4096,HEAP32[buf+52>>2]=stat.blocks,HEAP32[buf+56>>2]=stat.atime.getTime()/1e3|0,HEAP32[buf+60>>2]=0,HEAP32[buf+64>>2]=stat.mtime.getTime()/1e3|0,HEAP32[buf+68>>2]=0,HEAP32[buf+72>>2]=stat.ctime.getTime()/1e3|0,HEAP32[buf+76>>2]=0,tempI64=[stat.ino>>>0,(tempDouble=stat.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[buf+80>>2]=tempI64[0],HEAP32[buf+84>>2]=tempI64[1],0},doMsync:function(addr,stream,len,flags,offset){var buffer=HEAPU8.slice(addr,addr+len);FS.msync(stream,buffer,offset,len,flags)},doMkdir:function(path,mode){return"/"===(path=PATH.normalize(path))[path.length-1]&&(path=path.substr(0,path.length-1)),FS.mkdir(path,mode,0),0},doMknod:function(path,mode,dev){switch(61440&mode){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return FS.mknod(path,mode,dev),0},doReadlink:function(path,buf,bufsize){if(bufsize<=0)return-28;var ret=FS.readlink(path),len=Math.min(bufsize,lengthBytesUTF8(ret)),endChar=HEAP8[buf+len];return stringToUTF8(ret,buf,bufsize+1),HEAP8[buf+len]=endChar,len},doAccess:function(path,amode){if(-8&amode)return-28;var node;if(!(node=FS.lookupPath(path,{follow:!0}).node))return-44;var perms="";return 4&amode&&(perms+="r"),2&amode&&(perms+="w"),1&amode&&(perms+="x"),perms&&FS.nodePermissions(node,perms)?-2:0},doDup:function(path,flags,suggestFD){var suggest=FS.getStream(suggestFD);return suggest&&FS.close(suggest),FS.open(path,flags,0,suggestFD,suggestFD).fd},doReadv:function(stream,iov,iovcnt,offset){for(var ret=0,i=0;i<iovcnt;i++){var ptr=HEAP32[iov+8*i>>2],len=HEAP32[iov+(8*i+4)>>2],curr=FS.read(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;if(ret+=curr,curr<len)break}return ret},doWritev:function(stream,iov,iovcnt,offset){for(var ret=0,i=0;i<iovcnt;i++){var ptr=HEAP32[iov+8*i>>2],len=HEAP32[iov+(8*i+4)>>2],curr=FS.write(stream,HEAP8,ptr,len,offset);if(curr<0)return-1;ret+=curr}return ret},varargs:void 0,get:function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},getStr:function(ptr){return UTF8ToString(ptr)},getStreamFromFD:function(fd){var stream=FS.getStream(fd);if(!stream)throw new FS.ErrnoError(8);return stream},get64:function(low,high){return low}};function ___sys_chdir(path){try{return path=SYSCALLS.getStr(path),FS.chdir(path),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function setErrNo(value){return HEAP32[___errno_location()>>2]=value,value}function ___sys_fcntl64(fd,cmd,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(cmd){case 0:return(arg=SYSCALLS.get())<0?-28:FS.open(stream.path,stream.flags,0,arg).fd;case 1:case 2:case 13:case 14:return 0;case 3:return stream.flags;case 4:var arg=SYSCALLS.get();return stream.flags|=arg,0;case 12:arg=SYSCALLS.get();return HEAP16[arg+0>>1]=2,0;case 16:case 8:default:return-28;case 9:return setErrNo(28),-1}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_ioctl(fd,op,varargs){SYSCALLS.varargs=varargs;try{var stream=SYSCALLS.getStreamFromFD(fd);switch(op){case 21509:case 21505:case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:case 21523:case 21524:return stream.tty?0:-59;case 21519:if(!stream.tty)return-59;var argp=SYSCALLS.get();return HEAP32[argp>>2]=0,0;case 21520:return stream.tty?-28:-59;case 21531:argp=SYSCALLS.get();return FS.ioctl(stream,op,argp);default:abort("bad ioctl syscall "+op)}}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_mkdir(path,mode){try{return path=SYSCALLS.getStr(path),SYSCALLS.doMkdir(path,mode)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function ___sys_open(path,flags,varargs){SYSCALLS.varargs=varargs;try{var pathname=SYSCALLS.getStr(path),mode=varargs?SYSCALLS.get():0;return FS.open(pathname,flags,mode).fd}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),-e.errno}}function __embind_register_bigint(primitiveType,name,size,minRange,maxRange){}function getShiftFromSize(size){switch(size){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+size)}}function embind_init_charCodes(){for(var codes=new Array(256),i=0;i<256;++i)codes[i]=String.fromCharCode(i);embind_charCodes=codes}var embind_charCodes=void 0;function readLatin1String(ptr){for(var ret="",c=ptr;HEAPU8[c];)ret+=embind_charCodes[HEAPU8[c++]];return ret}var awaitingDependencies={},registeredTypes={},typeDependencies={},char_0=48,char_9=57;function makeLegalFunctionName(name){if(void 0===name)return"_unknown";var f=(name=name.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return f>=char_0&&f<=char_9?"_"+name:name}function createNamedFunction(name,body){return name=makeLegalFunctionName(name),new Function("body","return function "+name+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(body)}function extendError(baseErrorType,errorName){var errorClass=createNamedFunction(errorName,(function(message){this.name=errorName,this.message=message;var stack=new Error(message).stack;void 0!==stack&&(this.stack=this.toString()+"\n"+stack.replace(/^Error(:[^\n]*)?\n/,""))}));return errorClass.prototype=Object.create(baseErrorType.prototype),errorClass.prototype.constructor=errorClass,errorClass.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},errorClass}var BindingError=void 0;function throwBindingError(message){throw new BindingError(message)}var InternalError=void 0;function registerType(rawType,registeredInstance,options){if(options=options||{},!("argPackAdvance"in registeredInstance))throw new TypeError("registerType registeredInstance requires argPackAdvance");var name=registeredInstance.name;if(rawType||throwBindingError('type "'+name+'" must have a positive integer typeid pointer'),registeredTypes.hasOwnProperty(rawType)){if(options.ignoreDuplicateRegistrations)return;throwBindingError("Cannot register type '"+name+"' twice")}if(registeredTypes[rawType]=registeredInstance,delete typeDependencies[rawType],awaitingDependencies.hasOwnProperty(rawType)){var callbacks=awaitingDependencies[rawType];delete awaitingDependencies[rawType],callbacks.forEach((function(cb){cb()}))}}function __embind_register_bool(rawType,name,size,trueValue,falseValue){var shift=getShiftFromSize(size);registerType(rawType,{name:name=readLatin1String(name),fromWireType:function(wt){return!!wt},toWireType:function(destructors,o){return o?trueValue:falseValue},argPackAdvance:8,readValueFromPointer:function(pointer){var heap;if(1===size)heap=HEAP8;else if(2===size)heap=HEAP16;else{if(4!==size)throw new TypeError("Unknown boolean type size: "+name);heap=HEAP32}return this.fromWireType(heap[pointer>>shift])},destructorFunction:null})}var _emscripten_get_now,emval_free_list=[],emval_handle_array=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function __emval_decref(handle){handle>4&&0==--emval_handle_array[handle].refcount&&(emval_handle_array[handle]=void 0,emval_free_list.push(handle))}function count_emval_handles(){for(var count=0,i=5;i<emval_handle_array.length;++i)void 0!==emval_handle_array[i]&&++count;return count}function get_first_emval(){for(var i=5;i<emval_handle_array.length;++i)if(void 0!==emval_handle_array[i])return emval_handle_array[i];return null}function init_emval(){Module.count_emval_handles=count_emval_handles,Module.get_first_emval=get_first_emval}function __emval_register(value){switch(value){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var handle=emval_free_list.length?emval_free_list.pop():emval_handle_array.length;return emval_handle_array[handle]={refcount:1,value:value},handle}}function simpleReadValueFromPointer(pointer){return this.fromWireType(HEAPU32[pointer>>2])}function __embind_register_emval(rawType,name){registerType(rawType,{name:name=readLatin1String(name),fromWireType:function(handle){var rv=emval_handle_array[handle].value;return __emval_decref(handle),rv},toWireType:function(destructors,value){return __emval_register(value)},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:null})}function _embind_repr(v){if(null===v)return"null";var t=typeof v;return"object"===t||"array"===t||"function"===t?v.toString():""+v}function floatReadValueFromPointer(name,shift){switch(shift){case 2:return function(pointer){return this.fromWireType(HEAPF32[pointer>>2])};case 3:return function(pointer){return this.fromWireType(HEAPF64[pointer>>3])};default:throw new TypeError("Unknown float type: "+name)}}function __embind_register_float(rawType,name,size){var shift=getShiftFromSize(size);registerType(rawType,{name:name=readLatin1String(name),fromWireType:function(value){return value},toWireType:function(destructors,value){if("number"!=typeof value&&"boolean"!=typeof value)throw new TypeError('Cannot convert "'+_embind_repr(value)+'" to '+this.name);return value},argPackAdvance:8,readValueFromPointer:floatReadValueFromPointer(name,shift),destructorFunction:null})}function integerReadValueFromPointer(name,shift,signed){switch(shift){case 0:return signed?function(pointer){return HEAP8[pointer]}:function(pointer){return HEAPU8[pointer]};case 1:return signed?function(pointer){return HEAP16[pointer>>1]}:function(pointer){return HEAPU16[pointer>>1]};case 2:return signed?function(pointer){return HEAP32[pointer>>2]}:function(pointer){return HEAPU32[pointer>>2]};default:throw new TypeError("Unknown integer type: "+name)}}function __embind_register_integer(primitiveType,name,size,minRange,maxRange){name=readLatin1String(name),-1===maxRange&&(maxRange=4294967295);var shift=getShiftFromSize(size),fromWireType=function(value){return value};if(0===minRange){var bitshift=32-8*size;fromWireType=function(value){return value<<bitshift>>>bitshift}}var isUnsignedType=name.includes("unsigned");registerType(primitiveType,{name:name,fromWireType:fromWireType,toWireType:function(destructors,value){if("number"!=typeof value&&"boolean"!=typeof value)throw new TypeError('Cannot convert "'+_embind_repr(value)+'" to '+this.name);if(value<minRange||value>maxRange)throw new TypeError('Passing a number "'+_embind_repr(value)+'" from JS side to C/C++ side to an argument of type "'+name+'", which is outside the valid range ['+minRange+", "+maxRange+"]!");return isUnsignedType?value>>>0:0|value},argPackAdvance:8,readValueFromPointer:integerReadValueFromPointer(name,shift,0!==minRange),destructorFunction:null})}function __embind_register_memory_view(rawType,dataTypeIndex,name){var TA=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][dataTypeIndex];function decodeMemoryView(handle){var heap=HEAPU32,size=heap[handle>>=2],data=heap[handle+1];return new TA(buffer,data,size)}registerType(rawType,{name:name=readLatin1String(name),fromWireType:decodeMemoryView,argPackAdvance:8,readValueFromPointer:decodeMemoryView},{ignoreDuplicateRegistrations:!0})}function __embind_register_std_string(rawType,name){var stdStringIsUTF8="std::string"===(name=readLatin1String(name));registerType(rawType,{name:name,fromWireType:function(value){var str,length=HEAPU32[value>>2];if(stdStringIsUTF8)for(var decodeStartPtr=value+4,i=0;i<=length;++i){var currentBytePtr=value+4+i;if(i==length||0==HEAPU8[currentBytePtr]){var stringSegment=UTF8ToString(decodeStartPtr,currentBytePtr-decodeStartPtr);void 0===str?str=stringSegment:(str+=String.fromCharCode(0),str+=stringSegment),decodeStartPtr=currentBytePtr+1}}else{var a=new Array(length);for(i=0;i<length;++i)a[i]=String.fromCharCode(HEAPU8[value+4+i]);str=a.join("")}return _free(value),str},toWireType:function(destructors,value){value instanceof ArrayBuffer&&(value=new Uint8Array(value));var valueIsOfTypeString="string"==typeof value;valueIsOfTypeString||value instanceof Uint8Array||value instanceof Uint8ClampedArray||value instanceof Int8Array||throwBindingError("Cannot pass non-string to std::string");var length=(stdStringIsUTF8&&valueIsOfTypeString?function(){return lengthBytesUTF8(value)}:function(){return value.length})(),ptr=_malloc(4+length+1);if(HEAPU32[ptr>>2]=length,stdStringIsUTF8&&valueIsOfTypeString)stringToUTF8(value,ptr+4,length+1);else if(valueIsOfTypeString)for(var i=0;i<length;++i){var charCode=value.charCodeAt(i);charCode>255&&(_free(ptr),throwBindingError("String has UTF-16 code units that do not fit in 8 bits")),HEAPU8[ptr+4+i]=charCode}else for(i=0;i<length;++i)HEAPU8[ptr+4+i]=value[i];return null!==destructors&&destructors.push(_free,ptr),ptr},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(ptr){_free(ptr)}})}function __embind_register_std_wstring(rawType,charSize,name){var decodeString,encodeString,getHeap,lengthBytesUTF,shift;name=readLatin1String(name),2===charSize?(decodeString=UTF16ToString,encodeString=stringToUTF16,lengthBytesUTF=lengthBytesUTF16,getHeap=function(){return HEAPU16},shift=1):4===charSize&&(decodeString=UTF32ToString,encodeString=stringToUTF32,lengthBytesUTF=lengthBytesUTF32,getHeap=function(){return HEAPU32},shift=2),registerType(rawType,{name:name,fromWireType:function(value){for(var str,length=HEAPU32[value>>2],HEAP=getHeap(),decodeStartPtr=value+4,i=0;i<=length;++i){var currentBytePtr=value+4+i*charSize;if(i==length||0==HEAP[currentBytePtr>>shift]){var stringSegment=decodeString(decodeStartPtr,currentBytePtr-decodeStartPtr);void 0===str?str=stringSegment:(str+=String.fromCharCode(0),str+=stringSegment),decodeStartPtr=currentBytePtr+charSize}}return _free(value),str},toWireType:function(destructors,value){"string"!=typeof value&&throwBindingError("Cannot pass non-string to C++ string type "+name);var length=lengthBytesUTF(value),ptr=_malloc(4+length+charSize);return HEAPU32[ptr>>2]=length>>shift,encodeString(value,ptr+4,length+charSize),null!==destructors&&destructors.push(_free,ptr),ptr},argPackAdvance:8,readValueFromPointer:simpleReadValueFromPointer,destructorFunction:function(ptr){_free(ptr)}})}function __embind_register_void(rawType,name){registerType(rawType,{isVoid:!0,name:name=readLatin1String(name),argPackAdvance:0,fromWireType:function(){},toWireType:function(destructors,o){}})}function _abort(){abort()}_emscripten_get_now="undefined"!=typeof dateNow?dateNow:function(){return performance.now()};var _emscripten_get_now_is_monotonic=!0;function _clock_gettime(clk_id,tp){var now;if(0===clk_id)now=Date.now();else{if(1!==clk_id&&4!==clk_id||!_emscripten_get_now_is_monotonic)return setErrNo(28),-1;now=_emscripten_get_now()}return HEAP32[tp>>2]=now/1e3|0,HEAP32[tp+4>>2]=now%1e3*1e3*1e3|0,0}function _dlclose(handle){abort("To use dlopen, you need to use Emscripten's linking support, see https://github.com/emscripten-core/emscripten/wiki/Linking")}function _emscripten_set_main_loop_timing(mode,value){if(Browser.mainLoop.timingMode=mode,Browser.mainLoop.timingValue=value,!Browser.mainLoop.func)return 1;if(Browser.mainLoop.running||(Browser.mainLoop.running=!0),0==mode)Browser.mainLoop.scheduler=function(){var timeUntilNextTick=0|Math.max(0,Browser.mainLoop.tickStartTime+value-_emscripten_get_now());setTimeout(Browser.mainLoop.runner,timeUntilNextTick)},Browser.mainLoop.method="timeout";else if(1==mode)Browser.mainLoop.scheduler=function(){Browser.requestAnimationFrame(Browser.mainLoop.runner)},Browser.mainLoop.method="rAF";else if(2==mode){if("undefined"==typeof setImmediate){var setImmediates=[];addEventListener("message",(function(event){"setimmediate"!==event.data&&"setimmediate"!==event.data.target||(event.stopPropagation(),setImmediates.shift()())}),!0),setImmediate=function(func){setImmediates.push(func),ENVIRONMENT_IS_WORKER?(void 0===Module.setImmediates&&(Module.setImmediates=[]),Module.setImmediates.push(func),postMessage({target:"setimmediate"})):postMessage("setimmediate","*")}}Browser.mainLoop.scheduler=function(){setImmediate(Browser.mainLoop.runner)},Browser.mainLoop.method="immediate"}return 0}function _exit(status){exit(status)}function maybeExit(){if(!keepRuntimeAlive())try{_exit(EXITSTATUS)}catch(e){if(e instanceof ExitStatus)return;throw e}}function setMainLoop(browserIterationFunc,fps,simulateInfiniteLoop,arg,noSetTiming){assert(!Browser.mainLoop.func,"emscripten_set_main_loop: there can only be one main loop function at once: call emscripten_cancel_main_loop to cancel the previous one before setting a new one with different parameters."),Browser.mainLoop.func=browserIterationFunc,Browser.mainLoop.arg=arg;var thisMainLoopId=Browser.mainLoop.currentlyRunningMainloop;function checkIsRunning(){return!(thisMainLoopId<Browser.mainLoop.currentlyRunningMainloop)||(maybeExit(),!1)}if(Browser.mainLoop.running=!1,Browser.mainLoop.runner=function(){if(!ABORT)if(Browser.mainLoop.queue.length>0){var start=Date.now(),blocker=Browser.mainLoop.queue.shift();if(blocker.func(blocker.arg),Browser.mainLoop.remainingBlockers){var remaining=Browser.mainLoop.remainingBlockers,next=remaining%1==0?remaining-1:Math.floor(remaining);blocker.counted?Browser.mainLoop.remainingBlockers=next:(next+=.5,Browser.mainLoop.remainingBlockers=(8*remaining+next)/9)}if(console.log('main loop blocker "'+blocker.name+'" took '+(Date.now()-start)+" ms"),Browser.mainLoop.updateStatus(),!checkIsRunning())return;setTimeout(Browser.mainLoop.runner,0)}else checkIsRunning()&&(Browser.mainLoop.currentFrameNumber=Browser.mainLoop.currentFrameNumber+1|0,1==Browser.mainLoop.timingMode&&Browser.mainLoop.timingValue>1&&Browser.mainLoop.currentFrameNumber%Browser.mainLoop.timingValue!=0?Browser.mainLoop.scheduler():(0==Browser.mainLoop.timingMode&&(Browser.mainLoop.tickStartTime=_emscripten_get_now()),Browser.mainLoop.runIter(browserIterationFunc),checkIsRunning()&&("object"==typeof SDL&&SDL.audio&&SDL.audio.queueNewAudioData&&SDL.audio.queueNewAudioData(),Browser.mainLoop.scheduler())))},noSetTiming||(fps&&fps>0?_emscripten_set_main_loop_timing(0,1e3/fps):_emscripten_set_main_loop_timing(1,1),Browser.mainLoop.scheduler()),simulateInfiniteLoop)throw"unwind"}function callUserCallback(func,synchronous){if(!ABORT)if(synchronous)func();else try{func()}catch(e){if(e instanceof ExitStatus)return;if("unwind"!==e)throw e&&"object"==typeof e&&e.stack&&err("exception thrown: "+[e,e.stack]),e}}var Browser={mainLoop:{running:!1,scheduler:null,method:"",currentlyRunningMainloop:0,func:null,arg:0,timingMode:0,timingValue:0,currentFrameNumber:0,queue:[],pause:function(){Browser.mainLoop.scheduler=null,Browser.mainLoop.currentlyRunningMainloop++},resume:function(){Browser.mainLoop.currentlyRunningMainloop++;var timingMode=Browser.mainLoop.timingMode,timingValue=Browser.mainLoop.timingValue,func=Browser.mainLoop.func;Browser.mainLoop.func=null,setMainLoop(func,0,!1,Browser.mainLoop.arg,!0),_emscripten_set_main_loop_timing(timingMode,timingValue),Browser.mainLoop.scheduler()},updateStatus:function(){if(Module.setStatus){var message=Module.statusMessage||"Please wait...",remaining=Browser.mainLoop.remainingBlockers,expected=Browser.mainLoop.expectedBlockers;remaining?remaining<expected?Module.setStatus(message+" ("+(expected-remaining)+"/"+expected+")"):Module.setStatus(message):Module.setStatus("")}},runIter:function(func){if(!ABORT){if(Module.preMainLoop)if(!1===Module.preMainLoop())return;callUserCallback(func),Module.postMainLoop&&Module.postMainLoop()}}},isFullscreen:!1,pointerLock:!1,moduleContextCreatedCallbacks:[],workers:[],init:function(){if(Module.preloadPlugins||(Module.preloadPlugins=[]),!Browser.initted){Browser.initted=!0;try{new Blob,Browser.hasBlobConstructor=!0}catch(e){Browser.hasBlobConstructor=!1,console.log("warning: no blob constructor, cannot create blobs with mimetypes")}Browser.BlobBuilder="undefined"!=typeof MozBlobBuilder?MozBlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:Browser.hasBlobConstructor?null:console.log("warning: no BlobBuilder"),Browser.URLObject="undefined"!=typeof window?window.URL?window.URL:window.webkitURL:void 0,Module.noImageDecoding||void 0!==Browser.URLObject||(console.log("warning: Browser does not support creating object URLs. Built-in browser image decoding will not be available."),Module.noImageDecoding=!0);var imagePlugin={canHandle:function(name){return!Module.noImageDecoding&&/\.(jpg|jpeg|png|bmp)$/i.test(name)},handle:function(byteArray,name,onload,onerror){var b=null;if(Browser.hasBlobConstructor)try{(b=new Blob([byteArray],{type:Browser.getMimetype(name)})).size!==byteArray.length&&(b=new Blob([new Uint8Array(byteArray).buffer],{type:Browser.getMimetype(name)}))}catch(e){warnOnce("Blob constructor present but fails: "+e+"; falling back to blob builder")}if(!b){var bb=new Browser.BlobBuilder;bb.append(new Uint8Array(byteArray).buffer),b=bb.getBlob()}var url=Browser.URLObject.createObjectURL(b),img=new Image;img.onload=function(){assert(img.complete,"Image "+name+" could not be decoded");var canvas=document.createElement("canvas");canvas.width=img.width,canvas.height=img.height,canvas.getContext("2d").drawImage(img,0,0),Module.preloadedImages[name]=canvas,Browser.URLObject.revokeObjectURL(url),onload&&onload(byteArray)},img.onerror=function(event){console.log("Image "+url+" could not be decoded"),onerror&&onerror()},img.src=url}};Module.preloadPlugins.push(imagePlugin);var audioPlugin={canHandle:function(name){return!Module.noAudioDecoding&&name.substr(-4)in{".ogg":1,".wav":1,".mp3":1}},handle:function(byteArray,name,onload,onerror){var done=!1;function finish(audio){done||(done=!0,Module.preloadedAudios[name]=audio,onload&&onload(byteArray))}function fail(){done||(done=!0,Module.preloadedAudios[name]=new Audio,onerror&&onerror())}if(!Browser.hasBlobConstructor)return fail();try{var b=new Blob([byteArray],{type:Browser.getMimetype(name)})}catch(e){return fail()}var url=Browser.URLObject.createObjectURL(b),audio=new Audio;audio.addEventListener("canplaythrough",(function(){finish(audio)}),!1),audio.onerror=function(event){done||(console.log("warning: browser could not fully decode audio "+name+", trying slower base64 approach"),audio.src="data:audio/x-"+name.substr(-3)+";base64,"+function(data){for(var BASE="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ret="",leftchar=0,leftbits=0,i=0;i<data.length;i++)for(leftchar=leftchar<<8|data[i],leftbits+=8;leftbits>=6;){var curr=leftchar>>leftbits-6&63;leftbits-=6,ret+=BASE[curr]}return 2==leftbits?(ret+=BASE[(3&leftchar)<<4],ret+="=="):4==leftbits&&(ret+=BASE[(15&leftchar)<<2],ret+="="),ret}(byteArray),finish(audio))},audio.src=url,Browser.safeSetTimeout((function(){finish(audio)}),1e4)}};Module.preloadPlugins.push(audioPlugin);var canvas=Module.canvas;canvas&&(canvas.requestPointerLock=canvas.requestPointerLock||canvas.mozRequestPointerLock||canvas.webkitRequestPointerLock||canvas.msRequestPointerLock||function(){},canvas.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock||document.msExitPointerLock||function(){},canvas.exitPointerLock=canvas.exitPointerLock.bind(document),document.addEventListener("pointerlockchange",pointerLockChange,!1),document.addEventListener("mozpointerlockchange",pointerLockChange,!1),document.addEventListener("webkitpointerlockchange",pointerLockChange,!1),document.addEventListener("mspointerlockchange",pointerLockChange,!1),Module.elementPointerLock&&canvas.addEventListener("click",(function(ev){!Browser.pointerLock&&Module.canvas.requestPointerLock&&(Module.canvas.requestPointerLock(),ev.preventDefault())}),!1))}function pointerLockChange(){Browser.pointerLock=document.pointerLockElement===Module.canvas||document.mozPointerLockElement===Module.canvas||document.webkitPointerLockElement===Module.canvas||document.msPointerLockElement===Module.canvas}},createContext:function(canvas,useWebGL,setInModule,webGLContextAttributes){if(useWebGL&&Module.ctx&&canvas==Module.canvas)return Module.ctx;var ctx,contextHandle;if(useWebGL){var contextAttributes={antialias:!1,alpha:!1,majorVersion:1};if(webGLContextAttributes)for(var attribute in webGLContextAttributes)contextAttributes[attribute]=webGLContextAttributes[attribute];void 0!==GL&&(contextHandle=GL.createContext(canvas,contextAttributes))&&(ctx=GL.getContext(contextHandle).GLctx)}else ctx=canvas.getContext("2d");return ctx?(setInModule&&(useWebGL||assert(void 0===GLctx,"cannot set in module if GLctx is used, but we are a non-GL context that would replace it"),Module.ctx=ctx,useWebGL&&GL.makeContextCurrent(contextHandle),Module.useWebGL=useWebGL,Browser.moduleContextCreatedCallbacks.forEach((function(callback){callback()})),Browser.init()),ctx):null},destroyContext:function(canvas,useWebGL,setInModule){},fullscreenHandlersInstalled:!1,lockPointer:void 0,resizeCanvas:void 0,requestFullscreen:function(lockPointer,resizeCanvas){Browser.lockPointer=lockPointer,Browser.resizeCanvas=resizeCanvas,void 0===Browser.lockPointer&&(Browser.lockPointer=!0),void 0===Browser.resizeCanvas&&(Browser.resizeCanvas=!1);var canvas=Module.canvas;function fullscreenChange(){Browser.isFullscreen=!1;var canvasContainer=canvas.parentNode;(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===canvasContainer?(canvas.exitFullscreen=Browser.exitFullscreen,Browser.lockPointer&&canvas.requestPointerLock(),Browser.isFullscreen=!0,Browser.resizeCanvas?Browser.setFullscreenCanvasSize():Browser.updateCanvasDimensions(canvas)):(canvasContainer.parentNode.insertBefore(canvas,canvasContainer),canvasContainer.parentNode.removeChild(canvasContainer),Browser.resizeCanvas?Browser.setWindowedCanvasSize():Browser.updateCanvasDimensions(canvas)),Module.onFullScreen&&Module.onFullScreen(Browser.isFullscreen),Module.onFullscreen&&Module.onFullscreen(Browser.isFullscreen)}Browser.fullscreenHandlersInstalled||(Browser.fullscreenHandlersInstalled=!0,document.addEventListener("fullscreenchange",fullscreenChange,!1),document.addEventListener("mozfullscreenchange",fullscreenChange,!1),document.addEventListener("webkitfullscreenchange",fullscreenChange,!1),document.addEventListener("MSFullscreenChange",fullscreenChange,!1));var canvasContainer=document.createElement("div");canvas.parentNode.insertBefore(canvasContainer,canvas),canvasContainer.appendChild(canvas),canvasContainer.requestFullscreen=canvasContainer.requestFullscreen||canvasContainer.mozRequestFullScreen||canvasContainer.msRequestFullscreen||(canvasContainer.webkitRequestFullscreen?function(){canvasContainer.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}:null)||(canvasContainer.webkitRequestFullScreen?function(){canvasContainer.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT)}:null),canvasContainer.requestFullscreen()},exitFullscreen:function(){return!!Browser.isFullscreen&&((document.exitFullscreen||document.cancelFullScreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitCancelFullScreen||function(){}).apply(document,[]),!0)},nextRAF:0,fakeRequestAnimationFrame:function(func){var now=Date.now();if(0===Browser.nextRAF)Browser.nextRAF=now+1e3/60;else for(;now+2>=Browser.nextRAF;)Browser.nextRAF+=1e3/60;var delay=Math.max(Browser.nextRAF-now,0);setTimeout(func,delay)},requestAnimationFrame:function(func){"function"!=typeof requestAnimationFrame?(0,Browser.fakeRequestAnimationFrame)(func):requestAnimationFrame(func)},safeRequestAnimationFrame:function(func){return Browser.requestAnimationFrame((function(){callUserCallback(func)}))},safeSetTimeout:function(func,timeout){return setTimeout((function(){callUserCallback(func)}),timeout)},getMimetype:function(name){return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",bmp:"image/bmp",ogg:"audio/ogg",wav:"audio/wav",mp3:"audio/mpeg"}[name.substr(name.lastIndexOf(".")+1)]},getUserMedia:function(func){window.getUserMedia||(window.getUserMedia=navigator.getUserMedia||navigator.mozGetUserMedia),window.getUserMedia(func)},getMovementX:function(event){return event.movementX||event.mozMovementX||event.webkitMovementX||0},getMovementY:function(event){return event.movementY||event.mozMovementY||event.webkitMovementY||0},getMouseWheelDelta:function(event){var delta=0;switch(event.type){case"DOMMouseScroll":delta=event.detail/3;break;case"mousewheel":delta=event.wheelDelta/120;break;case"wheel":switch(delta=event.deltaY,event.deltaMode){case 0:delta/=100;break;case 1:delta/=3;break;case 2:delta*=80;break;default:throw"unrecognized mouse wheel delta mode: "+event.deltaMode}break;default:throw"unrecognized mouse wheel event: "+event.type}return delta},mouseX:0,mouseY:0,mouseMovementX:0,mouseMovementY:0,touches:{},lastTouches:{},calculateMouseEvent:function(event){if(Browser.pointerLock)"mousemove"!=event.type&&"mozMovementX"in event?Browser.mouseMovementX=Browser.mouseMovementY=0:(Browser.mouseMovementX=Browser.getMovementX(event),Browser.mouseMovementY=Browser.getMovementY(event)),"undefined"!=typeof SDL?(Browser.mouseX=SDL.mouseX+Browser.mouseMovementX,Browser.mouseY=SDL.mouseY+Browser.mouseMovementY):(Browser.mouseX+=Browser.mouseMovementX,Browser.mouseY+=Browser.mouseMovementY);else{var rect=Module.canvas.getBoundingClientRect(),cw=Module.canvas.width,ch=Module.canvas.height,scrollX=void 0!==window.scrollX?window.scrollX:window.pageXOffset,scrollY=void 0!==window.scrollY?window.scrollY:window.pageYOffset;if("touchstart"===event.type||"touchend"===event.type||"touchmove"===event.type){var touch=event.touch;if(void 0===touch)return;var adjustedX=touch.pageX-(scrollX+rect.left),adjustedY=touch.pageY-(scrollY+rect.top),coords={x:adjustedX*=cw/rect.width,y:adjustedY*=ch/rect.height};if("touchstart"===event.type)Browser.lastTouches[touch.identifier]=coords,Browser.touches[touch.identifier]=coords;else if("touchend"===event.type||"touchmove"===event.type){var last=Browser.touches[touch.identifier];last||(last=coords),Browser.lastTouches[touch.identifier]=last,Browser.touches[touch.identifier]=coords}return}var x=event.pageX-(scrollX+rect.left),y=event.pageY-(scrollY+rect.top);x*=cw/rect.width,y*=ch/rect.height,Browser.mouseMovementX=x-Browser.mouseX,Browser.mouseMovementY=y-Browser.mouseY,Browser.mouseX=x,Browser.mouseY=y}},asyncLoad:function(url,onload,onerror,noRunDep){var dep=noRunDep?"":getUniqueRunDependency("al "+url);readAsync(url,(function(arrayBuffer){assert(arrayBuffer,'Loading data file "'+url+'" failed (no arrayBuffer).'),onload(new Uint8Array(arrayBuffer)),dep&&removeRunDependency(dep)}),(function(event){if(!onerror)throw'Loading data file "'+url+'" failed.';onerror()})),dep&&addRunDependency(dep)},resizeListeners:[],updateResizeListeners:function(){var canvas=Module.canvas;Browser.resizeListeners.forEach((function(listener){listener(canvas.width,canvas.height)}))},setCanvasSize:function(width,height,noUpdates){var canvas=Module.canvas;Browser.updateCanvasDimensions(canvas,width,height),noUpdates||Browser.updateResizeListeners()},windowedWidth:0,windowedHeight:0,setFullscreenCanvasSize:function(){if("undefined"!=typeof SDL){var flags=HEAPU32[SDL.screen>>2];flags|=8388608,HEAP32[SDL.screen>>2]=flags}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},setWindowedCanvasSize:function(){if("undefined"!=typeof SDL){var flags=HEAPU32[SDL.screen>>2];flags&=-8388609,HEAP32[SDL.screen>>2]=flags}Browser.updateCanvasDimensions(Module.canvas),Browser.updateResizeListeners()},updateCanvasDimensions:function(canvas,wNative,hNative){wNative&&hNative?(canvas.widthNative=wNative,canvas.heightNative=hNative):(wNative=canvas.widthNative,hNative=canvas.heightNative);var w=wNative,h=hNative;if(Module.forcedAspectRatio&&Module.forcedAspectRatio>0&&(w/h<Module.forcedAspectRatio?w=Math.round(h*Module.forcedAspectRatio):h=Math.round(w/Module.forcedAspectRatio)),(document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement||document.webkitCurrentFullScreenElement)===canvas.parentNode&&"undefined"!=typeof screen){var factor=Math.min(screen.width/w,screen.height/h);w=Math.round(w*factor),h=Math.round(h*factor)}Browser.resizeCanvas?(canvas.width!=w&&(canvas.width=w),canvas.height!=h&&(canvas.height=h),void 0!==canvas.style&&(canvas.style.removeProperty("width"),canvas.style.removeProperty("height"))):(canvas.width!=wNative&&(canvas.width=wNative),canvas.height!=hNative&&(canvas.height=hNative),void 0!==canvas.style&&(w!=wNative||h!=hNative?(canvas.style.setProperty("width",w+"px","important"),canvas.style.setProperty("height",h+"px","important")):(canvas.style.removeProperty("width"),canvas.style.removeProperty("height"))))},wgetRequests:{},nextWgetRequestHandle:0,getNextWgetRequestHandle:function(){var handle=Browser.nextWgetRequestHandle;return Browser.nextWgetRequestHandle++,handle}},EGL={errorCode:12288,defaultDisplayInitialized:!1,currentContext:0,currentReadSurface:0,currentDrawSurface:0,contextAttributes:{alpha:!1,depth:!1,stencil:!1,antialias:!1},stringCache:{},setErrorCode:function(code){EGL.errorCode=code},chooseConfig:function(display,attribList,config,config_size,numConfigs){if(62e3!=display)return EGL.setErrorCode(12296),0;if(attribList)for(;;){var param=HEAP32[attribList>>2];if(12321==param){var alphaSize=HEAP32[attribList+4>>2];EGL.contextAttributes.alpha=alphaSize>0}else if(12325==param){var depthSize=HEAP32[attribList+4>>2];EGL.contextAttributes.depth=depthSize>0}else if(12326==param){var stencilSize=HEAP32[attribList+4>>2];EGL.contextAttributes.stencil=stencilSize>0}else if(12337==param){var samples=HEAP32[attribList+4>>2];EGL.contextAttributes.antialias=samples>0}else if(12338==param){samples=HEAP32[attribList+4>>2];EGL.contextAttributes.antialias=1==samples}else if(12544==param){var requestedPriority=HEAP32[attribList+4>>2];EGL.contextAttributes.lowLatency=12547!=requestedPriority}else if(12344==param)break;attribList+=8}return config&&config_size||numConfigs?(numConfigs&&(HEAP32[numConfigs>>2]=1),config&&config_size>0&&(HEAP32[config>>2]=62002),EGL.setErrorCode(12288),1):(EGL.setErrorCode(12300),0)}};function _eglBindAPI(api){return 12448==api?(EGL.setErrorCode(12288),1):(EGL.setErrorCode(12300),0)}function _eglChooseConfig(display,attrib_list,configs,config_size,numConfigs){return EGL.chooseConfig(display,attrib_list,configs,config_size,numConfigs)}function __webgl_enable_ANGLE_instanced_arrays(ctx){var ext=ctx.getExtension("ANGLE_instanced_arrays");if(ext)return ctx.vertexAttribDivisor=function(index,divisor){ext.vertexAttribDivisorANGLE(index,divisor)},ctx.drawArraysInstanced=function(mode,first,count,primcount){ext.drawArraysInstancedANGLE(mode,first,count,primcount)},ctx.drawElementsInstanced=function(mode,count,type,indices,primcount){ext.drawElementsInstancedANGLE(mode,count,type,indices,primcount)},1}function __webgl_enable_OES_vertex_array_object(ctx){var ext=ctx.getExtension("OES_vertex_array_object");if(ext)return ctx.createVertexArray=function(){return ext.createVertexArrayOES()},ctx.deleteVertexArray=function(vao){ext.deleteVertexArrayOES(vao)},ctx.bindVertexArray=function(vao){ext.bindVertexArrayOES(vao)},ctx.isVertexArray=function(vao){return ext.isVertexArrayOES(vao)},1}function __webgl_enable_WEBGL_draw_buffers(ctx){var ext=ctx.getExtension("WEBGL_draw_buffers");if(ext)return ctx.drawBuffers=function(n,bufs){ext.drawBuffersWEBGL(n,bufs)},1}function __webgl_enable_WEBGL_multi_draw(ctx){return!!(ctx.multiDrawWebgl=ctx.getExtension("WEBGL_multi_draw"))}var GL={counter:1,buffers:[],programs:[],framebuffers:[],renderbuffers:[],textures:[],shaders:[],vaos:[],contexts:[],offscreenCanvases:{},queries:[],stringCache:{},unpackAlignment:4,recordError:function(errorCode){GL.lastError||(GL.lastError=errorCode)},getNewId:function(table){for(var ret=GL.counter++,i=table.length;i<ret;i++)table[i]=null;return ret},getSource:function(shader,count,string,length){for(var source="",i=0;i<count;++i){var len=length?HEAP32[length+4*i>>2]:-1;source+=UTF8ToString(HEAP32[string+4*i>>2],len<0?void 0:len)}return source},createContext:function(canvas,webGLContextAttributes){canvas.getContextSafariWebGL2Fixed||(canvas.getContextSafariWebGL2Fixed=canvas.getContext,canvas.getContext=function(ver,attrs){var gl=canvas.getContextSafariWebGL2Fixed(ver,attrs);return"webgl"==ver==gl instanceof WebGLRenderingContext?gl:null});var ctx=canvas.getContext("webgl",webGLContextAttributes);return ctx?GL.registerContext(ctx,webGLContextAttributes):0},registerContext:function(ctx,webGLContextAttributes){var handle=GL.getNewId(GL.contexts),context={handle:handle,attributes:webGLContextAttributes,version:webGLContextAttributes.majorVersion,GLctx:ctx};return ctx.canvas&&(ctx.canvas.GLctxObject=context),GL.contexts[handle]=context,(void 0===webGLContextAttributes.enableExtensionsByDefault||webGLContextAttributes.enableExtensionsByDefault)&&GL.initExtensions(context),handle},makeContextCurrent:function(contextHandle){return GL.currentContext=GL.contexts[contextHandle],Module.ctx=GLctx=GL.currentContext&&GL.currentContext.GLctx,!(contextHandle&&!GLctx)},getContext:function(contextHandle){return GL.contexts[contextHandle]},deleteContext:function(contextHandle){GL.currentContext===GL.contexts[contextHandle]&&(GL.currentContext=null),"object"==typeof JSEvents&&JSEvents.removeAllHandlersOnTarget(GL.contexts[contextHandle].GLctx.canvas),GL.contexts[contextHandle]&&GL.contexts[contextHandle].GLctx.canvas&&(GL.contexts[contextHandle].GLctx.canvas.GLctxObject=void 0),GL.contexts[contextHandle]=null},initExtensions:function(context){if(context||(context=GL.currentContext),!context.initExtensionsDone){context.initExtensionsDone=!0;var GLctx=context.GLctx;__webgl_enable_ANGLE_instanced_arrays(GLctx),__webgl_enable_OES_vertex_array_object(GLctx),__webgl_enable_WEBGL_draw_buffers(GLctx),GLctx.disjointTimerQueryExt=GLctx.getExtension("EXT_disjoint_timer_query"),__webgl_enable_WEBGL_multi_draw(GLctx),(GLctx.getSupportedExtensions()||[]).forEach((function(ext){ext.includes("lose_context")||ext.includes("debug")||GLctx.getExtension(ext)}))}}};function _eglCreateContext(display,config,hmm,contextAttribs){if(62e3!=display)return EGL.setErrorCode(12296),0;for(var glesContextVersion=1;;){var param=HEAP32[contextAttribs>>2];if(12440!=param){if(12344==param)break;return EGL.setErrorCode(12292),0}glesContextVersion=HEAP32[contextAttribs+4>>2],contextAttribs+=8}return 2!=glesContextVersion?(EGL.setErrorCode(12293),0):(EGL.contextAttributes.majorVersion=glesContextVersion-1,EGL.contextAttributes.minorVersion=0,EGL.context=GL.createContext(Module.canvas,EGL.contextAttributes),0!=EGL.context?(EGL.setErrorCode(12288),GL.makeContextCurrent(EGL.context),Module.useWebGL=!0,Browser.moduleContextCreatedCallbacks.forEach((function(callback){callback()})),GL.makeContextCurrent(null),62004):(EGL.setErrorCode(12297),0))}function _eglCreateWindowSurface(display,config,win,attrib_list){return 62e3!=display?(EGL.setErrorCode(12296),0):62002!=config?(EGL.setErrorCode(12293),0):(EGL.setErrorCode(12288),62006)}function _eglDestroyContext(display,context){return 62e3!=display?(EGL.setErrorCode(12296),0):62004!=context?(EGL.setErrorCode(12294),0):(GL.deleteContext(EGL.context),EGL.setErrorCode(12288),EGL.currentContext==context&&(EGL.currentContext=0),1)}function _eglDestroySurface(display,surface){return 62e3!=display?(EGL.setErrorCode(12296),0):62006!=surface?(EGL.setErrorCode(12301),1):(EGL.currentReadSurface==surface&&(EGL.currentReadSurface=0),EGL.currentDrawSurface==surface&&(EGL.currentDrawSurface=0),EGL.setErrorCode(12288),1)}function _eglGetConfigAttrib(display,config,attribute,value){if(62e3!=display)return EGL.setErrorCode(12296),0;if(62002!=config)return EGL.setErrorCode(12293),0;if(!value)return EGL.setErrorCode(12300),0;switch(EGL.setErrorCode(12288),attribute){case 12320:return HEAP32[value>>2]=EGL.contextAttributes.alpha?32:24,1;case 12321:return HEAP32[value>>2]=EGL.contextAttributes.alpha?8:0,1;case 12322:case 12323:case 12324:return HEAP32[value>>2]=8,1;case 12325:return HEAP32[value>>2]=EGL.contextAttributes.depth?24:0,1;case 12326:return HEAP32[value>>2]=EGL.contextAttributes.stencil?8:0,1;case 12327:case 12335:case 12340:return HEAP32[value>>2]=12344,1;case 12328:return HEAP32[value>>2]=62002,1;case 12329:case 12333:case 12334:case 12345:case 12346:case 12347:case 12349:case 12350:case 12354:return HEAP32[value>>2]=0,1;case 12330:case 12332:return HEAP32[value>>2]=4096,1;case 12331:return HEAP32[value>>2]=16777216,1;case 12337:return HEAP32[value>>2]=EGL.contextAttributes.antialias?4:0,1;case 12338:return HEAP32[value>>2]=EGL.contextAttributes.antialias?1:0,1;case 12339:case 12352:return HEAP32[value>>2]=4,1;case 12341:case 12342:case 12343:return HEAP32[value>>2]=-1,1;case 12348:return HEAP32[value>>2]=1,1;case 12351:return HEAP32[value>>2]=12430,1;default:return EGL.setErrorCode(12292),0}}function _eglGetDisplay(nativeDisplayType){return EGL.setErrorCode(12288),62e3}function _eglGetError(){return EGL.errorCode}function _eglInitialize(display,majorVersion,minorVersion){return 62e3==display?(majorVersion&&(HEAP32[majorVersion>>2]=1),minorVersion&&(HEAP32[minorVersion>>2]=4),EGL.defaultDisplayInitialized=!0,EGL.setErrorCode(12288),1):(EGL.setErrorCode(12296),0)}function _eglMakeCurrent(display,draw,read,context){return 62e3!=display?(EGL.setErrorCode(12296),0):0!=context&&62004!=context?(EGL.setErrorCode(12294),0):0!=read&&62006!=read||0!=draw&&62006!=draw?(EGL.setErrorCode(12301),0):(GL.makeContextCurrent(context?EGL.context:null),EGL.currentContext=context,EGL.currentDrawSurface=draw,EGL.currentReadSurface=read,EGL.setErrorCode(12288),1)}function _eglQueryString(display,name){if(62e3!=display)return EGL.setErrorCode(12296),0;if(EGL.setErrorCode(12288),EGL.stringCache[name])return EGL.stringCache[name];var ret;switch(name){case 12371:ret=allocateUTF8("Emscripten");break;case 12372:ret=allocateUTF8("1.4 Emscripten EGL");break;case 12373:ret=allocateUTF8("");break;case 12429:ret=allocateUTF8("OpenGL_ES");break;default:return EGL.setErrorCode(12300),0}return EGL.stringCache[name]=ret,ret}function _eglSwapBuffers(){if(EGL.defaultDisplayInitialized)if(Module.ctx){if(!Module.ctx.isContextLost())return EGL.setErrorCode(12288),1;EGL.setErrorCode(12302)}else EGL.setErrorCode(12290);else EGL.setErrorCode(12289);return 0}function _eglSwapInterval(display,interval){return 62e3!=display?(EGL.setErrorCode(12296),0):(0==interval?_emscripten_set_main_loop_timing(0,0):_emscripten_set_main_loop_timing(1,interval),EGL.setErrorCode(12288),1)}function _eglTerminate(display){return 62e3!=display?(EGL.setErrorCode(12296),0):(EGL.currentContext=0,EGL.currentReadSurface=0,EGL.currentDrawSurface=0,EGL.defaultDisplayInitialized=!1,EGL.setErrorCode(12288),1)}function _eglWaitClient(){return EGL.setErrorCode(12288),1}function _eglWaitGL(){return _eglWaitClient()}function _eglWaitNative(nativeEngineId){return EGL.setErrorCode(12288),1}var readAsmConstArgsArray=[];function readAsmConstArgs(sigPtr,buf){var ch;for(readAsmConstArgsArray.length=0,buf>>=2;ch=HEAPU8[sigPtr++];){var double=ch<105;double&&1&buf&&buf++,readAsmConstArgsArray.push(double?HEAPF64[buf++>>1]:HEAP32[buf]),++buf}return readAsmConstArgsArray}function _emscripten_asm_const_int(code,sigPtr,argbuf){var args=readAsmConstArgs(sigPtr,argbuf);return ASM_CONSTS[code].apply(null,args)}var JSEvents={inEventHandler:0,removeAllEventListeners:function(){for(var i=JSEvents.eventHandlers.length-1;i>=0;--i)JSEvents._removeHandler(i);JSEvents.eventHandlers=[],JSEvents.deferredCalls=[]},registerRemoveEventListeners:function(){JSEvents.removeEventListenersRegistered||(__ATEXIT__.push(JSEvents.removeAllEventListeners),JSEvents.removeEventListenersRegistered=!0)},deferredCalls:[],deferCall:function(targetFunction,precedence,argsList){function arraysHaveEqualContent(arrA,arrB){if(arrA.length!=arrB.length)return!1;for(var i in arrA)if(arrA[i]!=arrB[i])return!1;return!0}for(var i in JSEvents.deferredCalls){var call=JSEvents.deferredCalls[i];if(call.targetFunction==targetFunction&&arraysHaveEqualContent(call.argsList,argsList))return}JSEvents.deferredCalls.push({targetFunction:targetFunction,precedence:precedence,argsList:argsList}),JSEvents.deferredCalls.sort((function(x,y){return x.precedence<y.precedence}))},removeDeferredCalls:function(targetFunction){for(var i=0;i<JSEvents.deferredCalls.length;++i)JSEvents.deferredCalls[i].targetFunction==targetFunction&&(JSEvents.deferredCalls.splice(i,1),--i)},canPerformEventHandlerRequests:function(){return JSEvents.inEventHandler&&JSEvents.currentEventHandler.allowsDeferredCalls},runDeferredCalls:function(){if(JSEvents.canPerformEventHandlerRequests())for(var i=0;i<JSEvents.deferredCalls.length;++i){var call=JSEvents.deferredCalls[i];JSEvents.deferredCalls.splice(i,1),--i,call.targetFunction.apply(null,call.argsList)}},eventHandlers:[],removeAllHandlersOnTarget:function(target,eventTypeString){for(var i=0;i<JSEvents.eventHandlers.length;++i)JSEvents.eventHandlers[i].target!=target||eventTypeString&&eventTypeString!=JSEvents.eventHandlers[i].eventTypeString||JSEvents._removeHandler(i--)},_removeHandler:function(i){var h=JSEvents.eventHandlers[i];h.target.removeEventListener(h.eventTypeString,h.eventListenerFunc,h.useCapture),JSEvents.eventHandlers.splice(i,1)},registerOrRemoveHandler:function(eventHandler){var jsEventHandler=function(event){++JSEvents.inEventHandler,JSEvents.currentEventHandler=eventHandler,JSEvents.runDeferredCalls(),eventHandler.handlerFunc(event),JSEvents.runDeferredCalls(),--JSEvents.inEventHandler};if(eventHandler.callbackfunc)eventHandler.eventListenerFunc=jsEventHandler,eventHandler.target.addEventListener(eventHandler.eventTypeString,jsEventHandler,eventHandler.useCapture),JSEvents.eventHandlers.push(eventHandler),JSEvents.registerRemoveEventListeners();else for(var i=0;i<JSEvents.eventHandlers.length;++i)JSEvents.eventHandlers[i].target==eventHandler.target&&JSEvents.eventHandlers[i].eventTypeString==eventHandler.eventTypeString&&JSEvents._removeHandler(i--)},getNodeNameForTarget:function(target){return target?target==window?"#window":target==screen?"#screen":target&&target.nodeName?target.nodeName:"":""},fullscreenEnabled:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled}},currentFullscreenStrategy={};function maybeCStringToJsString(cString){return cString>2?UTF8ToString(cString):cString}var specialHTMLTargets=[0,"undefined"!=typeof document?document:0,"undefined"!=typeof window?window:0];function findEventTarget(target){return target=maybeCStringToJsString(target),specialHTMLTargets[target]||("undefined"!=typeof document?document.querySelector(target):void 0)}function findCanvasEventTarget(target){return findEventTarget(target)}function _emscripten_get_canvas_element_size(target,width,height){var canvas=findCanvasEventTarget(target);if(!canvas)return-4;HEAP32[width>>2]=canvas.width,HEAP32[height>>2]=canvas.height}function getCanvasElementSize(target){var stackTop=stackSave(),w=stackAlloc(8),h=w+4,targetInt=stackAlloc(target.id.length+1);stringToUTF8(target.id,targetInt,target.id.length+1);_emscripten_get_canvas_element_size(targetInt,w,h);var size=[HEAP32[w>>2],HEAP32[h>>2]];return stackRestore(stackTop),size}function _emscripten_set_canvas_element_size(target,width,height){var canvas=findCanvasEventTarget(target);return canvas?(canvas.width=width,canvas.height=height,0):-4}function setCanvasElementSize(target,width,height){if(target.controlTransferredOffscreen){var stackTop=stackSave(),targetInt=stackAlloc(target.id.length+1);stringToUTF8(target.id,targetInt,target.id.length+1),_emscripten_set_canvas_element_size(targetInt,width,height),stackRestore(stackTop)}else target.width=width,target.height=height}function registerRestoreOldStyle(canvas){var canvasSize=getCanvasElementSize(canvas),oldWidth=canvasSize[0],oldHeight=canvasSize[1],oldCssWidth=canvas.style.width,oldCssHeight=canvas.style.height,oldBackgroundColor=canvas.style.backgroundColor,oldDocumentBackgroundColor=document.body.style.backgroundColor,oldPaddingLeft=canvas.style.paddingLeft,oldPaddingRight=canvas.style.paddingRight,oldPaddingTop=canvas.style.paddingTop,oldPaddingBottom=canvas.style.paddingBottom,oldMarginLeft=canvas.style.marginLeft,oldMarginRight=canvas.style.marginRight,oldMarginTop=canvas.style.marginTop,oldMarginBottom=canvas.style.marginBottom,oldDocumentBodyMargin=document.body.style.margin,oldDocumentOverflow=document.documentElement.style.overflow,oldDocumentScroll=document.body.scroll,oldImageRendering=canvas.style.imageRendering;function restoreOldStyle(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||(document.removeEventListener("fullscreenchange",restoreOldStyle),document.removeEventListener("webkitfullscreenchange",restoreOldStyle),setCanvasElementSize(canvas,oldWidth,oldHeight),canvas.style.width=oldCssWidth,canvas.style.height=oldCssHeight,canvas.style.backgroundColor=oldBackgroundColor,oldDocumentBackgroundColor||(document.body.style.backgroundColor="white"),document.body.style.backgroundColor=oldDocumentBackgroundColor,canvas.style.paddingLeft=oldPaddingLeft,canvas.style.paddingRight=oldPaddingRight,canvas.style.paddingTop=oldPaddingTop,canvas.style.paddingBottom=oldPaddingBottom,canvas.style.marginLeft=oldMarginLeft,canvas.style.marginRight=oldMarginRight,canvas.style.marginTop=oldMarginTop,canvas.style.marginBottom=oldMarginBottom,document.body.style.margin=oldDocumentBodyMargin,document.documentElement.style.overflow=oldDocumentOverflow,document.body.scroll=oldDocumentScroll,canvas.style.imageRendering=oldImageRendering,canvas.GLctxObject&&canvas.GLctxObject.GLctx.viewport(0,0,oldWidth,oldHeight),currentFullscreenStrategy.canvasResizedCallback&&wasmTable.get(currentFullscreenStrategy.canvasResizedCallback)(37,0,currentFullscreenStrategy.canvasResizedCallbackUserData))}return document.addEventListener("fullscreenchange",restoreOldStyle),document.addEventListener("webkitfullscreenchange",restoreOldStyle),restoreOldStyle}function setLetterbox(element,topBottom,leftRight){element.style.paddingLeft=element.style.paddingRight=leftRight+"px",element.style.paddingTop=element.style.paddingBottom=topBottom+"px"}function getBoundingClientRect(e){return specialHTMLTargets.indexOf(e)<0?e.getBoundingClientRect():{left:0,top:0}}function _JSEvents_resizeCanvasForFullscreen(target,strategy){var restoreOldStyle=registerRestoreOldStyle(target),cssWidth=strategy.softFullscreen?innerWidth:screen.width,cssHeight=strategy.softFullscreen?innerHeight:screen.height,rect=getBoundingClientRect(target),windowedCssWidth=rect.width,windowedCssHeight=rect.height,canvasSize=getCanvasElementSize(target),windowedRttWidth=canvasSize[0],windowedRttHeight=canvasSize[1];if(3==strategy.scaleMode)setLetterbox(target,(cssHeight-windowedCssHeight)/2,(cssWidth-windowedCssWidth)/2),cssWidth=windowedCssWidth,cssHeight=windowedCssHeight;else if(2==strategy.scaleMode)if(cssWidth*windowedRttHeight<windowedRttWidth*cssHeight){var desiredCssHeight=windowedRttHeight*cssWidth/windowedRttWidth;setLetterbox(target,(cssHeight-desiredCssHeight)/2,0),cssHeight=desiredCssHeight}else{var desiredCssWidth=windowedRttWidth*cssHeight/windowedRttHeight;setLetterbox(target,0,(cssWidth-desiredCssWidth)/2),cssWidth=desiredCssWidth}target.style.backgroundColor||(target.style.backgroundColor="black"),document.body.style.backgroundColor||(document.body.style.backgroundColor="black"),target.style.width=cssWidth+"px",target.style.height=cssHeight+"px",1==strategy.filteringMode&&(target.style.imageRendering="optimizeSpeed",target.style.imageRendering="-moz-crisp-edges",target.style.imageRendering="-o-crisp-edges",target.style.imageRendering="-webkit-optimize-contrast",target.style.imageRendering="optimize-contrast",target.style.imageRendering="crisp-edges",target.style.imageRendering="pixelated");var dpiScale=2==strategy.canvasResolutionScaleMode?devicePixelRatio:1;if(0!=strategy.canvasResolutionScaleMode){var newWidth=cssWidth*dpiScale|0,newHeight=cssHeight*dpiScale|0;setCanvasElementSize(target,newWidth,newHeight),target.GLctxObject&&target.GLctxObject.GLctx.viewport(0,0,newWidth,newHeight)}return restoreOldStyle}function _JSEvents_requestFullscreen(target,strategy){if(0==strategy.scaleMode&&0==strategy.canvasResolutionScaleMode||_JSEvents_resizeCanvasForFullscreen(target,strategy),target.requestFullscreen)target.requestFullscreen();else{if(!target.webkitRequestFullscreen)return JSEvents.fullscreenEnabled()?-3:-1;target.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)}return currentFullscreenStrategy=strategy,strategy.canvasResizedCallback&&wasmTable.get(strategy.canvasResizedCallback)(37,0,strategy.canvasResizedCallbackUserData),0}function _emscripten_exit_fullscreen(){if(!JSEvents.fullscreenEnabled())return-1;JSEvents.removeDeferredCalls(_JSEvents_requestFullscreen);var d=specialHTMLTargets[1];if(d.exitFullscreen)d.fullscreenElement&&d.exitFullscreen();else{if(!d.webkitExitFullscreen)return-1;d.webkitFullscreenElement&&d.webkitExitFullscreen()}return 0}function requestPointerLock(target){if(target.requestPointerLock)target.requestPointerLock();else{if(!target.msRequestPointerLock)return document.body.requestPointerLock||document.body.msRequestPointerLock?-3:-1;target.msRequestPointerLock()}return 0}function _emscripten_exit_pointerlock(){if(JSEvents.removeDeferredCalls(requestPointerLock),document.exitPointerLock)document.exitPointerLock();else{if(!document.msExitPointerLock)return-1;document.msExitPointerLock()}return 0}function _emscripten_get_device_pixel_ratio(){return"number"==typeof devicePixelRatio&&devicePixelRatio||1}function _emscripten_get_element_css_size(target,width,height){if(!(target=findEventTarget(target)))return-4;var rect=getBoundingClientRect(target);return HEAPF64[width>>3]=rect.width,HEAPF64[height>>3]=rect.height,0}function fillGamepadEventData(eventStruct,e){HEAPF64[eventStruct>>3]=e.timestamp;for(var i=0;i<e.axes.length;++i)HEAPF64[eventStruct+8*i+16>>3]=e.axes[i];for(i=0;i<e.buttons.length;++i)"object"==typeof e.buttons[i]?HEAPF64[eventStruct+8*i+528>>3]=e.buttons[i].value:HEAPF64[eventStruct+8*i+528>>3]=e.buttons[i];for(i=0;i<e.buttons.length;++i)"object"==typeof e.buttons[i]?HEAP32[eventStruct+4*i+1040>>2]=e.buttons[i].pressed:HEAP32[eventStruct+4*i+1040>>2]=1==e.buttons[i];HEAP32[eventStruct+1296>>2]=e.connected,HEAP32[eventStruct+1300>>2]=e.index,HEAP32[eventStruct+8>>2]=e.axes.length,HEAP32[eventStruct+12>>2]=e.buttons.length,stringToUTF8(e.id,eventStruct+1304,64),stringToUTF8(e.mapping,eventStruct+1368,64)}function _emscripten_get_gamepad_status(index,gamepadState){return index<0||index>=JSEvents.lastGamepadState.length?-5:JSEvents.lastGamepadState[index]?(fillGamepadEventData(gamepadState,JSEvents.lastGamepadState[index]),0):-7}function _emscripten_get_num_gamepads(){return JSEvents.lastGamepadState.length}function _emscripten_glActiveTexture(x0){GLctx.activeTexture(x0)}function _emscripten_glAttachShader(program,shader){GLctx.attachShader(GL.programs[program],GL.shaders[shader])}function _emscripten_glBeginQueryEXT(target,id){GLctx.disjointTimerQueryExt.beginQueryEXT(target,GL.queries[id])}function _emscripten_glBindAttribLocation(program,index,name){GLctx.bindAttribLocation(GL.programs[program],index,UTF8ToString(name))}function _emscripten_glBindBuffer(target,buffer){GLctx.bindBuffer(target,GL.buffers[buffer])}function _emscripten_glBindFramebuffer(target,framebuffer){GLctx.bindFramebuffer(target,GL.framebuffers[framebuffer])}function _emscripten_glBindRenderbuffer(target,renderbuffer){GLctx.bindRenderbuffer(target,GL.renderbuffers[renderbuffer])}function _emscripten_glBindTexture(target,texture){GLctx.bindTexture(target,GL.textures[texture])}function _emscripten_glBindVertexArrayOES(vao){GLctx.bindVertexArray(GL.vaos[vao])}function _emscripten_glBlendColor(x0,x1,x2,x3){GLctx.blendColor(x0,x1,x2,x3)}function _emscripten_glBlendEquation(x0){GLctx.blendEquation(x0)}function _emscripten_glBlendEquationSeparate(x0,x1){GLctx.blendEquationSeparate(x0,x1)}function _emscripten_glBlendFunc(x0,x1){GLctx.blendFunc(x0,x1)}function _emscripten_glBlendFuncSeparate(x0,x1,x2,x3){GLctx.blendFuncSeparate(x0,x1,x2,x3)}function _emscripten_glBufferData(target,size,data,usage){GLctx.bufferData(target,data?HEAPU8.subarray(data,data+size):size,usage)}function _emscripten_glBufferSubData(target,offset,size,data){GLctx.bufferSubData(target,offset,HEAPU8.subarray(data,data+size))}function _emscripten_glCheckFramebufferStatus(x0){return GLctx.checkFramebufferStatus(x0)}function _emscripten_glClear(x0){GLctx.clear(x0)}function _emscripten_glClearColor(x0,x1,x2,x3){GLctx.clearColor(x0,x1,x2,x3)}function _emscripten_glClearDepthf(x0){GLctx.clearDepth(x0)}function _emscripten_glClearStencil(x0){GLctx.clearStencil(x0)}function _emscripten_glColorMask(red,green,blue,alpha){GLctx.colorMask(!!red,!!green,!!blue,!!alpha)}function _emscripten_glCompileShader(shader){GLctx.compileShader(GL.shaders[shader])}function _emscripten_glCompressedTexImage2D(target,level,internalFormat,width,height,border,imageSize,data){GLctx.compressedTexImage2D(target,level,internalFormat,width,height,border,data?HEAPU8.subarray(data,data+imageSize):null)}function _emscripten_glCompressedTexSubImage2D(target,level,xoffset,yoffset,width,height,format,imageSize,data){GLctx.compressedTexSubImage2D(target,level,xoffset,yoffset,width,height,format,data?HEAPU8.subarray(data,data+imageSize):null)}function _emscripten_glCopyTexImage2D(x0,x1,x2,x3,x4,x5,x6,x7){GLctx.copyTexImage2D(x0,x1,x2,x3,x4,x5,x6,x7)}function _emscripten_glCopyTexSubImage2D(x0,x1,x2,x3,x4,x5,x6,x7){GLctx.copyTexSubImage2D(x0,x1,x2,x3,x4,x5,x6,x7)}function _emscripten_glCreateProgram(){var id=GL.getNewId(GL.programs),program=GLctx.createProgram();return program.name=id,program.maxUniformLength=program.maxAttributeLength=program.maxUniformBlockNameLength=0,program.uniformIdCounter=1,GL.programs[id]=program,id}function _emscripten_glCreateShader(shaderType){var id=GL.getNewId(GL.shaders);return GL.shaders[id]=GLctx.createShader(shaderType),id}function _emscripten_glCullFace(x0){GLctx.cullFace(x0)}function _emscripten_glDeleteBuffers(n,buffers){for(var i=0;i<n;i++){var id=HEAP32[buffers+4*i>>2],buffer=GL.buffers[id];buffer&&(GLctx.deleteBuffer(buffer),buffer.name=0,GL.buffers[id]=null)}}function _emscripten_glDeleteFramebuffers(n,framebuffers){for(var i=0;i<n;++i){var id=HEAP32[framebuffers+4*i>>2],framebuffer=GL.framebuffers[id];framebuffer&&(GLctx.deleteFramebuffer(framebuffer),framebuffer.name=0,GL.framebuffers[id]=null)}}function _emscripten_glDeleteProgram(id){if(id){var program=GL.programs[id];program?(GLctx.deleteProgram(program),program.name=0,GL.programs[id]=null):GL.recordError(1281)}}function _emscripten_glDeleteQueriesEXT(n,ids){for(var i=0;i<n;i++){var id=HEAP32[ids+4*i>>2],query=GL.queries[id];query&&(GLctx.disjointTimerQueryExt.deleteQueryEXT(query),GL.queries[id]=null)}}function _emscripten_glDeleteRenderbuffers(n,renderbuffers){for(var i=0;i<n;i++){var id=HEAP32[renderbuffers+4*i>>2],renderbuffer=GL.renderbuffers[id];renderbuffer&&(GLctx.deleteRenderbuffer(renderbuffer),renderbuffer.name=0,GL.renderbuffers[id]=null)}}function _emscripten_glDeleteShader(id){if(id){var shader=GL.shaders[id];shader?(GLctx.deleteShader(shader),GL.shaders[id]=null):GL.recordError(1281)}}function _emscripten_glDeleteTextures(n,textures){for(var i=0;i<n;i++){var id=HEAP32[textures+4*i>>2],texture=GL.textures[id];texture&&(GLctx.deleteTexture(texture),texture.name=0,GL.textures[id]=null)}}function _emscripten_glDeleteVertexArraysOES(n,vaos){for(var i=0;i<n;i++){var id=HEAP32[vaos+4*i>>2];GLctx.deleteVertexArray(GL.vaos[id]),GL.vaos[id]=null}}function _emscripten_glDepthFunc(x0){GLctx.depthFunc(x0)}function _emscripten_glDepthMask(flag){GLctx.depthMask(!!flag)}function _emscripten_glDepthRangef(x0,x1){GLctx.depthRange(x0,x1)}function _emscripten_glDetachShader(program,shader){GLctx.detachShader(GL.programs[program],GL.shaders[shader])}function _emscripten_glDisable(x0){GLctx.disable(x0)}function _emscripten_glDisableVertexAttribArray(index){GLctx.disableVertexAttribArray(index)}function _emscripten_glDrawArrays(mode,first,count){GLctx.drawArrays(mode,first,count)}function _emscripten_glDrawArraysInstancedANGLE(mode,first,count,primcount){GLctx.drawArraysInstanced(mode,first,count,primcount)}var tempFixedLengthArray=[];function _emscripten_glDrawBuffersWEBGL(n,bufs){for(var bufArray=tempFixedLengthArray[n],i=0;i<n;i++)bufArray[i]=HEAP32[bufs+4*i>>2];GLctx.drawBuffers(bufArray)}function _emscripten_glDrawElements(mode,count,type,indices){GLctx.drawElements(mode,count,type,indices)}function _emscripten_glDrawElementsInstancedANGLE(mode,count,type,indices,primcount){GLctx.drawElementsInstanced(mode,count,type,indices,primcount)}function _emscripten_glEnable(x0){GLctx.enable(x0)}function _emscripten_glEnableVertexAttribArray(index){GLctx.enableVertexAttribArray(index)}function _emscripten_glEndQueryEXT(target){GLctx.disjointTimerQueryExt.endQueryEXT(target)}function _emscripten_glFinish(){GLctx.finish()}function _emscripten_glFlush(){GLctx.flush()}function _emscripten_glFramebufferRenderbuffer(target,attachment,renderbuffertarget,renderbuffer){GLctx.framebufferRenderbuffer(target,attachment,renderbuffertarget,GL.renderbuffers[renderbuffer])}function _emscripten_glFramebufferTexture2D(target,attachment,textarget,texture,level){GLctx.framebufferTexture2D(target,attachment,textarget,GL.textures[texture],level)}function _emscripten_glFrontFace(x0){GLctx.frontFace(x0)}function __glGenObject(n,buffers,createFunction,objectTable){for(var i=0;i<n;i++){var buffer=GLctx[createFunction](),id=buffer&&GL.getNewId(objectTable);buffer?(buffer.name=id,objectTable[id]=buffer):GL.recordError(1282),HEAP32[buffers+4*i>>2]=id}}function _emscripten_glGenBuffers(n,buffers){__glGenObject(n,buffers,"createBuffer",GL.buffers)}function _emscripten_glGenFramebuffers(n,ids){__glGenObject(n,ids,"createFramebuffer",GL.framebuffers)}function _emscripten_glGenQueriesEXT(n,ids){for(var i=0;i<n;i++){var query=GLctx.disjointTimerQueryExt.createQueryEXT();if(!query){for(GL.recordError(1282);i<n;)HEAP32[ids+4*i++>>2]=0;return}var id=GL.getNewId(GL.queries);query.name=id,GL.queries[id]=query,HEAP32[ids+4*i>>2]=id}}function _emscripten_glGenRenderbuffers(n,renderbuffers){__glGenObject(n,renderbuffers,"createRenderbuffer",GL.renderbuffers)}function _emscripten_glGenTextures(n,textures){__glGenObject(n,textures,"createTexture",GL.textures)}function _emscripten_glGenVertexArraysOES(n,arrays){__glGenObject(n,arrays,"createVertexArray",GL.vaos)}function _emscripten_glGenerateMipmap(x0){GLctx.generateMipmap(x0)}function __glGetActiveAttribOrUniform(funcName,program,index,bufSize,length,size,type,name){program=GL.programs[program];var info=GLctx[funcName](program,index);if(info){var numBytesWrittenExclNull=name&&stringToUTF8(info.name,name,bufSize);length&&(HEAP32[length>>2]=numBytesWrittenExclNull),size&&(HEAP32[size>>2]=info.size),type&&(HEAP32[type>>2]=info.type)}}function _emscripten_glGetActiveAttrib(program,index,bufSize,length,size,type,name){__glGetActiveAttribOrUniform("getActiveAttrib",program,index,bufSize,length,size,type,name)}function _emscripten_glGetActiveUniform(program,index,bufSize,length,size,type,name){__glGetActiveAttribOrUniform("getActiveUniform",program,index,bufSize,length,size,type,name)}function _emscripten_glGetAttachedShaders(program,maxCount,count,shaders){var result=GLctx.getAttachedShaders(GL.programs[program]),len=result.length;len>maxCount&&(len=maxCount),HEAP32[count>>2]=len;for(var i=0;i<len;++i){var id=GL.shaders.indexOf(result[i]);HEAP32[shaders+4*i>>2]=id}}function _emscripten_glGetAttribLocation(program,name){return GLctx.getAttribLocation(GL.programs[program],UTF8ToString(name))}function writeI53ToI64(ptr,num){HEAPU32[ptr>>2]=num,HEAPU32[ptr+4>>2]=(num-HEAPU32[ptr>>2])/4294967296}function emscriptenWebGLGet(name_,p,type){if(p){var ret=void 0;switch(name_){case 36346:ret=1;break;case 36344:return void(0!=type&&1!=type&&GL.recordError(1280));case 36345:ret=0;break;case 34466:var formats=GLctx.getParameter(34467);ret=formats?formats.length:0}if(void 0===ret){var result=GLctx.getParameter(name_);switch(typeof result){case"number":ret=result;break;case"boolean":ret=result?1:0;break;case"string":return void GL.recordError(1280);case"object":if(null===result)switch(name_){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 34068:ret=0;break;default:return void GL.recordError(1280)}else{if(result instanceof Float32Array||result instanceof Uint32Array||result instanceof Int32Array||result instanceof Array){for(var i=0;i<result.length;++i)switch(type){case 0:HEAP32[p+4*i>>2]=result[i];break;case 2:HEAPF32[p+4*i>>2]=result[i];break;case 4:HEAP8[p+i|0]=result[i]?1:0}return}try{ret=0|result.name}catch(e){return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+type+"v: Unknown object returned from WebGL getParameter("+name_+")! (error: "+e+")")}}break;default:return GL.recordError(1280),void err("GL_INVALID_ENUM in glGet"+type+"v: Native code calling glGet"+type+"v("+name_+") and it returns "+result+" of type "+typeof result+"!")}}switch(type){case 1:writeI53ToI64(p,ret);break;case 0:HEAP32[p>>2]=ret;break;case 2:HEAPF32[p>>2]=ret;break;case 4:HEAP8[p|0]=ret?1:0}}else GL.recordError(1281)}function _emscripten_glGetBooleanv(name_,p){emscriptenWebGLGet(name_,p,4)}function _emscripten_glGetBufferParameteriv(target,value,data){data?HEAP32[data>>2]=GLctx.getBufferParameter(target,value):GL.recordError(1281)}function _emscripten_glGetError(){var error=GLctx.getError()||GL.lastError;return GL.lastError=0,error}function _emscripten_glGetFloatv(name_,p){emscriptenWebGLGet(name_,p,2)}function _emscripten_glGetFramebufferAttachmentParameteriv(target,attachment,pname,params){var result=GLctx.getFramebufferAttachmentParameter(target,attachment,pname);(result instanceof WebGLRenderbuffer||result instanceof WebGLTexture)&&(result=0|result.name),HEAP32[params>>2]=result}function _emscripten_glGetIntegerv(name_,p){emscriptenWebGLGet(name_,p,0)}function _emscripten_glGetProgramInfoLog(program,maxLength,length,infoLog){var log=GLctx.getProgramInfoLog(GL.programs[program]);null===log&&(log="(unknown error)");var numBytesWrittenExclNull=maxLength>0&&infoLog?stringToUTF8(log,infoLog,maxLength):0;length&&(HEAP32[length>>2]=numBytesWrittenExclNull)}function _emscripten_glGetProgramiv(program,pname,p){if(p)if(program>=GL.counter)GL.recordError(1281);else if(program=GL.programs[program],35716==pname){var log=GLctx.getProgramInfoLog(program);null===log&&(log="(unknown error)"),HEAP32[p>>2]=log.length+1}else if(35719==pname){if(!program.maxUniformLength)for(var i=0;i<GLctx.getProgramParameter(program,35718);++i)program.maxUniformLength=Math.max(program.maxUniformLength,GLctx.getActiveUniform(program,i).name.length+1);HEAP32[p>>2]=program.maxUniformLength}else if(35722==pname){if(!program.maxAttributeLength)for(i=0;i<GLctx.getProgramParameter(program,35721);++i)program.maxAttributeLength=Math.max(program.maxAttributeLength,GLctx.getActiveAttrib(program,i).name.length+1);HEAP32[p>>2]=program.maxAttributeLength}else if(35381==pname){if(!program.maxUniformBlockNameLength)for(i=0;i<GLctx.getProgramParameter(program,35382);++i)program.maxUniformBlockNameLength=Math.max(program.maxUniformBlockNameLength,GLctx.getActiveUniformBlockName(program,i).length+1);HEAP32[p>>2]=program.maxUniformBlockNameLength}else HEAP32[p>>2]=GLctx.getProgramParameter(program,pname);else GL.recordError(1281)}function _emscripten_glGetQueryObjecti64vEXT(id,pname,params){if(params){var param,query=GL.queries[id];writeI53ToI64(params,"boolean"==typeof(param=GLctx.disjointTimerQueryExt.getQueryObjectEXT(query,pname))?param?1:0:param)}else GL.recordError(1281)}function _emscripten_glGetQueryObjectivEXT(id,pname,params){if(params){var ret,query=GL.queries[id],param=GLctx.disjointTimerQueryExt.getQueryObjectEXT(query,pname);ret="boolean"==typeof param?param?1:0:param,HEAP32[params>>2]=ret}else GL.recordError(1281)}function _emscripten_glGetQueryObjectui64vEXT(id,pname,params){if(params){var param,query=GL.queries[id];writeI53ToI64(params,"boolean"==typeof(param=GLctx.disjointTimerQueryExt.getQueryObjectEXT(query,pname))?param?1:0:param)}else GL.recordError(1281)}function _emscripten_glGetQueryObjectuivEXT(id,pname,params){if(params){var ret,query=GL.queries[id],param=GLctx.disjointTimerQueryExt.getQueryObjectEXT(query,pname);ret="boolean"==typeof param?param?1:0:param,HEAP32[params>>2]=ret}else GL.recordError(1281)}function _emscripten_glGetQueryivEXT(target,pname,params){params?HEAP32[params>>2]=GLctx.disjointTimerQueryExt.getQueryEXT(target,pname):GL.recordError(1281)}function _emscripten_glGetRenderbufferParameteriv(target,pname,params){params?HEAP32[params>>2]=GLctx.getRenderbufferParameter(target,pname):GL.recordError(1281)}function _emscripten_glGetShaderInfoLog(shader,maxLength,length,infoLog){var log=GLctx.getShaderInfoLog(GL.shaders[shader]);null===log&&(log="(unknown error)");var numBytesWrittenExclNull=maxLength>0&&infoLog?stringToUTF8(log,infoLog,maxLength):0;length&&(HEAP32[length>>2]=numBytesWrittenExclNull)}function _emscripten_glGetShaderPrecisionFormat(shaderType,precisionType,range,precision){var result=GLctx.getShaderPrecisionFormat(shaderType,precisionType);HEAP32[range>>2]=result.rangeMin,HEAP32[range+4>>2]=result.rangeMax,HEAP32[precision>>2]=result.precision}function _emscripten_glGetShaderSource(shader,bufSize,length,source){var result=GLctx.getShaderSource(GL.shaders[shader]);if(result){var numBytesWrittenExclNull=bufSize>0&&source?stringToUTF8(result,source,bufSize):0;length&&(HEAP32[length>>2]=numBytesWrittenExclNull)}}function _emscripten_glGetShaderiv(shader,pname,p){if(p)if(35716==pname){var log=GLctx.getShaderInfoLog(GL.shaders[shader]);null===log&&(log="(unknown error)");var logLength=log?log.length+1:0;HEAP32[p>>2]=logLength}else if(35720==pname){var source=GLctx.getShaderSource(GL.shaders[shader]),sourceLength=source?source.length+1:0;HEAP32[p>>2]=sourceLength}else HEAP32[p>>2]=GLctx.getShaderParameter(GL.shaders[shader],pname);else GL.recordError(1281)}function stringToNewUTF8(jsString){var length=lengthBytesUTF8(jsString)+1,cString=_malloc(length);return stringToUTF8(jsString,cString,length),cString}function _emscripten_glGetString(name_){var ret=GL.stringCache[name_];if(!ret){switch(name_){case 7939:var exts=GLctx.getSupportedExtensions()||[];ret=stringToNewUTF8((exts=exts.concat(exts.map((function(e){return"GL_"+e})))).join(" "));break;case 7936:case 7937:case 37445:case 37446:var s=GLctx.getParameter(name_);s||GL.recordError(1280),ret=s&&stringToNewUTF8(s);break;case 7938:var glVersion=GLctx.getParameter(7938);ret=stringToNewUTF8(glVersion="OpenGL ES 2.0 ("+glVersion+")");break;case 35724:var glslVersion=GLctx.getParameter(35724),ver_num=glslVersion.match(/^WebGL GLSL ES ([0-9]\.[0-9][0-9]?)(?:$| .*)/);null!==ver_num&&(3==ver_num[1].length&&(ver_num[1]=ver_num[1]+"0"),glslVersion="OpenGL ES GLSL ES "+ver_num[1]+" ("+glslVersion+")"),ret=stringToNewUTF8(glslVersion);break;default:GL.recordError(1280)}GL.stringCache[name_]=ret}return ret}function _emscripten_glGetTexParameterfv(target,pname,params){params?HEAPF32[params>>2]=GLctx.getTexParameter(target,pname):GL.recordError(1281)}function _emscripten_glGetTexParameteriv(target,pname,params){params?HEAP32[params>>2]=GLctx.getTexParameter(target,pname):GL.recordError(1281)}function jstoi_q(str){return parseInt(str)}function webglGetLeftBracePos(name){return"]"==name.slice(-1)&&name.lastIndexOf("[")}function webglPrepareUniformLocationsBeforeFirstUse(program){var i,j,uniformLocsById=program.uniformLocsById,uniformSizeAndIdsByName=program.uniformSizeAndIdsByName;if(!uniformLocsById)for(program.uniformLocsById=uniformLocsById={},program.uniformArrayNamesById={},i=0;i<GLctx.getProgramParameter(program,35718);++i){var u=GLctx.getActiveUniform(program,i),nm=u.name,sz=u.size,lb=webglGetLeftBracePos(nm),arrayName=lb>0?nm.slice(0,lb):nm,id=program.uniformIdCounter;for(program.uniformIdCounter+=sz,uniformSizeAndIdsByName[arrayName]=[sz,id],j=0;j<sz;++j)uniformLocsById[id]=j,program.uniformArrayNamesById[id++]=arrayName}}function _emscripten_glGetUniformLocation(program,name){if(name=UTF8ToString(name),program=GL.programs[program]){webglPrepareUniformLocationsBeforeFirstUse(program);var uniformLocsById=program.uniformLocsById,arrayIndex=0,uniformBaseName=name,leftBrace=webglGetLeftBracePos(name);leftBrace>0&&(arrayIndex=jstoi_q(name.slice(leftBrace+1))>>>0,uniformBaseName=name.slice(0,leftBrace));var sizeAndId=program.uniformSizeAndIdsByName[uniformBaseName];if(sizeAndId&&arrayIndex<sizeAndId[0]&&(uniformLocsById[arrayIndex+=sizeAndId[1]]=uniformLocsById[arrayIndex]||GLctx.getUniformLocation(program,name)))return arrayIndex}else GL.recordError(1281);return-1}function webglGetUniformLocation(location){var p=GLctx.currentProgram;if(p){var webglLoc=p.uniformLocsById[location];return"number"==typeof webglLoc&&(p.uniformLocsById[location]=webglLoc=GLctx.getUniformLocation(p,p.uniformArrayNamesById[location]+(webglLoc>0?"["+webglLoc+"]":""))),webglLoc}GL.recordError(1282)}function emscriptenWebGLGetUniform(program,location,params,type){if(params){webglPrepareUniformLocationsBeforeFirstUse(program=GL.programs[program]);var data=GLctx.getUniform(program,webglGetUniformLocation(location));if("number"==typeof data||"boolean"==typeof data)switch(type){case 0:HEAP32[params>>2]=data;break;case 2:HEAPF32[params>>2]=data}else for(var i=0;i<data.length;i++)switch(type){case 0:HEAP32[params+4*i>>2]=data[i];break;case 2:HEAPF32[params+4*i>>2]=data[i]}}else GL.recordError(1281)}function _emscripten_glGetUniformfv(program,location,params){emscriptenWebGLGetUniform(program,location,params,2)}function _emscripten_glGetUniformiv(program,location,params){emscriptenWebGLGetUniform(program,location,params,0)}function _emscripten_glGetVertexAttribPointerv(index,pname,pointer){pointer?HEAP32[pointer>>2]=GLctx.getVertexAttribOffset(index,pname):GL.recordError(1281)}function emscriptenWebGLGetVertexAttrib(index,pname,params,type){if(params){var data=GLctx.getVertexAttrib(index,pname);if(34975==pname)HEAP32[params>>2]=data&&data.name;else if("number"==typeof data||"boolean"==typeof data)switch(type){case 0:HEAP32[params>>2]=data;break;case 2:HEAPF32[params>>2]=data;break;case 5:HEAP32[params>>2]=Math.fround(data)}else for(var i=0;i<data.length;i++)switch(type){case 0:HEAP32[params+4*i>>2]=data[i];break;case 2:HEAPF32[params+4*i>>2]=data[i];break;case 5:HEAP32[params+4*i>>2]=Math.fround(data[i])}}else GL.recordError(1281)}function _emscripten_glGetVertexAttribfv(index,pname,params){emscriptenWebGLGetVertexAttrib(index,pname,params,2)}function _emscripten_glGetVertexAttribiv(index,pname,params){emscriptenWebGLGetVertexAttrib(index,pname,params,5)}function _emscripten_glHint(x0,x1){GLctx.hint(x0,x1)}function _emscripten_glIsBuffer(buffer){var b=GL.buffers[buffer];return b?GLctx.isBuffer(b):0}function _emscripten_glIsEnabled(x0){return GLctx.isEnabled(x0)}function _emscripten_glIsFramebuffer(framebuffer){var fb=GL.framebuffers[framebuffer];return fb?GLctx.isFramebuffer(fb):0}function _emscripten_glIsProgram(program){return(program=GL.programs[program])?GLctx.isProgram(program):0}function _emscripten_glIsQueryEXT(id){var query=GL.queries[id];return query?GLctx.disjointTimerQueryExt.isQueryEXT(query):0}function _emscripten_glIsRenderbuffer(renderbuffer){var rb=GL.renderbuffers[renderbuffer];return rb?GLctx.isRenderbuffer(rb):0}function _emscripten_glIsShader(shader){var s=GL.shaders[shader];return s?GLctx.isShader(s):0}function _emscripten_glIsTexture(id){var texture=GL.textures[id];return texture?GLctx.isTexture(texture):0}function _emscripten_glIsVertexArrayOES(array){var vao=GL.vaos[array];return vao?GLctx.isVertexArray(vao):0}function _emscripten_glLineWidth(x0){GLctx.lineWidth(x0)}function _emscripten_glLinkProgram(program){program=GL.programs[program],GLctx.linkProgram(program),program.uniformLocsById=0,program.uniformSizeAndIdsByName={}}function _emscripten_glPixelStorei(pname,param){3317==pname&&(GL.unpackAlignment=param),GLctx.pixelStorei(pname,param)}function _emscripten_glPolygonOffset(x0,x1){GLctx.polygonOffset(x0,x1)}function _emscripten_glQueryCounterEXT(id,target){GLctx.disjointTimerQueryExt.queryCounterEXT(GL.queries[id],target)}function computeUnpackAlignedImageSize(width,height,sizePerPixel,alignment){var y;return height*(width*sizePerPixel+(y=alignment)-1&-y)}function __colorChannelsInGlTextureFormat(format){return{5:3,6:4,8:2,29502:3,29504:4}[format-6402]||1}function heapObjectForWebGLType(type){return 1==(type-=5120)?HEAPU8:4==type?HEAP32:6==type?HEAPF32:5==type||28922==type?HEAPU32:HEAPU16}function heapAccessShiftForWebGLHeap(heap){return 31-Math.clz32(heap.BYTES_PER_ELEMENT)}function emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,internalFormat){var heap=heapObjectForWebGLType(type),shift=heapAccessShiftForWebGLHeap(heap),byteSize=1<<shift,bytes=computeUnpackAlignedImageSize(width,height,__colorChannelsInGlTextureFormat(format)*byteSize,GL.unpackAlignment);return heap.subarray(pixels>>shift,pixels+bytes>>shift)}function _emscripten_glReadPixels(x,y,width,height,format,type,pixels){var pixelData=emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,format);pixelData?GLctx.readPixels(x,y,width,height,format,type,pixelData):GL.recordError(1280)}function _emscripten_glReleaseShaderCompiler(){}function _emscripten_glRenderbufferStorage(x0,x1,x2,x3){GLctx.renderbufferStorage(x0,x1,x2,x3)}function _emscripten_glSampleCoverage(value,invert){GLctx.sampleCoverage(value,!!invert)}function _emscripten_glScissor(x0,x1,x2,x3){GLctx.scissor(x0,x1,x2,x3)}function _emscripten_glShaderBinary(){GL.recordError(1280)}function _emscripten_glShaderSource(shader,count,string,length){var source=GL.getSource(shader,count,string,length);GLctx.shaderSource(GL.shaders[shader],source)}function _emscripten_glStencilFunc(x0,x1,x2){GLctx.stencilFunc(x0,x1,x2)}function _emscripten_glStencilFuncSeparate(x0,x1,x2,x3){GLctx.stencilFuncSeparate(x0,x1,x2,x3)}function _emscripten_glStencilMask(x0){GLctx.stencilMask(x0)}function _emscripten_glStencilMaskSeparate(x0,x1){GLctx.stencilMaskSeparate(x0,x1)}function _emscripten_glStencilOp(x0,x1,x2){GLctx.stencilOp(x0,x1,x2)}function _emscripten_glStencilOpSeparate(x0,x1,x2,x3){GLctx.stencilOpSeparate(x0,x1,x2,x3)}function _emscripten_glTexImage2D(target,level,internalFormat,width,height,border,format,type,pixels){GLctx.texImage2D(target,level,internalFormat,width,height,border,format,type,pixels?emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,internalFormat):null)}function _emscripten_glTexParameterf(x0,x1,x2){GLctx.texParameterf(x0,x1,x2)}function _emscripten_glTexParameterfv(target,pname,params){var param=HEAPF32[params>>2];GLctx.texParameterf(target,pname,param)}function _emscripten_glTexParameteri(x0,x1,x2){GLctx.texParameteri(x0,x1,x2)}function _emscripten_glTexParameteriv(target,pname,params){var param=HEAP32[params>>2];GLctx.texParameteri(target,pname,param)}function _emscripten_glTexSubImage2D(target,level,xoffset,yoffset,width,height,format,type,pixels){var pixelData=null;pixels&&(pixelData=emscriptenWebGLGetTexPixelData(type,format,width,height,pixels,0)),GLctx.texSubImage2D(target,level,xoffset,yoffset,width,height,format,type,pixelData)}function _emscripten_glUniform1f(location,v0){GLctx.uniform1f(webglGetUniformLocation(location),v0)}var miniTempWebGLFloatBuffers=[];function _emscripten_glUniform1fv(location,count,value){if(count<=288)for(var view=miniTempWebGLFloatBuffers[count-1],i=0;i<count;++i)view[i]=HEAPF32[value+4*i>>2];else view=HEAPF32.subarray(value>>2,value+4*count>>2);GLctx.uniform1fv(webglGetUniformLocation(location),view)}function _emscripten_glUniform1i(location,v0){GLctx.uniform1i(webglGetUniformLocation(location),v0)}var __miniTempWebGLIntBuffers=[];function _emscripten_glUniform1iv(location,count,value){if(count<=288)for(var view=__miniTempWebGLIntBuffers[count-1],i=0;i<count;++i)view[i]=HEAP32[value+4*i>>2];else view=HEAP32.subarray(value>>2,value+4*count>>2);GLctx.uniform1iv(webglGetUniformLocation(location),view)}function _emscripten_glUniform2f(location,v0,v1){GLctx.uniform2f(webglGetUniformLocation(location),v0,v1)}function _emscripten_glUniform2fv(location,count,value){if(count<=144)for(var view=miniTempWebGLFloatBuffers[2*count-1],i=0;i<2*count;i+=2)view[i]=HEAPF32[value+4*i>>2],view[i+1]=HEAPF32[value+(4*i+4)>>2];else view=HEAPF32.subarray(value>>2,value+8*count>>2);GLctx.uniform2fv(webglGetUniformLocation(location),view)}function _emscripten_glUniform2i(location,v0,v1){GLctx.uniform2i(webglGetUniformLocation(location),v0,v1)}function _emscripten_glUniform2iv(location,count,value){if(count<=144)for(var view=__miniTempWebGLIntBuffers[2*count-1],i=0;i<2*count;i+=2)view[i]=HEAP32[value+4*i>>2],view[i+1]=HEAP32[value+(4*i+4)>>2];else view=HEAP32.subarray(value>>2,value+8*count>>2);GLctx.uniform2iv(webglGetUniformLocation(location),view)}function _emscripten_glUniform3f(location,v0,v1,v2){GLctx.uniform3f(webglGetUniformLocation(location),v0,v1,v2)}function _emscripten_glUniform3fv(location,count,value){if(count<=96)for(var view=miniTempWebGLFloatBuffers[3*count-1],i=0;i<3*count;i+=3)view[i]=HEAPF32[value+4*i>>2],view[i+1]=HEAPF32[value+(4*i+4)>>2],view[i+2]=HEAPF32[value+(4*i+8)>>2];else view=HEAPF32.subarray(value>>2,value+12*count>>2);GLctx.uniform3fv(webglGetUniformLocation(location),view)}function _emscripten_glUniform3i(location,v0,v1,v2){GLctx.uniform3i(webglGetUniformLocation(location),v0,v1,v2)}function _emscripten_glUniform3iv(location,count,value){if(count<=96)for(var view=__miniTempWebGLIntBuffers[3*count-1],i=0;i<3*count;i+=3)view[i]=HEAP32[value+4*i>>2],view[i+1]=HEAP32[value+(4*i+4)>>2],view[i+2]=HEAP32[value+(4*i+8)>>2];else view=HEAP32.subarray(value>>2,value+12*count>>2);GLctx.uniform3iv(webglGetUniformLocation(location),view)}function _emscripten_glUniform4f(location,v0,v1,v2,v3){GLctx.uniform4f(webglGetUniformLocation(location),v0,v1,v2,v3)}function _emscripten_glUniform4fv(location,count,value){if(count<=72){var view=miniTempWebGLFloatBuffers[4*count-1],heap=HEAPF32;value>>=2;for(var i=0;i<4*count;i+=4){var dst=value+i;view[i]=heap[dst],view[i+1]=heap[dst+1],view[i+2]=heap[dst+2],view[i+3]=heap[dst+3]}}else view=HEAPF32.subarray(value>>2,value+16*count>>2);GLctx.uniform4fv(webglGetUniformLocation(location),view)}function _emscripten_glUniform4i(location,v0,v1,v2,v3){GLctx.uniform4i(webglGetUniformLocation(location),v0,v1,v2,v3)}function _emscripten_glUniform4iv(location,count,value){if(count<=72)for(var view=__miniTempWebGLIntBuffers[4*count-1],i=0;i<4*count;i+=4)view[i]=HEAP32[value+4*i>>2],view[i+1]=HEAP32[value+(4*i+4)>>2],view[i+2]=HEAP32[value+(4*i+8)>>2],view[i+3]=HEAP32[value+(4*i+12)>>2];else view=HEAP32.subarray(value>>2,value+16*count>>2);GLctx.uniform4iv(webglGetUniformLocation(location),view)}function _emscripten_glUniformMatrix2fv(location,count,transpose,value){if(count<=72)for(var view=miniTempWebGLFloatBuffers[4*count-1],i=0;i<4*count;i+=4)view[i]=HEAPF32[value+4*i>>2],view[i+1]=HEAPF32[value+(4*i+4)>>2],view[i+2]=HEAPF32[value+(4*i+8)>>2],view[i+3]=HEAPF32[value+(4*i+12)>>2];else view=HEAPF32.subarray(value>>2,value+16*count>>2);GLctx.uniformMatrix2fv(webglGetUniformLocation(location),!!transpose,view)}function _emscripten_glUniformMatrix3fv(location,count,transpose,value){if(count<=32)for(var view=miniTempWebGLFloatBuffers[9*count-1],i=0;i<9*count;i+=9)view[i]=HEAPF32[value+4*i>>2],view[i+1]=HEAPF32[value+(4*i+4)>>2],view[i+2]=HEAPF32[value+(4*i+8)>>2],view[i+3]=HEAPF32[value+(4*i+12)>>2],view[i+4]=HEAPF32[value+(4*i+16)>>2],view[i+5]=HEAPF32[value+(4*i+20)>>2],view[i+6]=HEAPF32[value+(4*i+24)>>2],view[i+7]=HEAPF32[value+(4*i+28)>>2],view[i+8]=HEAPF32[value+(4*i+32)>>2];else view=HEAPF32.subarray(value>>2,value+36*count>>2);GLctx.uniformMatrix3fv(webglGetUniformLocation(location),!!transpose,view)}function _emscripten_glUniformMatrix4fv(location,count,transpose,value){if(count<=18){var view=miniTempWebGLFloatBuffers[16*count-1],heap=HEAPF32;value>>=2;for(var i=0;i<16*count;i+=16){var dst=value+i;view[i]=heap[dst],view[i+1]=heap[dst+1],view[i+2]=heap[dst+2],view[i+3]=heap[dst+3],view[i+4]=heap[dst+4],view[i+5]=heap[dst+5],view[i+6]=heap[dst+6],view[i+7]=heap[dst+7],view[i+8]=heap[dst+8],view[i+9]=heap[dst+9],view[i+10]=heap[dst+10],view[i+11]=heap[dst+11],view[i+12]=heap[dst+12],view[i+13]=heap[dst+13],view[i+14]=heap[dst+14],view[i+15]=heap[dst+15]}}else view=HEAPF32.subarray(value>>2,value+64*count>>2);GLctx.uniformMatrix4fv(webglGetUniformLocation(location),!!transpose,view)}function _emscripten_glUseProgram(program){program=GL.programs[program],GLctx.useProgram(program),GLctx.currentProgram=program}function _emscripten_glValidateProgram(program){GLctx.validateProgram(GL.programs[program])}function _emscripten_glVertexAttrib1f(x0,x1){GLctx.vertexAttrib1f(x0,x1)}function _emscripten_glVertexAttrib1fv(index,v){GLctx.vertexAttrib1f(index,HEAPF32[v>>2])}function _emscripten_glVertexAttrib2f(x0,x1,x2){GLctx.vertexAttrib2f(x0,x1,x2)}function _emscripten_glVertexAttrib2fv(index,v){GLctx.vertexAttrib2f(index,HEAPF32[v>>2],HEAPF32[v+4>>2])}function _emscripten_glVertexAttrib3f(x0,x1,x2,x3){GLctx.vertexAttrib3f(x0,x1,x2,x3)}function _emscripten_glVertexAttrib3fv(index,v){GLctx.vertexAttrib3f(index,HEAPF32[v>>2],HEAPF32[v+4>>2],HEAPF32[v+8>>2])}function _emscripten_glVertexAttrib4f(x0,x1,x2,x3,x4){GLctx.vertexAttrib4f(x0,x1,x2,x3,x4)}function _emscripten_glVertexAttrib4fv(index,v){GLctx.vertexAttrib4f(index,HEAPF32[v>>2],HEAPF32[v+4>>2],HEAPF32[v+8>>2],HEAPF32[v+12>>2])}function _emscripten_glVertexAttribDivisorANGLE(index,divisor){GLctx.vertexAttribDivisor(index,divisor)}function _emscripten_glVertexAttribPointer(index,size,type,normalized,stride,ptr){GLctx.vertexAttribPointer(index,size,type,!!normalized,stride,ptr)}function _emscripten_glViewport(x0,x1,x2,x3){GLctx.viewport(x0,x1,x2,x3)}function _emscripten_has_asyncify(){return 0}function _emscripten_memcpy_big(dest,src,num){HEAPU8.copyWithin(dest,src,src+num)}function doRequestFullscreen(target,strategy){return JSEvents.fullscreenEnabled()?(target=findEventTarget(target))?target.requestFullscreen||target.webkitRequestFullscreen?JSEvents.canPerformEventHandlerRequests()?_JSEvents_requestFullscreen(target,strategy):strategy.deferUntilInEventHandler?(JSEvents.deferCall(_JSEvents_requestFullscreen,1,[target,strategy]),1):-2:-3:-4:-1}function _emscripten_request_fullscreen_strategy(target,deferUntilInEventHandler,fullscreenStrategy){return doRequestFullscreen(target,{scaleMode:HEAP32[fullscreenStrategy>>2],canvasResolutionScaleMode:HEAP32[fullscreenStrategy+4>>2],filteringMode:HEAP32[fullscreenStrategy+8>>2],deferUntilInEventHandler:deferUntilInEventHandler,canvasResizedCallback:HEAP32[fullscreenStrategy+12>>2],canvasResizedCallbackUserData:HEAP32[fullscreenStrategy+16>>2]})}function _emscripten_request_pointerlock(target,deferUntilInEventHandler){return(target=findEventTarget(target))?target.requestPointerLock||target.msRequestPointerLock?JSEvents.canPerformEventHandlerRequests()?requestPointerLock(target):deferUntilInEventHandler?(JSEvents.deferCall(requestPointerLock,2,[target]),1):-2:-1:-4}function emscripten_realloc_buffer(size){try{return wasmMemory.grow(size-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch(e){}}function _emscripten_resize_heap(requestedSize){var oldSize=HEAPU8.length;if((requestedSize>>>=0)>2147483648)return!1;for(var cutDown=1;cutDown<=4;cutDown*=2){var overGrownHeapSize=oldSize*(1+.2/cutDown);if(overGrownHeapSize=Math.min(overGrownHeapSize,requestedSize+100663296),emscripten_realloc_buffer(Math.min(2147483648,alignUp(Math.max(requestedSize,overGrownHeapSize),65536))))return!0}return!1}function _emscripten_sample_gamepad_data(){return(JSEvents.lastGamepadState=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():null)?0:-1}function registerBeforeUnloadEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString){var eventHandler={target:findEventTarget(target),eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event,confirmationMessage=wasmTable.get(callbackfunc)(eventTypeId,0,userData);if(confirmationMessage&&(confirmationMessage=UTF8ToString(confirmationMessage)),confirmationMessage)return e.preventDefault(),e.returnValue=confirmationMessage,confirmationMessage},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_beforeunload_callback_on_thread(userData,callbackfunc,targetThread){return"undefined"==typeof onbeforeunload?-1:1!==targetThread?-5:(registerBeforeUnloadEventCallback(2,userData,!0,callbackfunc,28,"beforeunload"),0)}function registerFocusEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.focusEvent||(JSEvents.focusEvent=_malloc(256));var eventHandler={target:findEventTarget(target),eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event,nodeName=JSEvents.getNodeNameForTarget(e.target),id=e.target.id?e.target.id:"",focusEvent=JSEvents.focusEvent;stringToUTF8(nodeName,focusEvent+0,128),stringToUTF8(id,focusEvent+128,128),wasmTable.get(callbackfunc)(eventTypeId,focusEvent,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_blur_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerFocusEventCallback(target,userData,useCapture,callbackfunc,12,"blur",targetThread),0}function _emscripten_set_element_css_size(target,width,height){return(target=findEventTarget(target))?(target.style.width=width+"px",target.style.height=height+"px",0):-4}function _emscripten_set_focus_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerFocusEventCallback(target,userData,useCapture,callbackfunc,13,"focus",targetThread),0}function fillFullscreenChangeEventData(eventStruct){var fullscreenElement=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement,isFullscreen=!!fullscreenElement;HEAP32[eventStruct>>2]=isFullscreen,HEAP32[eventStruct+4>>2]=JSEvents.fullscreenEnabled();var reportedElement=isFullscreen?fullscreenElement:JSEvents.previousFullscreenElement,nodeName=JSEvents.getNodeNameForTarget(reportedElement),id=reportedElement&&reportedElement.id?reportedElement.id:"";stringToUTF8(nodeName,eventStruct+8,128),stringToUTF8(id,eventStruct+136,128),HEAP32[eventStruct+264>>2]=reportedElement?reportedElement.clientWidth:0,HEAP32[eventStruct+268>>2]=reportedElement?reportedElement.clientHeight:0,HEAP32[eventStruct+272>>2]=screen.width,HEAP32[eventStruct+276>>2]=screen.height,isFullscreen&&(JSEvents.previousFullscreenElement=fullscreenElement)}function registerFullscreenChangeEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.fullscreenChangeEvent||(JSEvents.fullscreenChangeEvent=_malloc(280));var eventHandler={target:target,eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event,fullscreenChangeEvent=JSEvents.fullscreenChangeEvent;fillFullscreenChangeEventData(fullscreenChangeEvent),wasmTable.get(callbackfunc)(eventTypeId,fullscreenChangeEvent,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_fullscreenchange_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return JSEvents.fullscreenEnabled()?(target=findEventTarget(target))?(registerFullscreenChangeEventCallback(target,userData,useCapture,callbackfunc,19,"fullscreenchange",targetThread),registerFullscreenChangeEventCallback(target,userData,useCapture,callbackfunc,19,"webkitfullscreenchange",targetThread),0):-4:-1}function registerGamepadEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.gamepadEvent||(JSEvents.gamepadEvent=_malloc(1432));var eventHandler={target:findEventTarget(target),allowsDeferredCalls:!0,eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event,gamepadEvent=JSEvents.gamepadEvent;fillGamepadEventData(gamepadEvent,e.gamepad),wasmTable.get(callbackfunc)(eventTypeId,gamepadEvent,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_gamepadconnected_callback_on_thread(userData,useCapture,callbackfunc,targetThread){return navigator.getGamepads||navigator.webkitGetGamepads?(registerGamepadEventCallback(2,userData,useCapture,callbackfunc,26,"gamepadconnected",targetThread),0):-1}function _emscripten_set_gamepaddisconnected_callback_on_thread(userData,useCapture,callbackfunc,targetThread){return navigator.getGamepads||navigator.webkitGetGamepads?(registerGamepadEventCallback(2,userData,useCapture,callbackfunc,27,"gamepaddisconnected",targetThread),0):-1}function registerKeyEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.keyEvent||(JSEvents.keyEvent=_malloc(164));var eventHandler={target:findEventTarget(target),allowsDeferredCalls:!0,eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(e){var keyEventData=JSEvents.keyEvent,idx=keyEventData>>2;HEAP32[idx+0]=e.location,HEAP32[idx+1]=e.ctrlKey,HEAP32[idx+2]=e.shiftKey,HEAP32[idx+3]=e.altKey,HEAP32[idx+4]=e.metaKey,HEAP32[idx+5]=e.repeat,HEAP32[idx+6]=e.charCode,HEAP32[idx+7]=e.keyCode,HEAP32[idx+8]=e.which,stringToUTF8(e.key||"",keyEventData+36,32),stringToUTF8(e.code||"",keyEventData+68,32),stringToUTF8(e.char||"",keyEventData+100,32),stringToUTF8(e.locale||"",keyEventData+132,32),wasmTable.get(callbackfunc)(eventTypeId,keyEventData,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_keydown_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerKeyEventCallback(target,userData,useCapture,callbackfunc,2,"keydown",targetThread),0}function _emscripten_set_keypress_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerKeyEventCallback(target,userData,useCapture,callbackfunc,1,"keypress",targetThread),0}function _emscripten_set_keyup_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerKeyEventCallback(target,userData,useCapture,callbackfunc,3,"keyup",targetThread),0}function _emscripten_set_main_loop_arg(func,arg,fps,simulateInfiniteLoop){setMainLoop((function(){wasmTable.get(func)(arg)}),fps,simulateInfiniteLoop,arg)}function fillMouseEventData(eventStruct,e,target){var idx=eventStruct>>2;HEAP32[idx+0]=e.screenX,HEAP32[idx+1]=e.screenY,HEAP32[idx+2]=e.clientX,HEAP32[idx+3]=e.clientY,HEAP32[idx+4]=e.ctrlKey,HEAP32[idx+5]=e.shiftKey,HEAP32[idx+6]=e.altKey,HEAP32[idx+7]=e.metaKey,HEAP16[2*idx+16]=e.button,HEAP16[2*idx+17]=e.buttons,HEAP32[idx+9]=e.movementX,HEAP32[idx+10]=e.movementY;var rect=getBoundingClientRect(target);HEAP32[idx+11]=e.clientX-rect.left,HEAP32[idx+12]=e.clientY-rect.top}function registerMouseEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.mouseEvent||(JSEvents.mouseEvent=_malloc(64));var eventHandler={target:target=findEventTarget(target),allowsDeferredCalls:"mousemove"!=eventTypeString&&"mouseenter"!=eventTypeString&&"mouseleave"!=eventTypeString,eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event;fillMouseEventData(JSEvents.mouseEvent,e,target),wasmTable.get(callbackfunc)(eventTypeId,JSEvents.mouseEvent,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_mousedown_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerMouseEventCallback(target,userData,useCapture,callbackfunc,5,"mousedown",targetThread),0}function _emscripten_set_mouseenter_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerMouseEventCallback(target,userData,useCapture,callbackfunc,33,"mouseenter",targetThread),0}function _emscripten_set_mouseleave_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerMouseEventCallback(target,userData,useCapture,callbackfunc,34,"mouseleave",targetThread),0}function _emscripten_set_mousemove_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerMouseEventCallback(target,userData,useCapture,callbackfunc,8,"mousemove",targetThread),0}function _emscripten_set_mouseup_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerMouseEventCallback(target,userData,useCapture,callbackfunc,6,"mouseup",targetThread),0}function fillPointerlockChangeEventData(eventStruct){var pointerLockElement=document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement||document.msPointerLockElement,isPointerlocked=!!pointerLockElement;HEAP32[eventStruct>>2]=isPointerlocked;var nodeName=JSEvents.getNodeNameForTarget(pointerLockElement),id=pointerLockElement&&pointerLockElement.id?pointerLockElement.id:"";stringToUTF8(nodeName,eventStruct+4,128),stringToUTF8(id,eventStruct+132,128)}function registerPointerlockChangeEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.pointerlockChangeEvent||(JSEvents.pointerlockChangeEvent=_malloc(260));var eventHandler={target:target,eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event,pointerlockChangeEvent=JSEvents.pointerlockChangeEvent;fillPointerlockChangeEventData(pointerlockChangeEvent),wasmTable.get(callbackfunc)(eventTypeId,pointerlockChangeEvent,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_pointerlockchange_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return document&&document.body&&(document.body.requestPointerLock||document.body.mozRequestPointerLock||document.body.webkitRequestPointerLock||document.body.msRequestPointerLock)?(target=findEventTarget(target))?(registerPointerlockChangeEventCallback(target,userData,useCapture,callbackfunc,20,"pointerlockchange",targetThread),registerPointerlockChangeEventCallback(target,userData,useCapture,callbackfunc,20,"mozpointerlockchange",targetThread),registerPointerlockChangeEventCallback(target,userData,useCapture,callbackfunc,20,"webkitpointerlockchange",targetThread),registerPointerlockChangeEventCallback(target,userData,useCapture,callbackfunc,20,"mspointerlockchange",targetThread),0):-4:-1}function registerUiEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.uiEvent||(JSEvents.uiEvent=_malloc(36));var eventHandler={target:target=findEventTarget(target),eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event;if(e.target==target){var b=document.body;if(b){var uiEvent=JSEvents.uiEvent;HEAP32[uiEvent>>2]=e.detail,HEAP32[uiEvent+4>>2]=b.clientWidth,HEAP32[uiEvent+8>>2]=b.clientHeight,HEAP32[uiEvent+12>>2]=innerWidth,HEAP32[uiEvent+16>>2]=innerHeight,HEAP32[uiEvent+20>>2]=outerWidth,HEAP32[uiEvent+24>>2]=outerHeight,HEAP32[uiEvent+28>>2]=pageXOffset,HEAP32[uiEvent+32>>2]=pageYOffset,wasmTable.get(callbackfunc)(eventTypeId,uiEvent,userData)&&e.preventDefault()}}},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_resize_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerUiEventCallback(target,userData,useCapture,callbackfunc,10,"resize",targetThread),0}function registerTouchEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.touchEvent||(JSEvents.touchEvent=_malloc(1684));var eventHandler={target:target=findEventTarget(target),allowsDeferredCalls:"touchstart"==eventTypeString||"touchend"==eventTypeString,eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(e){for(var touches={},et=e.touches,i=0;i<et.length;++i){touches[(touch=et[i]).identifier]=touch}et=e.changedTouches;for(i=0;i<et.length;++i){var touch;(touch=et[i]).isChanged=1,touches[touch.identifier]=touch}et=e.targetTouches;for(i=0;i<et.length;++i)touches[et[i].identifier].onTarget=1;var touchEvent=JSEvents.touchEvent,idx=touchEvent>>2;HEAP32[idx+1]=e.ctrlKey,HEAP32[idx+2]=e.shiftKey,HEAP32[idx+3]=e.altKey,HEAP32[idx+4]=e.metaKey,idx+=5;var targetRect=getBoundingClientRect(target),numTouches=0;for(var i in touches){var t=touches[i];if(HEAP32[idx+0]=t.identifier,HEAP32[idx+1]=t.screenX,HEAP32[idx+2]=t.screenY,HEAP32[idx+3]=t.clientX,HEAP32[idx+4]=t.clientY,HEAP32[idx+5]=t.pageX,HEAP32[idx+6]=t.pageY,HEAP32[idx+7]=t.isChanged,HEAP32[idx+8]=t.onTarget,HEAP32[idx+9]=t.clientX-targetRect.left,HEAP32[idx+10]=t.clientY-targetRect.top,idx+=13,++numTouches>31)break}HEAP32[touchEvent>>2]=numTouches,wasmTable.get(callbackfunc)(eventTypeId,touchEvent,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_touchcancel_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerTouchEventCallback(target,userData,useCapture,callbackfunc,25,"touchcancel",targetThread),0}function _emscripten_set_touchend_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerTouchEventCallback(target,userData,useCapture,callbackfunc,23,"touchend",targetThread),0}function _emscripten_set_touchmove_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerTouchEventCallback(target,userData,useCapture,callbackfunc,24,"touchmove",targetThread),0}function _emscripten_set_touchstart_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return registerTouchEventCallback(target,userData,useCapture,callbackfunc,22,"touchstart",targetThread),0}function fillVisibilityChangeEventData(eventStruct){var visibilityState=["hidden","visible","prerender","unloaded"].indexOf(document.visibilityState);HEAP32[eventStruct>>2]=document.hidden,HEAP32[eventStruct+4>>2]=visibilityState}function registerVisibilityChangeEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.visibilityChangeEvent||(JSEvents.visibilityChangeEvent=_malloc(8));var eventHandler={target:target,eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event,visibilityChangeEvent=JSEvents.visibilityChangeEvent;fillVisibilityChangeEventData(visibilityChangeEvent),wasmTable.get(callbackfunc)(eventTypeId,visibilityChangeEvent,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_visibilitychange_callback_on_thread(userData,useCapture,callbackfunc,targetThread){return specialHTMLTargets[1]?(registerVisibilityChangeEventCallback(specialHTMLTargets[1],userData,useCapture,callbackfunc,21,"visibilitychange",targetThread),0):-4}function registerWheelEventCallback(target,userData,useCapture,callbackfunc,eventTypeId,eventTypeString,targetThread){JSEvents.wheelEvent||(JSEvents.wheelEvent=_malloc(96));var eventHandler={target:target,allowsDeferredCalls:!0,eventTypeString:eventTypeString,callbackfunc:callbackfunc,handlerFunc:function(ev){var e=ev||event,wheelEvent=JSEvents.wheelEvent;fillMouseEventData(wheelEvent,e,target),HEAPF64[wheelEvent+64>>3]=e.deltaX,HEAPF64[wheelEvent+72>>3]=e.deltaY,HEAPF64[wheelEvent+80>>3]=e.deltaZ,HEAP32[wheelEvent+88>>2]=e.deltaMode,wasmTable.get(callbackfunc)(eventTypeId,wheelEvent,userData)&&e.preventDefault()},useCapture:useCapture};JSEvents.registerOrRemoveHandler(eventHandler)}function _emscripten_set_wheel_callback_on_thread(target,userData,useCapture,callbackfunc,targetThread){return void 0!==(target=findEventTarget(target)).onwheel?(registerWheelEventCallback(target,userData,useCapture,callbackfunc,9,"wheel",targetThread),0):-1}function _emscripten_sleep(){throw"Please compile your program with async support in order to use asynchronous operations like emscripten_sleep"}function _emscripten_thread_sleep(msecs){for(var start=_emscripten_get_now();_emscripten_get_now()-start<msecs;);}var ENV={};function getExecutableName(){return thisProgram||"./this.program"}function getEnvStrings(){if(!getEnvStrings.strings){var env={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:getExecutableName()};for(var x in ENV)void 0===ENV[x]?delete env[x]:env[x]=ENV[x];var strings=[];for(var x in env)strings.push(x+"="+env[x]);getEnvStrings.strings=strings}return getEnvStrings.strings}function _environ_get(__environ,environ_buf){try{var bufSize=0;return getEnvStrings().forEach((function(string,i){var ptr=environ_buf+bufSize;HEAP32[__environ+4*i>>2]=ptr,writeAsciiToMemory(string,ptr),bufSize+=string.length+1})),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _environ_sizes_get(penviron_count,penviron_buf_size){try{var strings=getEnvStrings();HEAP32[penviron_count>>2]=strings.length;var bufSize=0;return strings.forEach((function(string){bufSize+=string.length+1})),HEAP32[penviron_buf_size>>2]=bufSize,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_close(fd){try{var stream=SYSCALLS.getStreamFromFD(fd);return FS.close(stream),0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_read(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd),num=SYSCALLS.doReadv(stream,iov,iovcnt);return HEAP32[pnum>>2]=num,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_seek(fd,offset_low,offset_high,whence,newOffset){try{var stream=SYSCALLS.getStreamFromFD(fd),offset=4294967296*offset_high+(offset_low>>>0);return offset<=-9007199254740992||offset>=9007199254740992?-61:(FS.llseek(stream,offset,whence),tempI64=[stream.position>>>0,(tempDouble=stream.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[newOffset>>2]=tempI64[0],HEAP32[newOffset+4>>2]=tempI64[1],stream.getdents&&0===offset&&0===whence&&(stream.getdents=null),0)}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _fd_write(fd,iov,iovcnt,pnum){try{var stream=SYSCALLS.getStreamFromFD(fd),num=SYSCALLS.doWritev(stream,iov,iovcnt);return HEAP32[pnum>>2]=num,0}catch(e){return void 0!==FS&&e instanceof FS.ErrnoError||abort(e),e.errno}}function _gettimeofday(ptr){var now=Date.now();return HEAP32[ptr>>2]=now/1e3|0,HEAP32[ptr+4>>2]=now%1e3*1e3|0,0}function _setTempRet0(val){setTempRet0(val)}function _sigaction(signum,act,oldact){return 0}var __sigalrm_handler=0;function _signal(sig,func){return 14==sig&&(__sigalrm_handler=func),0}var GLctx,FSNode=function(parent,name,mode,rdev){parent||(parent=this),this.parent=parent,this.mount=parent.mount,this.mounted=null,this.id=FS.nextInode++,this.name=name,this.mode=mode,this.node_ops={},this.stream_ops={},this.rdev=rdev},readMode=365,writeMode=146;Object.defineProperties(FSNode.prototype,{read:{get:function(){return(this.mode&readMode)===readMode},set:function(val){val?this.mode|=readMode:this.mode&=~readMode}},write:{get:function(){return(this.mode&writeMode)===writeMode},set:function(val){val?this.mode|=writeMode:this.mode&=~writeMode}},isFolder:{get:function(){return FS.isDir(this.mode)}},isDevice:{get:function(){return FS.isChrdev(this.mode)}}}),FS.FSNode=FSNode,FS.staticInit(),Module.FS_createPath=FS.createPath,Module.FS_createDataFile=FS.createDataFile,Module.FS_createPreloadedFile=FS.createPreloadedFile,Module.FS_createLazyFile=FS.createLazyFile,Module.FS_createDevice=FS.createDevice,Module.FS_unlink=FS.unlink,embind_init_charCodes(),BindingError=Module.BindingError=extendError(Error,"BindingError"),InternalError=Module.InternalError=extendError(Error,"InternalError"),init_emval(),Module.requestFullscreen=function(lockPointer,resizeCanvas){Browser.requestFullscreen(lockPointer,resizeCanvas)},Module.requestAnimationFrame=function(func){Browser.requestAnimationFrame(func)},Module.setCanvasSize=function(width,height,noUpdates){Browser.setCanvasSize(width,height,noUpdates)},Module.pauseMainLoop=function(){Browser.mainLoop.pause()},Module.resumeMainLoop=function(){Browser.mainLoop.resume()},Module.getUserMedia=function(){Browser.getUserMedia()},Module.createContext=function(canvas,useWebGL,setInModule,webGLContextAttributes){return Browser.createContext(canvas,useWebGL,setInModule,webGLContextAttributes)};for(var i=0;i<32;++i)tempFixedLengthArray.push(new Array(i));var miniTempWebGLFloatBuffersStorage=new Float32Array(288);for(i=0;i<288;++i)miniTempWebGLFloatBuffers[i]=miniTempWebGLFloatBuffersStorage.subarray(0,i+1);var __miniTempWebGLIntBuffersStorage=new Int32Array(288);for(i=0;i<288;++i)__miniTempWebGLIntBuffers[i]=__miniTempWebGLIntBuffersStorage.subarray(0,i+1);function intArrayFromString(stringy,dontAddNull,length){var len=length>0?length:lengthBytesUTF8(stringy)+1,u8array=new Array(len),numBytesWritten=stringToUTF8Array(stringy,u8array,0,u8array.length);return dontAddNull&&(u8array.length=numBytesWritten),u8array}var calledRun,asmLibraryArg={W:___cxa_allocate_exception,V:___cxa_throw,Sa:___sys_chdir,R:___sys_fcntl64,Ua:___sys_ioctl,Wa:___sys_mkdir,Va:___sys_open,Ma:__embind_register_bigint,Da:__embind_register_bool,Ca:__embind_register_emval,o:__embind_register_float,c:__embind_register_integer,b:__embind_register_memory_view,p:__embind_register_std_string,j:__embind_register_std_wstring,Ea:__embind_register_void,m:_abort,g:_clock_gettime,Ha:_dlclose,kd:_eglBindAPI,qa:_eglChooseConfig,sb:_eglCreateContext,Pb:_eglCreateWindowSurface,Db:_eglDestroyContext,_b:_eglDestroySurface,Ba:_eglGetConfigAttrib,U:_eglGetDisplay,hb:_eglGetError,Fd:_eglInitialize,jc:_eglMakeCurrent,Ya:_eglQueryString,uc:_eglSwapBuffers,Fc:_eglSwapInterval,fa:_eglTerminate,$c:_eglWaitGL,Qc:_eglWaitNative,a:_emscripten_asm_const_int,Ia:_emscripten_exit_fullscreen,Ka:_emscripten_exit_pointerlock,i:_emscripten_get_device_pixel_ratio,e:_emscripten_get_element_css_size,s:_emscripten_get_gamepad_status,Ga:_emscripten_get_num_gamepads,ga:_emscripten_glActiveTexture,ea:_emscripten_glAttachShader,xa:_emscripten_glBeginQueryEXT,da:_emscripten_glBindAttribLocation,ca:_emscripten_glBindBuffer,ba:_emscripten_glBindFramebuffer,aa:_emscripten_glBindRenderbuffer,$:_emscripten_glBindTexture,oa:_emscripten_glBindVertexArrayOES,_:_emscripten_glBlendColor,Z:_emscripten_glBlendEquation,Y:_emscripten_glBlendEquationSeparate,X:_emscripten_glBlendFunc,Ed:_emscripten_glBlendFuncSeparate,Dd:_emscripten_glBufferData,Cd:_emscripten_glBufferSubData,Bd:_emscripten_glCheckFramebufferStatus,Ad:_emscripten_glClear,zd:_emscripten_glClearColor,yd:_emscripten_glClearDepthf,xd:_emscripten_glClearStencil,wd:_emscripten_glColorMask,vd:_emscripten_glCompileShader,ud:_emscripten_glCompressedTexImage2D,td:_emscripten_glCompressedTexSubImage2D,sd:_emscripten_glCopyTexImage2D,rd:_emscripten_glCopyTexSubImage2D,qd:_emscripten_glCreateProgram,pd:_emscripten_glCreateShader,od:_emscripten_glCullFace,nd:_emscripten_glDeleteBuffers,md:_emscripten_glDeleteFramebuffers,ld:_emscripten_glDeleteProgram,za:_emscripten_glDeleteQueriesEXT,jd:_emscripten_glDeleteRenderbuffers,id:_emscripten_glDeleteShader,hd:_emscripten_glDeleteTextures,na:_emscripten_glDeleteVertexArraysOES,gd:_emscripten_glDepthFunc,fd:_emscripten_glDepthMask,ed:_emscripten_glDepthRangef,dd:_emscripten_glDetachShader,cd:_emscripten_glDisable,bd:_emscripten_glDisableVertexAttribArray,ad:_emscripten_glDrawArrays,ja:_emscripten_glDrawArraysInstancedANGLE,ka:_emscripten_glDrawBuffersWEBGL,_c:_emscripten_glDrawElements,ia:_emscripten_glDrawElementsInstancedANGLE,Zc:_emscripten_glEnable,Yc:_emscripten_glEnableVertexAttribArray,wa:_emscripten_glEndQueryEXT,Xc:_emscripten_glFinish,Wc:_emscripten_glFlush,Vc:_emscripten_glFramebufferRenderbuffer,Uc:_emscripten_glFramebufferTexture2D,Tc:_emscripten_glFrontFace,Sc:_emscripten_glGenBuffers,Pc:_emscripten_glGenFramebuffers,Aa:_emscripten_glGenQueriesEXT,Oc:_emscripten_glGenRenderbuffers,Nc:_emscripten_glGenTextures,ma:_emscripten_glGenVertexArraysOES,Rc:_emscripten_glGenerateMipmap,Mc:_emscripten_glGetActiveAttrib,Lc:_emscripten_glGetActiveUniform,Kc:_emscripten_glGetAttachedShaders,Jc:_emscripten_glGetAttribLocation,Ic:_emscripten_glGetBooleanv,Hc:_emscripten_glGetBufferParameteriv,Gc:_emscripten_glGetError,Ec:_emscripten_glGetFloatv,Dc:_emscripten_glGetFramebufferAttachmentParameteriv,Cc:_emscripten_glGetIntegerv,Ac:_emscripten_glGetProgramInfoLog,Bc:_emscripten_glGetProgramiv,ra:_emscripten_glGetQueryObjecti64vEXT,ta:_emscripten_glGetQueryObjectivEXT,pa:_emscripten_glGetQueryObjectui64vEXT,sa:_emscripten_glGetQueryObjectuivEXT,ua:_emscripten_glGetQueryivEXT,zc:_emscripten_glGetRenderbufferParameteriv,xc:_emscripten_glGetShaderInfoLog,wc:_emscripten_glGetShaderPrecisionFormat,vc:_emscripten_glGetShaderSource,yc:_emscripten_glGetShaderiv,tc:_emscripten_glGetString,sc:_emscripten_glGetTexParameterfv,rc:_emscripten_glGetTexParameteriv,oc:_emscripten_glGetUniformLocation,qc:_emscripten_glGetUniformfv,pc:_emscripten_glGetUniformiv,lc:_emscripten_glGetVertexAttribPointerv,nc:_emscripten_glGetVertexAttribfv,mc:_emscripten_glGetVertexAttribiv,kc:_emscripten_glHint,ic:_emscripten_glIsBuffer,hc:_emscripten_glIsEnabled,gc:_emscripten_glIsFramebuffer,fc:_emscripten_glIsProgram,ya:_emscripten_glIsQueryEXT,ec:_emscripten_glIsRenderbuffer,dc:_emscripten_glIsShader,cc:_emscripten_glIsTexture,la:_emscripten_glIsVertexArrayOES,bc:_emscripten_glLineWidth,ac:_emscripten_glLinkProgram,$b:_emscripten_glPixelStorei,Zb:_emscripten_glPolygonOffset,va:_emscripten_glQueryCounterEXT,Yb:_emscripten_glReadPixels,Xb:_emscripten_glReleaseShaderCompiler,Wb:_emscripten_glRenderbufferStorage,Vb:_emscripten_glSampleCoverage,Ub:_emscripten_glScissor,Tb:_emscripten_glShaderBinary,Sb:_emscripten_glShaderSource,Rb:_emscripten_glStencilFunc,Qb:_emscripten_glStencilFuncSeparate,Ob:_emscripten_glStencilMask,Nb:_emscripten_glStencilMaskSeparate,Mb:_emscripten_glStencilOp,Lb:_emscripten_glStencilOpSeparate,Kb:_emscripten_glTexImage2D,Jb:_emscripten_glTexParameterf,Ib:_emscripten_glTexParameterfv,Hb:_emscripten_glTexParameteri,Gb:_emscripten_glTexParameteriv,Fb:_emscripten_glTexSubImage2D,Cb:_emscripten_glUniform1f,Bb:_emscripten_glUniform1fv,Ab:_emscripten_glUniform1i,zb:_emscripten_glUniform1iv,yb:_emscripten_glUniform2f,xb:_emscripten_glUniform2fv,wb:_emscripten_glUniform2i,vb:_emscripten_glUniform2iv,ub:_emscripten_glUniform3f,tb:_emscripten_glUniform3fv,rb:_emscripten_glUniform3i,qb:_emscripten_glUniform3iv,pb:_emscripten_glUniform4f,ob:_emscripten_glUniform4fv,nb:_emscripten_glUniform4i,mb:_emscripten_glUniform4iv,lb:_emscripten_glUniformMatrix2fv,kb:_emscripten_glUniformMatrix3fv,jb:_emscripten_glUniformMatrix4fv,ib:_emscripten_glUseProgram,gb:_emscripten_glValidateProgram,fb:_emscripten_glVertexAttrib1f,eb:_emscripten_glVertexAttrib1fv,db:_emscripten_glVertexAttrib2f,cb:_emscripten_glVertexAttrib2fv,bb:_emscripten_glVertexAttrib3f,ab:_emscripten_glVertexAttrib3fv,$a:_emscripten_glVertexAttrib4f,_a:_emscripten_glVertexAttrib4fv,ha:_emscripten_glVertexAttribDivisorANGLE,Za:_emscripten_glVertexAttribPointer,Xa:_emscripten_glViewport,n:_emscripten_has_asyncify,Na:_emscripten_memcpy_big,Ja:_emscripten_request_fullscreen_strategy,P:_emscripten_request_pointerlock,Oa:_emscripten_resize_heap,t:_emscripten_sample_gamepad_data,u:_emscripten_set_beforeunload_callback_on_thread,G:_emscripten_set_blur_callback_on_thread,h:_emscripten_set_canvas_element_size,k:_emscripten_set_element_css_size,H:_emscripten_set_focus_callback_on_thread,x:_emscripten_set_fullscreenchange_callback_on_thread,r:_emscripten_set_gamepadconnected_callback_on_thread,q:_emscripten_set_gamepaddisconnected_callback_on_thread,A:_emscripten_set_keydown_callback_on_thread,y:_emscripten_set_keypress_callback_on_thread,z:_emscripten_set_keyup_callback_on_thread,Eb:_emscripten_set_main_loop_arg,M:_emscripten_set_mousedown_callback_on_thread,K:_emscripten_set_mouseenter_callback_on_thread,J:_emscripten_set_mouseleave_callback_on_thread,N:_emscripten_set_mousemove_callback_on_thread,L:_emscripten_set_mouseup_callback_on_thread,B:_emscripten_set_pointerlockchange_callback_on_thread,w:_emscripten_set_resize_callback_on_thread,C:_emscripten_set_touchcancel_callback_on_thread,E:_emscripten_set_touchend_callback_on_thread,D:_emscripten_set_touchmove_callback_on_thread,F:_emscripten_set_touchstart_callback_on_thread,v:_emscripten_set_visibilitychange_callback_on_thread,I:_emscripten_set_wheel_callback_on_thread,l:_emscripten_sleep,Ra:_emscripten_thread_sleep,Pa:_environ_get,Qa:_environ_sizes_get,O:_exit,T:_fd_close,Ta:_fd_read,La:_fd_seek,S:_fd_write,f:_gettimeofday,Q:_setTempRet0,d:_sigaction,Fa:_signal},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.Hd).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.Jd).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.Kd).apply(null,arguments)},_main=Module._main=function(){return(_main=Module._main=Module.asm.Ld).apply(null,arguments)},___errno_location=Module.___errno_location=function(){return(___errno_location=Module.___errno_location=Module.asm.Md).apply(null,arguments)},___getTypeName=Module.___getTypeName=function(){return(___getTypeName=Module.___getTypeName=Module.asm.Nd).apply(null,arguments)},___embind_register_native_and_builtin_types=Module.___embind_register_native_and_builtin_types=function(){return(___embind_register_native_and_builtin_types=Module.___embind_register_native_and_builtin_types=Module.asm.Od).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.Pd).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.Qd).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.Rd).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.Sd).apply(null,arguments)},dynCall_ji=Module.dynCall_ji=function(){return(dynCall_ji=Module.dynCall_ji=Module.asm.Td).apply(null,arguments)},dynCall_iiji=Module.dynCall_iiji=function(){return(dynCall_iiji=Module.dynCall_iiji=Module.asm.Ud).apply(null,arguments)};function ExitStatus(status){this.name="ExitStatus",this.message="Program terminated with exit("+status+")",this.status=status}Module.addRunDependency=addRunDependency,Module.removeRunDependency=removeRunDependency,Module.FS_createPath=FS.createPath,Module.FS_createDataFile=FS.createDataFile,Module.FS_createPreloadedFile=FS.createPreloadedFile,Module.FS_createLazyFile=FS.createLazyFile,Module.FS_createDevice=FS.createDevice,Module.FS_unlink=FS.unlink;var calledMain=!1;function callMain(args){var entryFunction=Module._main,argc=(args=args||[]).length+1,argv=stackAlloc(4*(argc+1));HEAP32[argv>>2]=allocateUTF8OnStack(thisProgram);for(var i=1;i<argc;i++)HEAP32[(argv>>2)+i]=allocateUTF8OnStack(args[i-1]);HEAP32[(argv>>2)+argc]=0;try{exit(entryFunction(argc,argv),!0)}catch(e){if(e instanceof ExitStatus)return;if("unwind"==e)return;var toLog=e;e&&"object"==typeof e&&e.stack&&(toLog=[e,e.stack]),err("exception thrown: "+toLog),quit_(1,e)}finally{calledMain=!0}}function run(args){function doRun(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(args),postRun()))}args=args||arguments_,runDependencies>0||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout((function(){setTimeout((function(){Module.setStatus("")}),1),doRun()}),1)):doRun()))}function exit(status,implicit){EXITSTATUS=status,implicit&&keepRuntimeAlive()&&0===status||(keepRuntimeAlive()||(exitRuntime(),Module.onExit&&Module.onExit(status),ABORT=!0),quit_(status,new ExitStatus(status)))}if(dependenciesFulfilled=function runCaller(){calledRun||run(),calledRun||(dependenciesFulfilled=runCaller)},Module.run=run,Module.preInit)for("function"==typeof Module.preInit&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();